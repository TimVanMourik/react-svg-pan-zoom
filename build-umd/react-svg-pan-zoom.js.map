{"version":3,"sources":["webpack://ReactSVGPanZoom/webpack/universalModuleDefinition","webpack://ReactSVGPanZoom/webpack/bootstrap","webpack://ReactSVGPanZoom/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://ReactSVGPanZoom/./src/constants.js","webpack://ReactSVGPanZoom/external {\"root\":\"PropTypes\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}","webpack://ReactSVGPanZoom/./src/features/common.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/applyToPoint.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromObject.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromString.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/identity.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/inverse.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/utils.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/isAffineMatrix.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/translate.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/transform.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/rotate.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/scale.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/shear.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/skew.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/toString.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/smoothMatrix.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTriangles.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromDefinition.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTransformAttribute.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/index.js","webpack://ReactSVGPanZoom/./src/features/zoom.js","webpack://ReactSVGPanZoom/./src/features/pan.js","webpack://ReactSVGPanZoom/./src/features/miniature.js","webpack://ReactSVGPanZoom/./src/migration-tips.js","webpack://ReactSVGPanZoom/./src/viewer.js","webpack://ReactSVGPanZoom/./src/events/viewer-event.js","webpack://ReactSVGPanZoom/./src/features/interactions.js","webpack://ReactSVGPanZoom/./src/utils/calculateBox.js","webpack://ReactSVGPanZoom/./src/utils/RandomUID.js","webpack://ReactSVGPanZoom/./src/ui-toolbar/toolbar.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature.jsx","webpack://ReactSVGPanZoom/./src/index.js","webpack://ReactSVGPanZoom/./src/utils/is.js","webpack://ReactSVGPanZoom/./src/events/event-factory.js","webpack://ReactSVGPanZoom/./src/events/viewer-mouse-event.js","webpack://ReactSVGPanZoom/./src/events/viewer-touch-event.js","webpack://ReactSVGPanZoom/./src/utils/mapRange.js","webpack://ReactSVGPanZoom/./src/features/interactions-touch.js","webpack://ReactSVGPanZoom/./src/ui/cursor-polyfill.js","webpack://ReactSVGPanZoom/./src/ui/border-gradient.js","webpack://ReactSVGPanZoom/./src/utils/getDisplayName.js","webpack://ReactSVGPanZoom/./src/ui/selection.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-cursor.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-pan.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-zoom-in.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-zoom-out.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-fit.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/toolbar-button.jsx","webpack://ReactSVGPanZoom/./src/ui/detect-touch.js","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature-toggle-button.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/icon-arrow.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature-mask.jsx","webpack://ReactSVGPanZoom/./src/uncontrolled-viewer.js"],"names":["MODE_IDLE","MODE_PANNING","MODE_ZOOMING","TOOL_AUTO","TOOL_NONE","TOOL_PAN","TOOL_ZOOM_IN","TOOL_ZOOM_OUT","POSITION_NONE","POSITION_TOP","POSITION_RIGHT","POSITION_BOTTOM","POSITION_LEFT","ACTION_ZOOM","ACTION_PAN","ALIGN_CENTER","ALIGN_LEFT","ALIGN_RIGHT","ALIGN_TOP","ALIGN_BOTTOM","INITIAL_VALUE","getDefaultValue","viewerWidth","viewerHeight","SVGViewBoxX","SVGViewBoxY","SVGWidth","SVGHeight","scaleFactorMin","scaleFactorMax","set","version","mode","focus","pinchPointDistance","prePinchMode","startX","startY","endX","endY","miniatureOpen","lastAction","value","change","action","Object","assign","freeze","isValueValid","hasOwnProperty","getSVGPoint","viewerX","viewerY","matrix","inverseMatrix","x","y","decompose","scaleFactor","a","translationX","e","translationY","f","setFocus","setViewerSize","setSVGViewBox","setZoomLevels","setPointOnViewerCenter","SVGPointX","SVGPointY","zoomLevel","reset","resetMode","lessThanScaleFactorMin","d","moreThanScaleFactorMax","isZoomLevelGoingOutOfBounds","limitZoomLevel","scaleLevel","Math","max","min","zoom","fitSelection","selectionSVGPointX","selectionSVGPointY","selectionWidth","selectionHeight","scaleX","scaleY","fitToViewer","SVGAlignX","SVGAlignY","scaleMatrix","translateX","translateY","remainderY","round","remainderX","translationMatrix","zoomOnViewerCenter","SVGPoint","startZooming","updateZooming","Error","stopZooming","props","start","end","abs","box","width","height","pan","SVGDeltaX","SVGDeltaY","panLimit","undefined","x1","y1","x2","y2","moveX","moveY","startPanning","updatePanning","deltaX","deltaY","nextValue","stopPanning","autoPanIfNeeded","openMiniature","closeMiniature","github_base","doc_v1_to_v2","doc_v2_to_v3","tipNoViewer","console","error","tipControlledComponent","tipDeprecatedMiniatureProps","tipDeprecateToolbarProps","printMigrationTipsRelatedToProps","tool","miniaturePosition","miniatureBackground","miniatureWidth","miniatureHeight","toolbarPosition","ReactSVGPanZoom","context","children","SVGViewBox","withViewBox","defaultValue","split","map","parseFloat","ViewerDOM","state","pointerX","pointerY","autoPanLoop","bind","process","prevProps","getValue","needUpdate","setValue","autoPanIsRunning","requestAnimationFrame","onChangeValue","onZoom","onPan","event","indexOf","getTool","target","eventsHandler","click","onClick","dblclick","onDoubleClick","mousemove","onMouseMove","mouseup","onMouseUp","mousedown","onMouseDown","touchstart","onTouchStart","touchmove","onTouchMove","touchend","onTouchEnd","touchcancel","onTouchCancel","onEventHandler","type","coords","CustomToolbar","customToolbar","CustomMiniature","customMiniature","panningWithToolAuto","cursor","blockChildEvents","touchAction","detectPinchGesture","style","display","position","className","handleViewerEvent","getBoundingClientRect","left","top","clientX","clientY","setState","background","pointerEvents","SVGBackground","SVGStyle","detectAutoPan","toolbarProps","onChangeTool","miniatureProps","React","Component","propTypes","PropTypes","number","isRequired","oneOfType","object","shape","oneOf","bool","b","c","func","string","detectWheel","preventPanOutside","scaleFactorOnWheel","modifierKeys","array","disableDoubleClickZoomWithToolAuto","element","propName","componentName","prop","types","Children","count","join","defaultProps","disableZoomWithToolAuto","Toolbar","Miniature","ViewerEvent","originalEvent","SVGViewer","preventDefault","stopPropagation","_cacheDecomposedValue","forceExit","buttons","modifierKeysReducer","current","modifierKey","getModifierState","modifierKeyActive","reduce","onWheel","delta","onMouseEnterOrLeave","onInterval","calculateBox","uid","nextUID","RandomUID","WrappedComponent","displayName","handleChangeTool","handleFit","isHorizontal","transform","right","bottom","backgroundColor","borderRadius","flexDirection","padding","ratio","zoomToFit","overflow","outline","transition","centerTranslation","Viewer","isNullOrUndefined","eventType","ViewerMouseEvent","ViewerTouchEvent","_cachePoint","rect","point","_cachePoints","touchesToPoints","touches","_cacheChangedPoints","changedTouches","points","i","length","touch","push","identifier","mapRange","low1","high1","low2","high2","hasPinchPointDistance","onMultiTouch","sqrt","pow","previousPointDistance","svgPoint","distanceFactor","cancelable","isMultiTouch","shouldResetPinchPointDistance","getTouchPosition","getNextValue","nextValueFn","touchPosition","needPrefix","userAgent","navigator","toLowerCase","isFirefox","isWebkit","prefixID","BorderGradient","direction","_uid","gradientID","maskID","stroke","fill","mask","getDisplayName","name","Selection","IconCursor","IconPan","IconZoomIn","IconZoomOut","IconFit","ToolbarButton","hover","margin","color","active","border","title","isTouchDevice","window","maxTouchPoints","MiniatureToggleButton","IconArrow","open","MiniatureMask","opacity","UncontrolledReactSVGPanZoom","defaultTool","changeTool","changeValue"],"mappings":"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ACA;AACA;AACA;;;ACbA;AACA;AACA,kBAAkB,OAAO;AACzB,aAAa,OAAO;AACpB;AACO;AACP;;AAEA,SAAS,mBAAmB;;AAE5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpBO;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;;;AClB6C;;AAE7C;AACA;AACA,kBAAkB,OAAO;AACzB,YAAY,QAAQ;AACpB;;AAEO;AACP,SAAS,QAAQ;AACjB;AACA,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;;;ACtBA;AACA;AACA,cAAc,OAAO;AACrB,oBAAoB,OAAO;AAC3B,aAAa,OAAO;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACfA;AACA;AACA,oBAAoB,SAAS;AAC7B,aAAa,OAAO;AACpB;AACO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B,aAAa,OAAO;AACpB;AACO;AACP;AACA;;;AC3CqC;AACE;AACA;;AAEvC,OAAO,eAAe;AACtB;AACA;AACA,iBAAiB,OAAO;AACxB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,aAAa,OAAO;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,WAAW,QAAQ,WAAW;AACpC;AACA;;AAEA,SAAS,SAAS;AAClB,IAAI,SAAS;AACb;AACA,IAAI,SAAS;AACb;AACA;;AAEA;AACA;AACA,iBAAiB,OAAO;AACxB,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB,aAAa,OAAO;AACpB;AACO;AACP;AACA;;;AC3CqC;;AAErC;AACA;AACA,cAAc,OAAO;AACrB,qBAAqB,OAAO;AAC5B,aAAa,OAAO;AACpB;AACO;AACP,MAAM,WAAW;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClBA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,aAAa,OAAO;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACfA;AACA,OAAO,MAAM;;AAEb;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,aAAa,OAAO;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,aAAa,OAAO;AACpB;AACO;AACP;AACA;;;AC5BA;AACA;AACA,kBAAkB,OAAO;AACzB,aAAa,OAAO;AACpB;AACO;AACP,SAAS,iBAAQ;AACjB;;AAEA;AACA;AACA,kBAAkB,OAAO;AACzB,aAAa,OAAO;AACpB;AACO;AACP,SAAS,iBAAQ;AACjB;;AAEA;AACA;AACA,kBAAkB,OAAO;AACzB,aAAa,OAAO;AACpB;AACO,SAAS,iBAAQ;AACxB,mBAAmB,SAAS,GAAG,SAAS,GAAG,SAAS,GAAG,SAAS,GAAG,SAAS,GAAG,SAAS;AACxF;;;ACzBA;AACA;AACA,kBAAkB,OAAO;AACzB,uBAAuB,OAAO;AAC9B,aAAa,OAAO;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACfmC;AACI;AACM;;AAE7C;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,aAAa,OAAO;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,OAAO;AAC3B,uBAAuB,SAAS;;AAEhC;AACA,SAAS,YAAY;AACrB;;;ACpDyC;AACF;AACR;AACK;AACJ;AACD;;AAE/B;AACA;AACA,yCAAyC,SAAS;AAClD,aAAa,SAAS;AACtB;AACA;AACA;AACA,KAAK,+CAA+C;AACpD,KAAK,oCAAoC;AACzC,KAAK,8BAA8B;AACnC,KAAK,4CAA4C;AACjD,KAAK,2BAA2B;AAChC,KAAK,4BAA4B;AACjC,KAAK;AACL;AACA;AACA;AACA,KAAK,qCAAqC;AAC1C,KAAK,uCAAuC;AAC5C,KAAK,qCAAqC;AAC1C,KAAK,8CAA8C;AACnD,KAAK,0CAA0C;AAC/C,KAAK,wCAAwC;AAC7C,KAAK;AACL;AACA;AACO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B,SAAS;AACT;AACA;;AAEA;AACA;;AAEA,uCAAuC,SAAS;;AAEhD,eAAe,SAAS;;AAExB;AACA;;AAEA,uCAAuC,KAAK;;AAE5C,eAAe,KAAK;;AAEpB;AACA;;AAEA;AACA,iBAAiB,SAAS;AAC1B;AACA,eAAe,SAAS;;AAExB;AACA;AACA,eAAe,OAAO;;AAEtB;AACA;AACA,eAAe,OAAO;;AAEtB;AACA;AACA,eAAe,KAAK;;AAEpB;AACA;AACA;AACA;AACA;;;AC3FA;;AAEA;AACA,gBAAgB,0BAA0B;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,yBAAyB,EAAE;AACjF,sDAAsD,yBAAyB,EAAE;AACjF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,yBAAyB,EAAE;AACjF,sDAAsD,yBAAyB,EAAE;AACjF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,wBAAwB,yBAAyB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,gCAAgC;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA6B,WAAW;AACxC,gCAAgC;AAChC;AACA,iBAAiB,mDAAmD;AACpE;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,4BAA4B;AAC7C;AACA;AACA,iBAAiB,4BAA4B;AAC7C;AACA,4BAA4B,+BAA+B;AAC3D,4BAA4B,6BAA6B;AACzD,6BAA6B,UAAU;AACvC,kCAAkC,iBAAiB;AACnD,8BAA8B,oBAAoB;AAClD,kCAAkC,6DAA6D;AAC/F,6BAA6B,mBAAmB;;AAEhD;AACA;AACA,8BAA8B,qBAAqB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB,iCAAiC;AACxD;;AAEA;AACA;;AAEA,gCAAgC,QAAQ;;AAExC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mCAAmC,QAAQ;;AAE3C;AACA;AACA,gDAAgD;AAChD,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAKE;;AAEa;AACf;AACA;AACA,CAAC,EAAC;;;AC16C4D;;AAE9D;AACA;AACA;AACA,2BAA2B,OAAO;AAClC,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,KAAK,qCAAqC;AAC1C,KAAK,8BAA8B;AACnC,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ;AACO;AACP,SAAS,SAAK;AACd;;;ACrBA;AAAA;AAAA;AAAA;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","file":"react-svg-pan-zoom.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"prop-types\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"prop-types\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactSVGPanZoom\"] = factory(require(\"react\"), require(\"prop-types\"));\n\telse\n\t\troot[\"ReactSVGPanZoom\"] = factory(root[\"React\"], root[\"PropTypes\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","export const MODE_IDLE = 'idle';\r\nexport const MODE_PANNING = 'panning';\r\nexport const MODE_ZOOMING = 'zooming';\r\n\r\nexport const TOOL_AUTO = 'auto';\r\nexport const TOOL_NONE = 'none';\r\nexport const TOOL_PAN = 'pan';\r\nexport const TOOL_ZOOM_IN = 'zoom-in';\r\nexport const TOOL_ZOOM_OUT = 'zoom-out';\r\n\r\nexport const POSITION_NONE = 'none';\r\nexport const POSITION_TOP = 'top';\r\nexport const POSITION_RIGHT = 'right';\r\nexport const POSITION_BOTTOM = 'bottom';\r\nexport const POSITION_LEFT = 'left';\r\n\r\nexport const ACTION_ZOOM = 'zoom';\r\nexport const ACTION_PAN = 'pan';\r\n\r\nexport const ALIGN_CENTER = 'center';\r\nexport const ALIGN_LEFT = 'left';\r\nexport const ALIGN_RIGHT = 'right';\r\nexport const ALIGN_TOP = 'top';\r\nexport const ALIGN_BOTTOM = 'bottom';\r\n\r\nexport const INITIAL_VALUE = {}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import {TOOL_NONE, MODE_IDLE} from '../constants';\r\nimport {\r\n  identity,\r\n  fromObject,\r\n  inverse,\r\n  applyToPoint,\r\n  transform,\r\n  translate,\r\n  scale\r\n} from 'transformation-matrix';\r\n\r\n/**\r\n * Obtain default value\r\n * @returns {Object}\r\n */\r\nexport function getDefaultValue(viewerWidth, viewerHeight, SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax) {\r\n  return set({}, {\r\n    ...identity(),\r\n    version: 2,\r\n    mode: MODE_IDLE,\r\n    focus: false,\r\n    pinchPointDistance: null,\r\n    prePinchMode: null,\r\n    viewerWidth,\r\n    viewerHeight,\r\n    SVGViewBoxX,\r\n    SVGViewBoxY,\r\n    SVGWidth,\r\n    SVGHeight,\r\n    scaleFactorMin,\r\n    scaleFactorMax,\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null,\r\n    miniatureOpen: true,\r\n    lastAction: null,\r\n  });\r\n}\r\n\r\n/**\r\n * Change value\r\n * @param value\r\n * @param change\r\n * @param action\r\n * @returns {Object}\r\n */\r\nexport function set(value, change, action = null) {\r\n  value = Object.assign({}, value, change, {lastAction: action});\r\n  return Object.freeze(value);\r\n}\r\n\r\n/**\r\n * value valid check\r\n * @param value\r\n */\r\nexport function isValueValid(value) {\r\n  return value !== null\r\n    && typeof value === 'object'\r\n    && value.hasOwnProperty('version');\r\n}\r\n\r\n/**\r\n * Export x,y coords relative to SVG\r\n * @param value\r\n * @param viewerX\r\n * @param viewerY\r\n * @returns {*|{x, y}|{x: number, y: number}}\r\n */\r\nexport function getSVGPoint(value, viewerX, viewerY) {\r\n  let matrix = fromObject(value);\r\n\r\n  let inverseMatrix = inverse(matrix);\r\n  return applyToPoint(inverseMatrix, {x: viewerX, y: viewerY});\r\n}\r\n\r\n/**\r\n * Decompose matrix from value\r\n * @param value\r\n * @returns {{scaleFactor: number, translationX: number, translationY: number}}\r\n */\r\nexport function decompose(value) {\r\n  let matrix = fromObject(value);\r\n\r\n  return {\r\n    scaleFactor: matrix.a,\r\n    translationX: matrix.e,\r\n    translationY: matrix.f\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param focus\r\n * @returns {Object}\r\n */\r\nexport function setFocus(value, focus) {\r\n  return set(value, {focus});\r\n}\r\n\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param viewerWidth\r\n * @param viewerHeight\r\n * @returns {Object}\r\n */\r\nexport function setViewerSize(value, viewerWidth, viewerHeight) {\r\n  return set(value, {viewerWidth, viewerHeight});\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param SVGViewBoxX\r\n * @param SVGViewBoxY\r\n * @param SVGWidth\r\n * @param SVGHeight\r\n * @returns {Object}\r\n */\r\nexport function setSVGViewBox(value, SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight) {\r\n  return set(value, {SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight});\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param scaleFactorMin\r\n * @param scaleFactorMax\r\n * @returns {Object}\r\n */\r\nexport function setZoomLevels(value, scaleFactorMin, scaleFactorMax) {\r\n  return set(value, {scaleFactorMin, scaleFactorMax});\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param SVGPointX\r\n * @param SVGPointY\r\n * @param zoomLevel\r\n * @returns {Object}\r\n */\r\nexport function setPointOnViewerCenter(value, SVGPointX, SVGPointY, zoomLevel) {\r\n  let {viewerWidth, viewerHeight} = value;\r\n\r\n  let matrix = transform(\r\n    translate(-SVGPointX + viewerWidth / 2, -SVGPointY + viewerHeight / 2),   //4\r\n    translate(SVGPointX, SVGPointY),                                          //3\r\n    scale(zoomLevel, zoomLevel),                                              //2\r\n    translate(-SVGPointX, -SVGPointY)                                         //1\r\n  );\r\n\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...matrix,\r\n  });\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @returns {Object}\r\n */\r\nexport function reset(value) {\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...identity()\r\n  });\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @returns {Object}\r\n */\r\nexport function resetMode(value) {\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null\r\n  })\r\n}\r\n","/**\n * Calculate a point transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param  point {Point} Point\n * @returns {Point} Point\n */\nexport function applyToPoint (matrix, point) {\n  return Array.isArray(point) ? [\n    matrix.a * point[0] + matrix.c * point[1] + matrix.e,\n    matrix.b * point[0] + matrix.d * point[1] + matrix.f\n  ] : {\n    x: matrix.a * point.x + matrix.c * point.y + matrix.e,\n    y: matrix.b * point.x + matrix.d * point.y + matrix.f\n  }\n}\n\n/**\n * Calculate an array of points transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param points {Point[]} Array of point\n * @returns {Point[]} Array of point\n */\nexport function applyToPoints (matrix, points) {\n  return points.map(point => applyToPoint(matrix, point))\n}\n","/**\n * Extract an affine matrix from an object that contains a,b,c,d,e,f keys\n * Any value could be a float or a string that contains a float\n * @param object {Object} Object that contains a,b,c,d,e,f keys\n * @return {Matrix} Affine Matrix\n */\nexport function fromObject (object) {\n  return {\n    a: parseFloat(object.a),\n    b: parseFloat(object.b),\n    c: parseFloat(object.c),\n    d: parseFloat(object.d),\n    e: parseFloat(object.e),\n    f: parseFloat(object.f)\n  }\n}\n","/**\n * @ignore\n * @type {RegExp}\n */\nconst matrixRegex = /^matrix\\(\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*\\)$/i\n\n/**\n * Parse a string formatted as matrix(a,b,c,d,e,f)\n * @param string {string} String with an affine matrix\n * @returns {Matrix} Affine Matrix\n *\n * @example\n * > fromString('matrix(1,2,3,4,5,6)')\n * {a: 1, b: 2, c: 3, d: 4, c: 5, e: 6}\n */\nexport function fromString (string) {\n  const parsed = string.match(matrixRegex)\n  if (parsed === null || parsed.length < 7) throw new Error(`'${string}' is not a matrix`)\n  return {\n    a: parseFloat(parsed[1]),\n    b: parseFloat(parsed[2]),\n    c: parseFloat(parsed[3]),\n    d: parseFloat(parsed[4]),\n    e: parseFloat(parsed[5]),\n    f: parseFloat(parsed[6])\n  }\n}\n","/**\n * Identity matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function identity () {\n  return {\n    a: 1,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: 1,\n    f: 0\n  }\n}\n","/**\n * Calculate a matrix that is the inverse of the provided matrix\n * @param matrix {Matrix} Affine Matrix\n * @returns {Matrix} Inverted Affine Matrix\n */\nexport function inverse (matrix) {\n  // http://www.wolframalpha.com/input/?i=Inverse+%5B%7B%7Ba,c,e%7D,%7Bb,d,f%7D,%7B0,0,1%7D%7D%5D\n\n  const { a, b, c, d, e, f } = matrix\n\n  const denom = a * d - b * c\n\n  return {\n    a: d / denom,\n    b: b / -denom,\n    c: c / -denom,\n    d: a / denom,\n    e: (d * e - c * f) / -denom,\n    f: (b * e - a * f) / denom\n  }\n}\n","export function isUndefined (val) {\n  return typeof val === 'undefined'\n}\n\nexport function isNumeric (n) {\n  return typeof n === 'number' &&\n    !Number.isNaN(n) &&\n    Number.isFinite(n)\n}\n\nexport function isObject (obj) {\n  return typeof obj === 'object' &&\n    obj !== null &&\n    !Array.isArray(obj)\n}\n\nexport function matchesShape (obj, keys) {\n  return keys.every(key => key in obj)\n}\n","import { isNumeric, isObject } from './utils'\n\n/**\n * Check if the object contain an affine matrix\n * @param object {Object} Generic Plain Object\n * @return {boolean} True if is an object and contains an affine matrix\n */\n\nexport function isAffineMatrix (object) {\n  return isObject(object) &&\n    'a' in object &&\n    isNumeric(object.a) &&\n    'b' in object &&\n    isNumeric(object.b) &&\n    'c' in object &&\n    isNumeric(object.c) &&\n    'd' in object &&\n    isNumeric(object.d) &&\n    'e' in object &&\n    isNumeric(object.e) &&\n    'f' in object &&\n    isNumeric(object.f)\n}\n","/**\n * Calculate a translate matrix\n * @param tx {number} Translation on axis x\n * @param [ty = 0] {number} Translation on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function translate (tx, ty = 0) {\n  return {\n    a: 1,\n    c: 0,\n    e: tx,\n    b: 0,\n    d: 1,\n    f: ty\n  }\n}\n","/**\n * Merge multiple matrices into one\n * @param matrices {Matrix[]} Array of affine matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function transform (...matrices) {\n  matrices = Array.isArray(matrices[0]) ? matrices[0] : matrices\n\n  const multiply = (m1, m2) => {\n    return {\n      a: m1.a * m2.a + m1.c * m2.b,\n      c: m1.a * m2.c + m1.c * m2.d,\n      e: m1.a * m2.e + m1.c * m2.f + m1.e,\n      b: m1.b * m2.a + m1.d * m2.b,\n      d: m1.b * m2.c + m1.d * m2.d,\n      f: m1.b * m2.e + m1.d * m2.f + m1.f\n    }\n  }\n\n  switch (matrices.length) {\n    case 0:\n      throw new Error('no matrices provided')\n\n    case 1:\n      return matrices[0]\n\n    case 2:\n      return multiply(matrices[0], matrices[1])\n\n    default:\n      const [m1, m2, ...rest] = matrices\n      const m = multiply(m1, m2)\n      return transform(m, ...rest)\n  }\n}\n\n/**\n * Merge multiple matrices into one\n * @param matrices {Matrix[]} Array of matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function compose (...matrices) {\n  return transform(...matrices)\n}\n","import { isUndefined } from './utils'\nimport { translate } from './translate'\nimport { transform } from './transform'\n\nconst { cos, sin, PI } = Math\n/**\n * Calculate a rotation matrix\n * @param angle {number} Angle in radians\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotate (angle, cx, cy) {\n  const cosAngle = cos(angle)\n  const sinAngle = sin(angle)\n  const rotationMatrix = {\n    a: cosAngle,\n    c: -sinAngle,\n    e: 0,\n    b: sinAngle,\n    d: cosAngle,\n    f: 0\n  }\n  if (isUndefined(cx) || isUndefined(cy)) {\n    return rotationMatrix\n  }\n\n  return transform([\n    translate(cx, cy),\n    rotationMatrix,\n    translate(-cx, -cy)\n  ])\n}\n\n/**\n * Calculate a rotation matrix with a DEG angle\n * @param angle {number} Angle in degree\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotateDEG (angle, cx = undefined, cy = undefined) {\n  return rotate(angle * PI / 180, cx, cy)\n}\n","import { isUndefined } from './utils'\n\n/**\n * Calculate a scaling matrix\n * @param sx {number} Scaling on axis x\n * @param [sy = sx] {number} Scaling on axis y (default sx)\n * @returns {Matrix} Affine Matrix\n */\nexport function scale (sx, sy = undefined) {\n  if (isUndefined(sy)) sy = sx\n  return {\n    a: sx,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: sy,\n    f: 0\n  }\n}\n","/**\n * Calculate a shear matrix\n * @param shx {number} Shear on axis x\n * @param shy {number} Shear on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function shear (shx, shy) {\n  return {\n    a: 1,\n    c: shx,\n    e: 0,\n    b: shy,\n    d: 1,\n    f: 0\n  }\n}\n","// https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/skew\nconst { tan } = Math\n\n/**\n * Calculate a skew matrix\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skew (ax, ay) {\n  return {\n    a: 1,\n    c: tan(ax),\n    e: 0,\n    b: tan(ay),\n    d: 1,\n    f: 0\n  }\n}\n\n/**\n * Calculate a skew matrix using DEG angles\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skewDEG (ax, ay) {\n  return skew(ax * Math.PI / 180, ay * Math.PI / 180)\n}\n","/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toCSS (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toSVG (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toString (matrix) {\n  return `matrix(${matrix.a},${matrix.b},${matrix.c},${matrix.d},${matrix.e},${matrix.f})`\n}\n","/**\n * Rounds all elements of the given matrix using the given precision\n * @param matrix {Matrix} An affine matrix to round\n * @param [precision] {number} A precision to use for Math.round. Defaults to 10000000000 (meaning which rounds to the 10th digit after the comma).\n * @returns {Matrix} The rounded Affine Matrix\n */\nexport function smoothMatrix (matrix, precision = 10000000000) {\n  return {\n    a: Math.round(matrix.a * precision) / precision,\n    b: Math.round(matrix.b * precision) / precision,\n    c: Math.round(matrix.c * precision) / precision,\n    d: Math.round(matrix.d * precision) / precision,\n    e: Math.round(matrix.e * precision) / precision,\n    f: Math.round(matrix.f * precision) / precision\n  }\n}\n","import { inverse } from './inverse'\nimport { transform } from './transform'\nimport { smoothMatrix } from './smoothMatrix'\n\n/**\n * Returns a matrix that transforms a triangle t1 into another triangle t2, or throws an exception if it is impossible.\n * @param t1 {Point[]} Array of points containing the three points for the first triangle\n * @param t2 {Point[]} Array of points containing the three points for the second triangle\n * @returns {Matrix} Matrix which transforms t1 to t2\n * @throws Exception if the matrix becomes not invertible\n */\nexport function fromTriangles (t1, t2) {\n  // point p = first point of the triangle\n  const px1 = t1[0].x != null ? t1[0].x : t1[0][0]\n  const py1 = t1[0].y != null ? t1[0].y : t1[0][1]\n  const px2 = t2[0].x != null ? t2[0].x : t2[0][0]\n  const py2 = t2[0].y != null ? t2[0].y : t2[0][1]\n\n  // point q = second point of the triangle\n  const qx1 = t1[1].x != null ? t1[1].x : t1[1][0]\n  const qy1 = t1[1].y != null ? t1[1].y : t1[1][1]\n  const qx2 = t2[1].x != null ? t2[1].x : t2[1][0]\n  const qy2 = t2[1].y != null ? t2[1].y : t2[1][1]\n\n  // point r = third point of the triangle\n  const rx1 = t1[2].x != null ? t1[2].x : t1[2][0]\n  const ry1 = t1[2].y != null ? t1[2].y : t1[2][1]\n  const rx2 = t2[2].x != null ? t2[2].x : t2[2][0]\n  const ry2 = t2[2].y != null ? t2[2].y : t2[2][1]\n\n  const r1 = {\n    a: px1 - rx1,\n    b: py1 - ry1,\n    c: qx1 - rx1,\n    d: qy1 - ry1,\n    e: rx1,\n    f: ry1\n  }\n  const r2 = {\n    a: px2 - rx2,\n    b: py2 - ry2,\n    c: qx2 - rx2,\n    d: qy2 - ry2,\n    e: rx2,\n    f: ry2\n  }\n\n  const inverseR1 = inverse(r1)\n  const affineMatrix = transform([r2, inverseR1])\n\n  // round the matrix elements to smooth the finite inversion\n  return smoothMatrix(affineMatrix)\n}\n","import { fromObject } from './fromObject'\nimport { translate } from './translate'\nimport { scale } from './scale'\nimport { rotateDEG } from './rotate'\nimport { skewDEG } from './skew'\nimport { shear } from './shear'\n\n/**\n * Converts array of matrix descriptor to array of matrix\n * @param definitionOrArrayOfDefinition {Object[]} Array of object describing the matrix\n * @returns {Matrix[]} Array of matrix\n *\n * @example\n * > fromDefinition([\n *  { type: 'matrix', a:1, b:2, c:3, d:4, e:5, f:6 },\n *  { type: 'translate', tx: 10, ty: 20 },\n *  { type: 'scale', sx: 2, sy: 4 },\n *  { type: 'rotate', angle: 90, sx: 50, sy: 25 },\n *  { type: 'skewX', angle: 45 },\n *  { type: 'skewY',  angle: 45 },\n *  { type: 'shear', shx: 10, shy: 20}\n * ])\n *\n * [\n *  { a: 1, b: 2, c: 3, d: 4, e: 5, f: 6 },\n *  { a: 1, c: 0, e: 10, b: 0, d: 1, f: 20 },\n *  { a: 2, c: 0, e: 0, b: 0, d: 4, f: 0 },\n *  { a: 6.123, c: -1, e: 0, b: 1, d: 6.123, f: 0 },\n *  { a: 1, c: 0.99.., e: 0, b: 0, d: 1, f: 0 },\n *  { a: 1, c: 0, e: 0, b: 0.99, d: 1, f: 0 },\n *  { a: 1, c: 10, e: 0, b: 20, d: 1, f: 0 }\n * ]\n **/\nexport function fromDefinition (definitionOrArrayOfDefinition) {\n  return Array.isArray(definitionOrArrayOfDefinition)\n    ? definitionOrArrayOfDefinition.map(mapper)\n    : mapper(definitionOrArrayOfDefinition)\n\n  function mapper (descriptor) {\n    switch (descriptor.type) {\n      case 'matrix':\n        if ('a' in descriptor &&\n          'b' in descriptor &&\n          'c' in descriptor &&\n          'd' in descriptor &&\n          'e' in descriptor &&\n          'f' in descriptor\n        ) {\n          return fromObject(descriptor)\n        } else {\n          throw new Error('MISSING_MANDATORY_PARAM')\n        }\n\n      case 'translate':\n        if (!('tx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('ty' in descriptor) return translate(descriptor.tx, descriptor.ty)\n\n        return translate(descriptor.tx)\n\n      case 'scale':\n        if (!('sx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('sy' in descriptor) return scale(descriptor.sx, descriptor.sy)\n\n        return scale(descriptor.sx)\n\n      case 'rotate':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('cx' in descriptor && 'cy' in descriptor) {\n          return rotateDEG(descriptor.angle, descriptor.cx, descriptor.cy)\n        }\n        return rotateDEG(descriptor.angle)\n\n      case 'skewX':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(descriptor.angle, 0)\n\n      case 'skewY':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(0, descriptor.angle)\n\n      case 'shear':\n        if (!('shx' in descriptor && 'shy' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return shear(descriptor.shx, descriptor.shy)\n\n      default:\n        throw new Error('UNSUPPORTED_DESCRIPTOR')\n    }\n  }\n}\n","// Generated by PEG.js v0.11.0-master.30f3260, https://pegjs.org/\n\nfunction peg$subclass(child, parent) {\n  function C() { this.constructor = child; }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message = message;\n  this.expected = expected;\n  this.found = found;\n  this.location = location;\n  this.name = \"SyntaxError\";\n\n  // istanbul ignore next\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function(expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n\n    class: function(expectation) {\n      var escapedParts = expectation.parts.map(function(part) {\n        return Array.isArray(part)\n          ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n          : classEscape(part);\n      });\n\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n    },\n\n    any: function() {\n      return \"any character\";\n    },\n\n    end: function() {\n      return \"end of input\";\n    },\n\n    other: function(expectation) {\n      return expectation.description;\n    },\n\n    not: function(expectation) {\n      return \"not \" + describeExpectation(expectation.expected);\n    }\n  };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\"/g,  \"\\\\\\\"\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\]/g, \"\\\\]\")\n      .replace(/\\^/g, \"\\\\^\")\n      .replace(/-/g,  \"\\\\-\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n\n  var peg$FAILED = {};\n\n  var peg$startRuleFunctions = { transformList: peg$parsetransformList };\n  var peg$startRuleFunction = peg$parsetransformList;\n\n  var peg$c0 = \"matrix\";\n  var peg$c1 = \"(\";\n  var peg$c2 = \")\";\n  var peg$c3 = \"translate\";\n  var peg$c4 = \"scale\";\n  var peg$c5 = \"rotate\";\n  var peg$c6 = \"skewX\";\n  var peg$c7 = \"skewY\";\n  var peg$c8 = \",\";\n  var peg$c9 = \".\";\n\n  var peg$r0 = /^[eE]/;\n  var peg$r1 = /^[+\\-]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[ \\t\\r\\n]/;\n\n  var peg$e0 = peg$literalExpectation(\"matrix\", false);\n  var peg$e1 = peg$literalExpectation(\"(\", false);\n  var peg$e2 = peg$literalExpectation(\")\", false);\n  var peg$e3 = peg$literalExpectation(\"translate\", false);\n  var peg$e4 = peg$literalExpectation(\"scale\", false);\n  var peg$e5 = peg$literalExpectation(\"rotate\", false);\n  var peg$e6 = peg$literalExpectation(\"skewX\", false);\n  var peg$e7 = peg$literalExpectation(\"skewY\", false);\n  var peg$e8 = peg$literalExpectation(\",\", false);\n  var peg$e9 = peg$otherExpectation(\"fractionalConstant\");\n  var peg$e10 = peg$classExpectation([\"e\", \"E\"], false, false);\n  var peg$e11 = peg$classExpectation([\"+\", \"-\"], false, false);\n  var peg$e12 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e13 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false);\n\n  var peg$f0 = function(ts) { return ts; };\n  var peg$f1 = function(t, ts) { return t.concat(ts) };\n  var peg$f2 = function(a, b, c, d, e, f) {\n        return [{type: 'matrix', a: a, b: b, c: c, d: d, e: e, f: f}];\n      };\n  var peg$f3 = function(tx, ty) {\n        var t = {type: 'translate', tx: tx};\n        if (ty) t.ty = ty;\n        return [t];\n      };\n  var peg$f4 = function(sx, sy) {\n        var s = {type:'scale', sx: sx};\n        if (sy) s.sy = sy;\n        return [s];\n      };\n  var peg$f5 = function(angle, c) {\n        var r = {type:'rotate', angle: angle};\n        if (c) {\n          r.cx = c[0];\n          r.cy = c[1];\n        }\n        return [r];\n      };\n  var peg$f6 = function(angle) {\n        return [{type: 'skewX', angle: angle}];\n      };\n  var peg$f7 = function(angle) {\n        return [{type: 'skewY', angle: angle}];\n      };\n  var peg$f8 = function(f) { return parseFloat(f.join(\"\")); };\n  var peg$f9 = function(i) { return parseInt(i.join(\"\")); };\n  var peg$f10 = function(n) { return n; };\n  var peg$f11 = function(n1, n2) { return [n1, n2]; };\n  var peg$f12 = function(ds) { return ds.join(\"\"); };\n  var peg$f13 = function(d1, d2) { return [d1 ? d1.join(\"\") : null, \".\", d2.join(\"\")].join(\"\"); };\n  var peg$f14 = function(d) { return d.join(\"\"); };\n\n  var peg$currPos = 0;\n  var peg$savedPos = 0;\n  var peg$posDetailsCache = [{ line: 1, column: 1 }];\n  var peg$expected = [];\n  var peg$silentFails = 0;\n\n  var peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function offset() {\n    return peg$savedPos;\n  }\n\n  function range() {\n    return [peg$savedPos, peg$currPos];\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  var peg$VALIDFILENAME = typeof options.filename === \"string\" && options.filename.length > 0;\n  function peg$computeLocation(startPos, endPos) {\n    var loc = {};\n\n    if ( peg$VALIDFILENAME ) loc.filename = options.filename;\n\n    var startPosDetails = peg$computePosDetails(startPos);\n    loc.start = {\n      offset: startPos,\n      line: startPosDetails.line,\n      column: startPosDetails.column\n    };\n\n    var endPosDetails = peg$computePosDetails(endPos);\n    loc.end = {\n      offset: endPos,\n      line: endPosDetails.line,\n      column: endPosDetails.column\n    };\n\n    return loc;\n  }\n\n  function peg$begin() {\n    peg$expected.push({ pos: peg$currPos, variants: [] });\n  }\n\n  function peg$expect(expected) {\n    var top = peg$expected[peg$expected.length - 1];\n\n    if (peg$currPos < top.pos) { return; }\n\n    if (peg$currPos > top.pos) {\n      top.pos = peg$currPos;\n      top.variants = [];\n    }\n\n    top.variants.push(expected);\n  }\n\n  function peg$end(invert) {\n    var expected = peg$expected.pop();\n    var top = peg$expected[peg$expected.length - 1];\n    var variants = expected.variants;\n\n    if (top.pos !== expected.pos) { return; }\n\n    if (invert) {\n      variants = variants.map(function(e) {\n        return e.type === \"not\" ? e.expected : { type: \"not\", expected: e };\n      });\n    }\n\n    Array.prototype.push.apply(top.variants, variants);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$buildError() {\n    var expected = peg$expected[0];\n    var failPos = expected.pos;\n\n    return peg$buildStructuredError(\n      expected.variants,\n      failPos < input.length ? input.charAt(failPos) : null,\n      failPos < input.length\n        ? peg$computeLocation(failPos, failPos + 1)\n        : peg$computeLocation(failPos, failPos)\n    );\n  }\n\n  function peg$parsetransformList() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    s2 = peg$parsetransforms();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = [];\n    s4 = peg$parsewsp();\n    while (s4 !== peg$FAILED) {\n      s3.push(s4);\n      s4 = peg$parsewsp();\n    }\n    peg$savedPos = s0;\n    s0 = peg$f0(s2);\n\n    return s0;\n  }\n\n  function peg$parsetransforms() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsetransform();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsecommaWsp();\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsecommaWsp();\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsetransforms();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f1(s1, s3);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetransform();\n    }\n\n    return s0;\n  }\n\n  function peg$parsetransform() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$parsematrix();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetranslate();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsescale();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parserotate();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseskewX();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parseskewY();\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsematrix() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16, s17;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e0);\n    if (input.substr(peg$currPos, 6) === peg$c0) {\n      s1 = peg$c0;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWsp();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenumber();\n            if (s7 !== peg$FAILED) {\n              s8 = peg$parsecommaWsp();\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parsenumber();\n                if (s9 !== peg$FAILED) {\n                  s10 = peg$parsecommaWsp();\n                  if (s10 !== peg$FAILED) {\n                    s11 = peg$parsenumber();\n                    if (s11 !== peg$FAILED) {\n                      s12 = peg$parsecommaWsp();\n                      if (s12 !== peg$FAILED) {\n                        s13 = peg$parsenumber();\n                        if (s13 !== peg$FAILED) {\n                          s14 = peg$parsecommaWsp();\n                          if (s14 !== peg$FAILED) {\n                            s15 = peg$parsenumber();\n                            if (s15 !== peg$FAILED) {\n                              s16 = [];\n                              s17 = peg$parsewsp();\n                              while (s17 !== peg$FAILED) {\n                                s16.push(s17);\n                                s17 = peg$parsewsp();\n                              }\n                              rule$expects(peg$e2);\n                              if (input.charCodeAt(peg$currPos) === 41) {\n                                s17 = peg$c2;\n                                peg$currPos++;\n                              } else {\n                                s17 = peg$FAILED;\n                              }\n                              if (s17 !== peg$FAILED) {\n                                peg$savedPos = s0;\n                                s0 = peg$f2(s5, s7, s9, s11, s13, s15);\n                              } else {\n                                peg$currPos = s0;\n                                s0 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s0;\n                              s0 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetranslate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e3);\n    if (input.substr(peg$currPos, 9) === peg$c3) {\n      s1 = peg$c3;\n      peg$currPos += 9;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f3(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsescale() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e4);\n    if (input.substr(peg$currPos, 5) === peg$c4) {\n      s1 = peg$c4;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f4(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parserotate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e5);\n    if (input.substr(peg$currPos, 6) === peg$c5) {\n      s1 = peg$c5;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspTwoNumbers();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f5(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewX() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e6);\n    if (input.substr(peg$currPos, 5) === peg$c6) {\n      s1 = peg$c6;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f6(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewY() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e7);\n    if (input.substr(peg$currPos, 5) === peg$c7) {\n      s1 = peg$c7;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f7(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = peg$parsefloatingPointConstant();\n    if (s3 !== peg$FAILED) {\n      s2 = [s2, s3];\n      s1 = s2;\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f8(s1);\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parseintegerConstant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$f9(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspNumber() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f10(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspTwoNumbers() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecommaWsp();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenumber();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f11(s2, s4);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWsp() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = [];\n      s4 = peg$parsewsp();\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = peg$parsewsp();\n      }\n      s1 = [s1, s2, s3];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsecomma();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsewsp();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsewsp();\n        }\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e8);\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c8;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseintegerConstant() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f12(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefloatingPointConstant() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsefractionalConstant();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseexponent();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s1 = [s1, s2];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseexponent();\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefractionalConstant() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e9);\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c9;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f13(s1, s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s2 = peg$c9;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f14(s1);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e10);\n    if (peg$r0.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        s1 = [s1, s2, s3];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e11);\n    if (peg$r1.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigitSequence() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = [];\n    s1 = peg$parsedigit();\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parsedigit();\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e12);\n    if (peg$r2.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e13);\n    if (peg$r3.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  peg$begin();\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$expect(peg$endExpectation());\n    }\n\n    throw peg$buildError();\n  }\n}\n\nexport {\n  peg$SyntaxError as SyntaxError,\n  peg$parse as parse\n};\n\nexport default {\n  SyntaxError: peg$SyntaxError,\n  parse: peg$parse\n};\n","import { parse } from './fromTransformAttribute.autogenerated'\n\n/**\n * Parser for SVG Trasform Attribute http://www.w3.org/TR/SVG/coords.html#TransformAttribute <br/>\n * Warning: This should be considered BETA until it is released a stable version of pegjs.\n * @param transformString {string} Transform string as defined by w3 Consortium\n * @returns {Matrix[]} Array of MatrixDescriptor\n *\n * @example\n * > fromTransformAttribute('translate(-10,-10) scale(2,2) translate(10,10)')\n * [\n *  { type: 'translate', tx: -10, ty: -10},\n *  { type: 'scale', sx: 2, sy: 2 },\n *  { type: 'translate', tx: 10, ty: 10}\n * ]\n *\n * > compose(fromDefinition(fromTransformAttribute('translate(-10, -10) scale(10, 10)')))\n * { a: 10, c: 0, e: -10, b: 0, d: 10, f: -10 }\n */\nexport function fromTransformAttribute (transformString) {\n  return parse(transformString)\n}\n","export * from './applyToPoint'\nexport * from './fromObject'\nexport * from './fromString'\nexport * from './identity'\nexport * from './inverse'\nexport * from './isAffineMatrix'\nexport * from './rotate'\nexport * from './scale'\nexport * from './shear'\nexport * from './skew'\nexport * from './toString'\nexport * from './transform'\nexport * from './translate'\nexport * from './fromTriangles'\nexport * from './smoothMatrix'\nexport * from './fromDefinition'\nexport * from './fromTransformAttribute'\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\r\n\r\nimport {\r\n  ACTION_ZOOM, MODE_IDLE, MODE_ZOOMING,\r\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM\r\n} from '../constants';\r\nimport {set, getSVGPoint} from './common';\r\nimport calculateBox from '../utils/calculateBox';\r\n\r\nfunction lessThanScaleFactorMin (value, scaleFactor) {\r\n  return value.scaleFactorMin && (value.d * (scaleFactor)) <= value.scaleFactorMin;\r\n}\r\n\r\nfunction moreThanScaleFactorMax (value, scaleFactor) {\r\n  return value.scaleFactorMax && (value.d * scaleFactor) >= value.scaleFactorMax;\r\n}\r\n\r\nexport function isZoomLevelGoingOutOfBounds(value, scaleFactor) {\r\n  return lessThanScaleFactorMin(value, scaleFactor) && scaleFactor < 1 || moreThanScaleFactorMax(value, scaleFactor) && scaleFactor > 1;\r\n}\r\n\r\nexport function limitZoomLevel(value, matrix) {\r\n  let scaleLevel = matrix.a;\r\n\r\n  if(value.scaleFactorMin != null) {\r\n    // limit minimum zoom\r\n    scaleLevel = Math.max(scaleLevel, value.scaleFactorMin);\r\n  }\r\n\r\n  if(value.scaleFactorMax != null) {\r\n    // limit maximum zoom\r\n    scaleLevel = Math.min(scaleLevel, value.scaleFactorMax);\r\n  }\r\n\r\n  return set(matrix, {\r\n    a: scaleLevel,\r\n    d: scaleLevel\r\n  });\r\n}\r\n\r\nexport function zoom(value, SVGPointX, SVGPointY, scaleFactor) {\r\n  if (isZoomLevelGoingOutOfBounds(value, scaleFactor)) {\r\n      // Do not change translation and scale of value\r\n      return value;\r\n  }\r\n\r\n  const matrix = transform(\r\n    fromObject(value),\r\n    translate(SVGPointX, SVGPointY),\r\n    scale(scaleFactor, scaleFactor),\r\n    translate(-SVGPointX, -SVGPointY)\r\n  );\r\n\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...limitZoomLevel(value, matrix),\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null\r\n  }, ACTION_ZOOM);\r\n}\r\n\r\nexport function fitSelection(value, selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\r\n  let {viewerWidth, viewerHeight} = value;\r\n\r\n  let scaleX = viewerWidth / selectionWidth;\r\n  let scaleY = viewerHeight / selectionHeight;\r\n\r\n  let scaleLevel = Math.min(scaleX, scaleY);\r\n\r\n  const matrix = transform(\r\n    scale(scaleLevel, scaleLevel),                      //2\r\n    translate(-selectionSVGPointX, -selectionSVGPointY) //1\r\n  );\r\n\r\n  if(isZoomLevelGoingOutOfBounds(value, scaleLevel / value.d)) {\r\n    // Do not allow scale and translation\r\n    return set(value, {\r\n      mode: MODE_IDLE,\r\n      startX: null,\r\n      startY: null,\r\n      endX: null,\r\n      endY: null\r\n    });\r\n  }\r\n\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...limitZoomLevel(value, matrix),\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null\r\n  }, ACTION_ZOOM);\r\n}\r\n\r\nexport function fitToViewer(value, SVGAlignX=ALIGN_LEFT, SVGAlignY=ALIGN_TOP) {\r\n  let {viewerWidth, viewerHeight, SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight} = value;\r\n\r\n  let scaleX = viewerWidth / SVGWidth;\r\n  let scaleY = viewerHeight / SVGHeight;\r\n  let scaleLevel = Math.min(scaleX, scaleY);\r\n\r\n  const scaleMatrix = scale(scaleLevel, scaleLevel);\r\n\r\n  let translateX = -SVGViewBoxX * scaleX / 2;\r\n  let translateY = -SVGViewBoxY * scaleY / 2;\r\n\r\n  // after fitting, SVG and the viewer will match in width (1) or in height (2)\r\n  if (scaleX < scaleY) {\r\n    //(1) match in width, meaning scaled SVGHeight <= viewerHeight\r\n    let remainderY = viewerHeight - scaleX * SVGHeight;\r\n    switch(SVGAlignY) {\r\n      case ALIGN_TOP:\r\n        translateY = -SVGViewBoxY * scaleY / 2;\r\n      break;\r\n      case ALIGN_CENTER:\r\n        translateY = Math.round(remainderY / 2) - SVGViewBoxY * scaleY / 2;\r\n      break;\r\n      case ALIGN_BOTTOM:\r\n        translateY = remainderY - SVGViewBoxY * scaleY / 2;\r\n      break;\r\n    }\r\n  }\r\n  else {\r\n    //(2) match in height, meaning scaled SVGWidth <= viewerWidth\r\n    let remainderX = viewerWidth - scaleY * SVGWidth;\r\n    switch(SVGAlignX) {\r\n      case ALIGN_LEFT:\r\n        translateX = -SVGViewBoxX * scaleX / 2;\r\n      break;\r\n      case ALIGN_CENTER:\r\n        translateX = Math.round(remainderX / 2) - SVGViewBoxX * scaleX / 2;\r\n      break;\r\n      case ALIGN_RIGHT:\r\n        translateX = remainderX - SVGViewBoxX * scaleX / 2;\r\n      break;\r\n    }\r\n  }\r\n\r\n  const translationMatrix = translate(translateX, translateY);\r\n\r\n  const matrix = transform(\r\n    translationMatrix, //2\r\n    scaleMatrix        //1\r\n  );\r\n\r\n  if (isZoomLevelGoingOutOfBounds(value, scaleLevel / value.d)) {\r\n    // Do not allow scale and translation\r\n    return set(value, {\r\n      mode: MODE_IDLE,\r\n      startX: null,\r\n      startY: null,\r\n      endX: null,\r\n      endY: null\r\n    });\r\n  }\r\n\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...limitZoomLevel(value, matrix),\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null\r\n  }, ACTION_ZOOM);\r\n}\r\n\r\nexport function zoomOnViewerCenter(value, scaleFactor) {\r\n  let {viewerWidth, viewerHeight} = value;\r\n  let SVGPoint = getSVGPoint(value, viewerWidth / 2, viewerHeight / 2);\r\n  return zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor);\r\n}\r\n\r\nexport function startZooming(value, viewerX, viewerY) {\r\n  return set(value, {\r\n    mode: MODE_ZOOMING,\r\n    startX: viewerX,\r\n    startY: viewerY,\r\n    endX: viewerX,\r\n    endY: viewerY\r\n  });\r\n}\r\n\r\nexport function updateZooming(value, viewerX, viewerY) {\r\n  if (value.mode !== MODE_ZOOMING) throw new Error('update selection not allowed in this mode ' + value.mode);\r\n\r\n  return set(value, {\r\n    endX: viewerX,\r\n    endY: viewerY\r\n  });\r\n}\r\n\r\nexport function stopZooming(value, viewerX, viewerY, scaleFactor, props) {\r\n  let {startX, startY, endX, endY} = value;\r\n\r\n  let start = getSVGPoint(value, startX, startY);\r\n  let end = getSVGPoint(value, endX, endY);\r\n\r\n  if (Math.abs(startX - endX) > 7 && Math.abs(startY - endY) > 7) {\r\n    let box = calculateBox(start, end);\r\n    return fitSelection(value, box.x, box.y, box.width, box.height);\r\n  } else {\r\n    let SVGPoint = getSVGPoint(value, viewerX, viewerY);\r\n    return zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\r\n  }\r\n}\r\n","import {ACTION_PAN, MODE_IDLE, MODE_PANNING} from '../constants';\r\nimport {set, getSVGPoint} from './common';\r\nimport {fromObject, translate, transform, applyToPoints, inverse} from 'transformation-matrix';\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param SVGDeltaX\r\n * @param SVGDeltaY\r\n * @param panLimit\r\n * @returns {Object}\r\n */\r\nexport function pan(value, SVGDeltaX, SVGDeltaY, panLimit = undefined) {\r\n\r\n  let matrix = transform(\r\n    fromObject(value),              //2\r\n    translate(SVGDeltaX, SVGDeltaY) //1\r\n  );\r\n\r\n  // apply pan limits\r\n  if (panLimit) {\r\n    let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(matrix, [\r\n      {x: value.SVGViewBoxX + panLimit, y: value.SVGViewBoxY + panLimit},\r\n      {x: value.SVGViewBoxX + value.SVGWidth - panLimit, y: value.SVGViewBoxY + value.SVGHeight - panLimit}\r\n    ]);\r\n\r\n    //x limit\r\n    let moveX = 0;\r\n    if (value.viewerWidth - x1 < 0)\r\n      moveX = value.viewerWidth - x1;\r\n    else if (x2 < 0) moveX = -x2;\r\n\r\n\r\n    //y limit\r\n    let moveY = 0;\r\n    if (value.viewerHeight - y1 < 0)\r\n      moveY = value.viewerHeight - y1;\r\n    else if (y2 < 0) moveY = -y2;\r\n\r\n    //apply limits\r\n    matrix = transform(\r\n      translate(moveX, moveY),\r\n      matrix\r\n    )\r\n  }\r\n\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...matrix,\r\n  }, ACTION_PAN);\r\n}\r\n\r\nexport function startPanning(value, viewerX, viewerY) {\r\n  return set(value, {\r\n    mode: MODE_PANNING,\r\n    startX: viewerX,\r\n    startY: viewerY,\r\n    endX: viewerX,\r\n    endY: viewerY\r\n  }, ACTION_PAN);\r\n}\r\n\r\nexport function updatePanning(value, viewerX, viewerY, panLimit) {\r\n  if (value.mode !== MODE_PANNING) throw new Error('update pan not allowed in this mode ' + value.mode);\r\n\r\n  let {endX, endY} = value;\r\n\r\n  let start = getSVGPoint(value, endX, endY);\r\n  let end = getSVGPoint(value, viewerX, viewerY);\r\n\r\n  let deltaX = end.x - start.x;\r\n  let deltaY = end.y - start.y;\r\n\r\n  let nextValue = pan(value, deltaX, deltaY, panLimit);\r\n  return set(nextValue, {\r\n    mode: MODE_PANNING,\r\n    endX: viewerX,\r\n    endY: viewerY,\r\n  }, ACTION_PAN);\r\n}\r\n\r\nexport function stopPanning(value) {\r\n  return set(value, {\r\n      mode: MODE_IDLE,\r\n      startX: null,\r\n      startY: null,\r\n      endX: null,\r\n      endY: null\r\n    }, ACTION_PAN\r\n  );\r\n}\r\n\r\nexport function autoPanIfNeeded(value, viewerX, viewerY) {\r\n  let deltaX = 0;\r\n  let deltaY = 0;\r\n\r\n  if (viewerY <= 20) deltaY = 2;\r\n  if (value.viewerWidth - viewerX <= 20) deltaX = -2;\r\n  if (value.viewerHeight - viewerY <= 20) deltaY = -2;\r\n  if (viewerX <= 20) deltaX = 2;\r\n\r\n  deltaX = deltaX / value.d;\r\n  deltaY = deltaY / value.d;\r\n\r\n  return (deltaX === 0 && deltaY === 0) ? value : pan(value, deltaX, deltaY);\r\n}\r\n","import {set} from './common';\r\n\r\n\r\nexport function openMiniature(value) {\r\n  return set(value, {\r\n    miniatureOpen: true\r\n  });\r\n}\r\n\r\nexport function closeMiniature(value) {\r\n  return set(value, {\r\n    miniatureOpen: false\r\n  });\r\n}\r\n\r\n","import {isNullOrUndefined} from \"./utils/is\";\r\n\r\nconst github_base = 'https://github.com/chrvadala/react-svg-pan-zoom/blob/master'\r\n\r\nconst doc_v1_to_v2 = github_base + '/docs/migrate-from-v1-to-v2.md'\r\nconst doc_v2_to_v3 = github_base + '/docs/migrate-from-v2-to-v3.md'\r\n\r\nexport function tipNoViewer() {\r\n  console.error(`HEY! You are trying to use an older version of ReactSVGPanZoom. Please read here ${doc_v1_to_v2}`)\r\n}\r\n\r\nexport function tipControlledComponent() {\r\n  console.error(`HEY! With ReactSVGPanZoom >= 3 you MUST specify value and tool props. Please read here ${doc_v2_to_v3}`)\r\n}\r\n\r\nexport function tipDeprecatedMiniatureProps(){\r\n  console.error(`HEY! With ReactSVGPanZoom >= 3 the props miniaturePosition, miniatureBackground, miniatureWidth, miniatureHeight can be specified as key in the miniatureProps object. Please read here ${doc_v2_to_v3}`)\r\n}\r\n\r\nexport function tipDeprecateToolbarProps(){\r\n  console.error(`HEY! With ReactSVGPanZoom >= 3 the prop toolbarPosition can be specified as key in the toolbarProps object. Please read here ${doc_v2_to_v3}`)\r\n}\r\n\r\nexport function printMigrationTipsRelatedToProps(props){\r\n  if (\r\n    isNullOrUndefined(props.tool) ||\r\n    isNullOrUndefined(props.value)\r\n  ) tipControlledComponent()\r\n\r\n  if (\r\n    !isNullOrUndefined(props.miniaturePosition) ||\r\n    !isNullOrUndefined(props.miniatureBackground) ||\r\n    !isNullOrUndefined(props.miniatureWidth) ||\r\n    !isNullOrUndefined(props.miniatureHeight)\r\n  ) tipDeprecatedMiniatureProps()\r\n\r\n\r\n  if (\r\n    !isNullOrUndefined(props.toolbarPosition)\r\n  ) tipDeprecateToolbarProps()\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {toSVG} from 'transformation-matrix';\r\n//events\r\nimport eventFactory from './events/event-factory';\r\n//features\r\nimport {pan} from './features/pan';\r\nimport {\r\n  getDefaultValue,\r\n  isValueValid,\r\n  reset,\r\n  setPointOnViewerCenter,\r\n  setSVGViewBox,\r\n  setViewerSize,\r\n  setZoomLevels\r\n} from './features/common';\r\nimport {\r\n  onDoubleClick,\r\n  onInterval,\r\n  onMouseDown,\r\n  onMouseEnterOrLeave,\r\n  onMouseMove,\r\n  onMouseUp,\r\n  onWheel\r\n} from './features/interactions';\r\nimport {onTouchCancel, onTouchEnd, onTouchMove, onTouchStart} from './features/interactions-touch';\r\n\r\nimport {fitSelection, fitToViewer, zoom, zoomOnViewerCenter} from './features/zoom';\r\nimport {closeMiniature, openMiniature} from './features/miniature';\r\n//ui\r\nimport cursorPolyfill from './ui/cursor-polyfill';\r\nimport BorderGradient from './ui/border-gradient';\r\nimport Selection from './ui/selection';\r\nimport Toolbar from './ui-toolbar/toolbar';\r\nimport detectTouch from './ui/detect-touch';\r\nimport Miniature from './ui-miniature/miniature'\r\n\r\nimport {\r\n  ACTION_PAN,\r\n  ACTION_ZOOM,\r\n  ALIGN_BOTTOM,\r\n  ALIGN_CENTER,\r\n  ALIGN_LEFT,\r\n  ALIGN_RIGHT,\r\n  ALIGN_TOP,\r\n  MODE_IDLE,\r\n  MODE_PANNING,\r\n  MODE_ZOOMING,\r\n  POSITION_BOTTOM,\r\n  POSITION_LEFT,\r\n  POSITION_NONE,\r\n  POSITION_RIGHT,\r\n  POSITION_TOP,\r\n  TOOL_AUTO,\r\n  TOOL_NONE,\r\n  TOOL_PAN,\r\n  TOOL_ZOOM_IN,\r\n  TOOL_ZOOM_OUT\r\n} from './constants';\r\nimport {printMigrationTipsRelatedToProps} from \"./migration-tips\";\r\n\r\nexport default class ReactSVGPanZoom extends React.Component {\r\n\r\n  constructor(props, context) {\r\n    const {value, width: viewerWidth, height: viewerHeight, scaleFactorMin, scaleFactorMax, children} = props;\r\n    const {withViewBox: SVGViewBox} = children.props;\r\n    let defaultValue;\r\n    if (SVGViewBox) {\r\n      const [SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight] = SVGViewBox.split(' ').map(parseFloat);\r\n      defaultValue = getDefaultValue(viewerWidth, viewerHeight, SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax)\r\n    } else {\r\n      const {width: SVGWidth, height: SVGHeight} = children.props;\r\n      defaultValue = getDefaultValue(viewerWidth, viewerHeight, 0, 0, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax)\r\n    }\r\n\r\n    super(props, context);\r\n    this.ViewerDOM = null;\r\n    this.state = {\r\n      pointerX: null,\r\n      pointerY: null,\r\n      defaultValue\r\n    }\r\n    this.autoPanLoop = this.autoPanLoop.bind(this);\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      printMigrationTipsRelatedToProps(props)\r\n    }\r\n  }\r\n\r\n  /** React hooks **/\r\n  componentDidUpdate(prevProps) {\r\n    const value = this.getValue();\r\n    const props = this.props\r\n\r\n    let nextValue = value;\r\n    let needUpdate = false;\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      printMigrationTipsRelatedToProps(props)\r\n    }\r\n\r\n    // This block checks the size of the SVG\r\n    const {withViewBox: SVGViewBox} = props.children.props;\r\n    if (SVGViewBox) {\r\n      // if the withViewBox prop is specified\r\n      const [x, y, width, height] = SVGViewBox.split(' ').map(parseFloat);\r\n\r\n      if(value.SVGViewBoxX !== x || value.SVGViewBoxY !== y || value.SVGWidth !== width || value.SVGHeight !== height) {\r\n        nextValue = setSVGViewBox(nextValue, x, y, width, height);\r\n        needUpdate = true;\r\n      }\r\n    } else {\r\n      // if the width and height props are specified\r\n      const {width: SVGWidth, height: SVGHeight} = props.children.props;\r\n      if (value.SVGWidth !== SVGWidth || value.SVGHeight !== SVGHeight) {\r\n        nextValue = setSVGViewBox(nextValue, 0, 0, SVGWidth, SVGHeight);\r\n        needUpdate = true;\r\n      }\r\n    }\r\n\r\n    // This block checks the size of the viewer\r\n    if (\r\n      prevProps.width !== props.width ||\r\n      prevProps.height !== props.height\r\n    ) {\r\n      nextValue = setViewerSize(nextValue, props.width, props.height);\r\n      needUpdate = true;\r\n    }\r\n\r\n    // This blocks checks the scale factors\r\n    if (\r\n      prevProps.scaleFactorMin !== props.scaleFactorMin ||\r\n      prevProps.scaleFactorMax !== props.scaleFactorMax\r\n    ) {\r\n      nextValue = setZoomLevels(nextValue, props.scaleFactorMin, props.scaleFactorMax);\r\n      needUpdate = true;\r\n    }\r\n\r\n    if (needUpdate) {\r\n      this.setValue(nextValue);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.autoPanIsRunning = true;\r\n    requestAnimationFrame(this.autoPanLoop);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.autoPanIsRunning = false;\r\n  }\r\n\r\n  /** ReactSVGPanZoom handlers **/\r\n  getValue() {\r\n    if (isValueValid(this.props.value)) return this.props.value\r\n    return this.state.defaultValue\r\n  }\r\n\r\n  getTool() {\r\n    if (this.props.tool) return this.props.tool\r\n    return TOOL_NONE\r\n  }\r\n\r\n  setValue(nextValue) {\r\n    let {onChangeValue, onZoom, onPan} = this.props;\r\n\r\n    if (onChangeValue) onChangeValue(nextValue);\r\n    if (nextValue.lastAction) {\r\n      if (onZoom && nextValue.lastAction === ACTION_ZOOM) onZoom(nextValue);\r\n      if (onPan && nextValue.lastAction === ACTION_PAN) onPan(nextValue);\r\n    }\r\n  }\r\n\r\n  /** ReactSVGPanZoom methods **/\r\n  pan(SVGDeltaX, SVGDeltaY) {\r\n    let nextValue = pan(this.getValue(), SVGDeltaX, SVGDeltaY);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  zoom(SVGPointX, SVGPointY, scaleFactor) {\r\n    let nextValue = zoom(this.getValue(), SVGPointX, SVGPointY, scaleFactor);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\r\n    let nextValue = fitSelection(this.getValue(), selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  fitToViewer(SVGAlignX = ALIGN_LEFT, SVGAlignY = ALIGN_TOP) {\r\n    let nextValue = fitToViewer(this.getValue(), SVGAlignX, SVGAlignY);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  zoomOnViewerCenter(scaleFactor) {\r\n    let nextValue = zoomOnViewerCenter(this.getValue(), scaleFactor);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\r\n    let nextValue = setPointOnViewerCenter(this.getValue(), SVGPointX, SVGPointY, zoomLevel);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  reset() {\r\n    let nextValue = reset(this.getValue());\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  openMiniature() {\r\n    let nextValue = openMiniature(this.getValue());\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  closeMiniature() {\r\n    let nextValue = closeMiniature(this.getValue());\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  /** ReactSVGPanZoom internals **/\r\n  handleViewerEvent(event) {\r\n    let {props, ViewerDOM} = this;\r\n\r\n    if (!([TOOL_NONE, TOOL_AUTO].indexOf(this.getTool()) >= 0)) return;\r\n    if (event.target === ViewerDOM) return;\r\n\r\n    let eventsHandler = {\r\n      click: props.onClick,\r\n      dblclick: props.onDoubleClick,\r\n\r\n      mousemove: props.onMouseMove,\r\n      mouseup: props.onMouseUp,\r\n      mousedown: props.onMouseDown,\r\n\r\n      touchstart: props.onTouchStart,\r\n      touchmove: props.onTouchMove,\r\n      touchend: props.onTouchEnd,\r\n      touchcancel: props.onTouchCancel,\r\n    };\r\n\r\n    let onEventHandler = eventsHandler[event.type];\r\n    if (!onEventHandler) return;\r\n\r\n    onEventHandler(eventFactory(event, props.value, ViewerDOM));\r\n  }\r\n\r\n  autoPanLoop() {\r\n    let coords = {x: this.state.pointerX, y: this.state.pointerY};\r\n    let nextValue = onInterval(null, this.ViewerDOM, this.getTool(), this.getValue(), this.props, coords);\r\n    if (this.getValue() !== nextValue) {\r\n      this.setValue(nextValue);\r\n    }\r\n\r\n    if (this.autoPanIsRunning) {\r\n      requestAnimationFrame(this.autoPanLoop);\r\n    }\r\n  }\r\n\r\n  /** React renderer **/\r\n  render() {\r\n    let {props, state: {pointerX, pointerY}} = this;\r\n    let tool = this.getTool();\r\n    let value = this.getValue();\r\n    let {customToolbar: CustomToolbar, customMiniature: CustomMiniature} = props;\r\n\r\n    let panningWithToolAuto = tool === TOOL_AUTO\r\n      && value.mode === MODE_PANNING\r\n      && value.startX !== value.endX\r\n      && value.startY !== value.endY;\r\n\r\n    let cursor;\r\n\r\n    if (tool === TOOL_PAN)\r\n      cursor = cursorPolyfill(value.mode === MODE_PANNING ? 'grabbing' : 'grab');\r\n\r\n    if (tool === TOOL_ZOOM_IN)\r\n      cursor = cursorPolyfill('zoom-in');\r\n\r\n    if (tool === TOOL_ZOOM_OUT)\r\n      cursor = cursorPolyfill('zoom-out');\r\n\r\n    if (panningWithToolAuto)\r\n      cursor = cursorPolyfill('grabbing');\r\n\r\n    let blockChildEvents = [TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT].indexOf(tool) >= 0;\r\n    blockChildEvents = blockChildEvents || panningWithToolAuto;\r\n\r\n    const touchAction = (this.props.detectPinchGesture || [TOOL_PAN, TOOL_AUTO].indexOf(this.getTool()) !== -1) ? 'none' : undefined\r\n\r\n    const style = {display: 'block', cursor, touchAction};\r\n\r\n    return (\r\n      <div\r\n        style={{position: \"relative\", width: value.viewerWidth, height: value.viewerHeight, ...props.style}}\r\n        className={this.props.className}>\r\n        <svg\r\n          ref={ViewerDOM => this.ViewerDOM = ViewerDOM}\r\n          width={value.viewerWidth}\r\n          height={value.viewerHeight}\r\n          style={style}\r\n\r\n          onMouseDown={event => {\r\n            let nextValue = onMouseDown(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n          onMouseMove={event => {\r\n            let {left, top} = this.ViewerDOM.getBoundingClientRect();\r\n            let x = event.clientX - Math.round(left);\r\n            let y = event.clientY - Math.round(top);\r\n\r\n            let nextValue = onMouseMove(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props, {x, y});\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.setState({pointerX: x, pointerY: y});\r\n            this.handleViewerEvent(event);\r\n          }}\r\n          onMouseUp={event => {\r\n            let nextValue = onMouseUp(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n\r\n          onClick={event => {\r\n            this.handleViewerEvent(event)\r\n          }}\r\n          onDoubleClick={event => {\r\n            let nextValue = onDoubleClick(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n\r\n          onWheel={event => {\r\n            let nextValue = onWheel(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n          }}\r\n\r\n          onMouseEnter={event => {\r\n            if (detectTouch()) return;\r\n            let nextValue = onMouseEnterOrLeave(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n          }}\r\n          onMouseLeave={event => {\r\n            let nextValue = onMouseEnterOrLeave(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n          }}\r\n\r\n          onTouchStart={event => {\r\n            let nextValue = onTouchStart(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n          onTouchMove={event => {\r\n            let nextValue = onTouchMove(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n          onTouchEnd={event => {\r\n            let nextValue = onTouchEnd(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n          onTouchCancel={event => {\r\n            let nextValue = onTouchCancel(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}>\r\n\r\n          <rect\r\n            fill={props.background}\r\n            x={0}\r\n            y={0}\r\n            width={value.viewerWidth}\r\n            height={value.viewerHeight}\r\n            style={{pointerEvents: \"none\"}}\r\n          />\r\n\r\n          <g\r\n            transform={toSVG(value)}\r\n            style={blockChildEvents ? {pointerEvents: \"none\"} : {}}>\r\n            <rect\r\n              fill={this.props.SVGBackground}\r\n              style={this.props.SVGStyle}\r\n              x={value.SVGViewBoxX || 0}\r\n              y={value.SVGViewBoxY || 0}\r\n              width={value.SVGWidth}\r\n              height={value.SVGHeight}/>\r\n            <g>\r\n              {props.children.props.children}\r\n            </g>\r\n          </g>\r\n\r\n          {!([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0 && props.detectAutoPan && value.focus) ? null : (\r\n            <g style={{pointerEvents: \"none\"}}>\r\n              {!(pointerY <= 20) ? null :\r\n                <BorderGradient direction={POSITION_TOP} width={value.viewerWidth} height={value.viewerHeight}/>\r\n              }\r\n\r\n              {!(value.viewerWidth - pointerX <= 20) ? null :\r\n                <BorderGradient direction={POSITION_RIGHT} width={value.viewerWidth} height={value.viewerHeight}/>\r\n              }\r\n\r\n              {!(value.viewerHeight - pointerY <= 20) ? null :\r\n                <BorderGradient direction={POSITION_BOTTOM} width={value.viewerWidth} height={value.viewerHeight}/>\r\n              }\r\n\r\n              {!(value.focus && pointerX <= 20) ? null :\r\n                <BorderGradient direction={POSITION_LEFT} width={value.viewerWidth} height={value.viewerHeight}/>\r\n              }\r\n            </g>\r\n          )}\r\n\r\n          {!(value.mode === MODE_ZOOMING) ? null :\r\n            <Selection startX={value.startX} startY={value.startY} endX={value.endX} endY={value.endY}/>\r\n          }\r\n        </svg>\r\n\r\n        {props.toolbarProps.position === POSITION_NONE ? null :\r\n          <CustomToolbar\r\n            {...this.props.toolbarProps}\r\n            value={value}\r\n            onChangeValue={value => this.setValue(value)}\r\n            tool={tool}\r\n            onChangeTool={tool => this.props.onChangeTool(tool)}\r\n          />}\r\n\r\n        {props.miniatureProps.position === POSITION_NONE ? null :\r\n          <CustomMiniature\r\n            {...this.props.miniatureProps}\r\n            value={value}\r\n            onChangeValue={value => this.setValue(value)}\r\n            SVGBackground={this.props.SVGBackground}\r\n          >\r\n            {props.children.props.children}\r\n          </CustomMiniature>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nReactSVGPanZoom.propTypes = {\r\n  /**************************************************************************/\r\n  /*  Viewer configuration                                                  */\r\n  /**************************************************************************/\r\n  //width of the viewer displayed on screen\r\n  width: PropTypes.number.isRequired,\r\n\r\n  //height of the viewer displayed on screen\r\n  height: PropTypes.number.isRequired,\r\n\r\n  //value of the viewer (current camera view)\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.object,\r\n    PropTypes.shape({\r\n      version: PropTypes.oneOf([2]).isRequired,\r\n      mode: PropTypes.oneOf([MODE_IDLE, MODE_PANNING, MODE_ZOOMING]).isRequired,\r\n      focus: PropTypes.bool.isRequired,\r\n      a: PropTypes.number.isRequired,\r\n      b: PropTypes.number.isRequired,\r\n      c: PropTypes.number.isRequired,\r\n      d: PropTypes.number.isRequired,\r\n      e: PropTypes.number.isRequired,\r\n      f: PropTypes.number.isRequired,\r\n      viewerWidth: PropTypes.number.isRequired,\r\n      viewerHeight: PropTypes.number.isRequired,\r\n      SVGViewBoxX: PropTypes.number.isRequired,\r\n      SVGViewBoxY: PropTypes.number.isRequired,\r\n      SVGWidth: PropTypes.number.isRequired,\r\n      SVGHeight: PropTypes.number.isRequired,\r\n      startX: PropTypes.number,\r\n      startY: PropTypes.number,\r\n      endX: PropTypes.number,\r\n      endY: PropTypes.number,\r\n      miniatureOpen: PropTypes.bool.isRequired,\r\n    })\r\n  ]).isRequired,\r\n\r\n  //handler something changed\r\n  onChangeValue: PropTypes.func.isRequired,\r\n\r\n  //current active tool (TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT)\r\n  tool: PropTypes.oneOf([TOOL_AUTO, TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT]).isRequired,\r\n\r\n  //handler tool changed\r\n  onChangeTool: PropTypes.func.isRequired,\r\n\r\n  /**************************************************************************/\r\n  /* Customize style                                                        */\r\n  /**************************************************************************/\r\n\r\n  //background of the viewer\r\n  background: PropTypes.string,\r\n\r\n  //background of the svg\r\n  SVGBackground: PropTypes.string,\r\n\r\n  //style of the svg\r\n  SVGStyle: PropTypes.object,\r\n\r\n  //CSS style of the Viewer\r\n  style: PropTypes.object,\r\n\r\n  //className of the Viewer\r\n  className: PropTypes.string,\r\n\r\n\r\n  /**************************************************************************/\r\n  /* Detect events                                                          */\r\n  /**************************************************************************/\r\n\r\n  //perform zoom operation on mouse scroll\r\n  detectWheel: PropTypes.bool,\r\n\r\n  //perform PAN if the mouse is on viewer border\r\n  detectAutoPan: PropTypes.bool,\r\n\r\n  //perform zoom operation on pinch gesture\r\n  detectPinchGesture: PropTypes.bool,\r\n\r\n  //toolbar position\r\n  toolbarPosition: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\r\n\r\n  //handler zoom level changed\r\n  onZoom: PropTypes.func,\r\n\r\n  //handler pan action performed\r\n  onPan: PropTypes.func,\r\n\r\n  //handler click\r\n  onClick: PropTypes.func,\r\n\r\n  //handler double click\r\n  onDoubleClick: PropTypes.func,\r\n\r\n  //handler mouseup\r\n  onMouseUp: PropTypes.func,\r\n\r\n  //handler mousemove\r\n  onMouseMove: PropTypes.func,\r\n\r\n  //handler mousedown\r\n  onMouseDown: PropTypes.func,\r\n\r\n  /**************************************************************************/\r\n  /* Some advanced configurations                                           */\r\n  /**************************************************************************/\r\n\r\n  //if disabled the user can move the image outside the viewer\r\n  preventPanOutside: PropTypes.bool,\r\n\r\n  //how much scale in or out\r\n  scaleFactor: PropTypes.number,\r\n\r\n  //how much scale in or out on mouse wheel (requires detectWheel enabled)\r\n  scaleFactorOnWheel: PropTypes.number,\r\n\r\n  // maximum amount of scale a user can zoom in to\r\n  scaleFactorMax: PropTypes.number,\r\n\r\n  // minimum amount of a scale a user can zoom out of\r\n  scaleFactorMin: PropTypes.number,\r\n\r\n  //modifier keys //https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState\r\n  modifierKeys: PropTypes.array,\r\n\r\n  //Turn off zoom on double click\r\n  disableDoubleClickZoomWithToolAuto: PropTypes.bool,\r\n\r\n  /**************************************************************************/\r\n  /* Miniature configurations                                                 */\r\n  /**************************************************************************/\r\n\r\n  //override miniature component\r\n  customMiniature: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\r\n\r\n  //miniature props\r\n  miniatureProps: PropTypes.shape({\r\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_RIGHT, POSITION_LEFT]),\r\n    background: PropTypes.string,\r\n    width: PropTypes.number,\r\n    height: PropTypes.number,\r\n  }),\r\n\r\n  /**************************************************************************/\r\n  /* Toolbar configurations                                                 */\r\n  /**************************************************************************/\r\n\r\n  //override toolbar component\r\n  customToolbar: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\r\n\r\n  //toolbar props\r\n  toolbarProps: PropTypes.shape({\r\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\r\n    SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\r\n    SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\r\n  }),\r\n\r\n  /**************************************************************************/\r\n  /* Children Check                                                         */\r\n  /**************************************************************************/\r\n  //accept only one node SVG\r\n  children: function (props, propName, componentName) {\r\n    // Only accept a single child, of the appropriate type\r\n    //credits: http://www.mattzabriskie.com/blog/react-validating-children\r\n    let prop = props[propName];\r\n    let types = ['svg'];\r\n    if (React.Children.count(prop) !== 1 ||\r\n      types.indexOf(prop.type) === -1) {\r\n      return new Error(\r\n        '`' + componentName + '` ' +\r\n        'should have a single child of the following types: ' +\r\n        ' `' + types.join('`, `') + '`.'\r\n      );\r\n    }\r\n    if (\r\n      (!prop.props.hasOwnProperty('width') || !prop.props.hasOwnProperty('height')) &&\r\n      (!prop.props.hasOwnProperty('withViewBox'))\r\n    ) {\r\n      return new Error('SVG should have props `width` and `height` or `withViewBox`');\r\n    }\r\n\r\n  }\r\n};\r\n\r\nReactSVGPanZoom.defaultProps = {\r\n  style: {},\r\n  background: \"#616264\",\r\n  SVGBackground: \"#fff\",\r\n  SVGStyle: {},\r\n  detectWheel: true,\r\n  detectAutoPan: true,\r\n  detectPinchGesture: true,\r\n  modifierKeys: [\"Alt\", \"Shift\", \"Control\"],\r\n  preventPanOutside: true,\r\n  scaleFactor: 1.1,\r\n  scaleFactorOnWheel: 1.06,\r\n  disableZoomWithToolAuto: false,\r\n  onZoom: null,\r\n  onPan: null,\r\n  customToolbar: Toolbar,\r\n  toolbarProps: {},\r\n  customMiniature: Miniature,\r\n  miniatureProps: {},\r\n};\r\n","import {decompose} from '../features/common'\r\n\r\nexport default class ViewerEvent {\r\n  constructor(originalEvent, value, SVGViewer) {\r\n    this.originalEvent = originalEvent;\r\n    this.value = value;\r\n    this.SVGViewer = SVGViewer;\r\n  }\r\n\r\n  get scaleFactor() {\r\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\r\n    return this._cacheDecomposedValue.scaleFactor;\r\n  }\r\n\r\n  get translationX() {\r\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\r\n    return this._cacheDecomposedValue.translationX;\r\n  }\r\n\r\n  get translationY() {\r\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\r\n    return this._cacheDecomposedValue.translationY;\r\n  }\r\n\r\n  preventDefault(){\r\n    this.originalEvent.preventDefault();\r\n  }\r\n\r\n  stopPropagation(){\r\n    this.originalEvent.stopPropagation();\r\n  }\r\n}\r\n","import {\r\n  TOOL_AUTO,\r\n  TOOL_NONE,\r\n  TOOL_PAN,\r\n  TOOL_ZOOM_IN,\r\n  TOOL_ZOOM_OUT,\r\n  MODE_PANNING,\r\n  MODE_ZOOMING,\r\n  MODE_IDLE\r\n} from '../constants';\r\nimport {setFocus, setViewerCoords, getSVGPoint} from './common';\r\nimport {startPanning, updatePanning, stopPanning, autoPanIfNeeded} from './pan';\r\nimport {startZooming, updateZooming, stopZooming, zoom} from './zoom';\r\nimport mapRange from '../utils/mapRange';\r\n\r\n\r\nexport function onMouseDown(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let x, y;\r\n  if (coords) {\r\n    ({x, y} = coords);\r\n  } else {\r\n    let {left, top} = ViewerDOM.getBoundingClientRect();\r\n    x = event.clientX - Math.round(left);\r\n    y = event.clientY - Math.round(top);\r\n  }\r\n\r\n  let nextValue = value;\r\n\r\n  switch (tool) {\r\n    case TOOL_ZOOM_OUT:\r\n      let SVGPoint = getSVGPoint(value, x, y);\r\n      nextValue = zoom(value, SVGPoint.x, SVGPoint.y, 1 / props.scaleFactor, props);\r\n      break;\r\n\r\n    case TOOL_ZOOM_IN:\r\n      nextValue = startZooming(value, x, y);\r\n      break;\r\n\r\n    case TOOL_AUTO:\r\n    case TOOL_PAN:\r\n      nextValue = startPanning(value, x, y);\r\n      break;\r\n\r\n    default:\r\n      return value;\r\n  }\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onMouseMove(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let x, y;\r\n  if (coords) {\r\n    ({x, y} = coords);\r\n  } else {\r\n    let {left, top} = ViewerDOM.getBoundingClientRect();\r\n    x = event.clientX - Math.round(left);\r\n    y = event.clientY - Math.round(top);\r\n  }\r\n\r\n  let forceExit = (event.buttons === 0); //the mouse exited and reentered into svg\r\n  let nextValue = value;\r\n\r\n  switch (tool) {\r\n    case TOOL_ZOOM_IN:\r\n      if (value.mode === MODE_ZOOMING)\r\n        nextValue = forceExit ? stopZooming(value, x, y, props.scaleFactor, props) : updateZooming(value, x, y);\r\n      break;\r\n\r\n    case TOOL_AUTO:\r\n    case TOOL_PAN:\r\n      if (value.mode === MODE_PANNING)\r\n        nextValue = forceExit ? stopPanning(value) : updatePanning(value, x, y, props.preventPanOutside ? 20 : undefined);\r\n      break;\r\n\r\n    default:\r\n      return value;\r\n  }\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onMouseUp(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let x, y;\r\n  if (coords) {\r\n    ({x, y} = coords);\r\n  } else {\r\n    let {left, top} = ViewerDOM.getBoundingClientRect();\r\n    x = event.clientX - Math.round(left);\r\n    y = event.clientY - Math.round(top);\r\n  }\r\n\r\n  let nextValue = value;\r\n\r\n  switch (tool) {\r\n    case TOOL_ZOOM_OUT:\r\n      if (value.mode === MODE_ZOOMING)\r\n        nextValue = stopZooming(value, x, y, 1 / props.scaleFactor, props);\r\n      break;\r\n\r\n    case TOOL_ZOOM_IN:\r\n      if (value.mode === MODE_ZOOMING)\r\n        nextValue = stopZooming(value, x, y, props.scaleFactor, props);\r\n      break;\r\n\r\n    case TOOL_AUTO:\r\n    case TOOL_PAN:\r\n      if (value.mode === MODE_PANNING)\r\n        nextValue = stopPanning(value, x, y);\r\n      break;\r\n\r\n    default:\r\n      return value;\r\n  }\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onDoubleClick(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let x, y;\r\n  if (coords) {\r\n    ({x, y} = coords);\r\n  } else {\r\n    let {left, top} = ViewerDOM.getBoundingClientRect();\r\n    x = event.clientX - Math.round(left);\r\n    y = event.clientY - Math.round(top);\r\n  }\r\n\r\n  let nextValue = value;\r\n\r\n  switch (tool) {\r\n    case TOOL_AUTO:\r\n      if (!props.disableDoubleClickZoomWithToolAuto) {\r\n        let SVGPoint = getSVGPoint(value, x, y);\r\n        let modifierKeysReducer = (current, modifierKey) => current || event.getModifierState(modifierKey);\r\n        let modifierKeyActive = props.modifierKeys.reduce(modifierKeysReducer, false);\r\n        let scaleFactor = modifierKeyActive ? 1 / props.scaleFactor : props.scaleFactor;\r\n        nextValue = zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\r\n      }\r\n      break;\r\n\r\n    default:\r\n      return value;\r\n  }\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onWheel(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let x, y;\r\n  if (coords) {\r\n    ({x, y} = coords);\r\n  } else {\r\n    let {left, top} = ViewerDOM.getBoundingClientRect();\r\n    x = event.clientX - Math.round(left);\r\n    y = event.clientY - Math.round(top);\r\n  }\r\n\r\n  if (!props.detectWheel) return value;\r\n\r\n  let delta = Math.max(-1, Math.min(1, event.deltaY));\r\n  let scaleFactor = mapRange(delta, -1, 1, props.scaleFactorOnWheel, 1 / props.scaleFactorOnWheel);\r\n\r\n  let SVGPoint = getSVGPoint(value, x, y);\r\n  let nextValue = zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onMouseEnterOrLeave(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let nextValue = setFocus(value, event.type === 'mouseenter');\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onInterval(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let {x, y} = coords;\r\n\r\n  if (! ([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0) ) return value;\r\n  if (!props.detectAutoPan) return value;\r\n  if (!value.focus) return value;\r\n\r\n  return autoPanIfNeeded(value, x, y);\r\n}\r\n","export default function calculateBox(start, end) {\r\n  if (start.x <= end.x && start.y <= end.y) {\r\n    return {\r\n      x: start.x,\r\n      y: start.y,\r\n      width: end.x - start.x,\r\n      height: end.y - start.y\r\n    };\r\n  } else if (start.x >= end.x && start.y <= end.y) {\r\n    return {\r\n      x: end.x,\r\n      y: start.y,\r\n      width: start.x - end.x,\r\n      height: end.y - start.y\r\n    };\r\n  } else if (start.x >= end.x && start.y >= end.y) {\r\n    return {\r\n      x: end.x,\r\n      y: end.y,\r\n      width: start.x - end.x,\r\n      height: start.y - end.y\r\n    };\r\n  } else if (start.x <= end.x && start.y >= end.y) {\r\n    return {\r\n      x: start.x,\r\n      y: end.y,\r\n      width: end.x - start.x,\r\n      height: start.y - end.y\r\n    };\r\n  }\r\n}\r\n\r\n","import React from \"react\";\r\nimport getDisplayName from \"./getDisplayName\";\r\n\r\nlet uid = 1;\r\nconst nextUID = () => `uid${uid++}`;\r\n\r\nexport default function RandomUID(WrappedComponent) {\r\n  class RandomUID extends React.Component {\r\n    constructor(props) {\r\n      super(props)\r\n      this.state = {uid: nextUID()}\r\n    }\r\n\r\n    render() {\r\n      return <WrappedComponent _uid={this.state.uid} {...this.props}/>\r\n    }\r\n  }\r\n\r\n  RandomUID.displayName = `RandomUID(${getDisplayName(WrappedComponent)})`;\r\n\r\n  return RandomUID;\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\r\n  POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT,\r\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM,\r\n} from '../constants';\r\n\r\nimport {fitToViewer} from '../features/zoom';\r\nimport IconCursor from './icon-cursor';\r\nimport IconPan from './icon-pan';\r\nimport IconZoomIn from './icon-zoom-in';\r\nimport IconZoomOut from './icon-zoom-out';\r\nimport IconFit from './icon-fit';\r\nimport ToolbarButton from './toolbar-button';\r\n\r\nexport default function Toolbar({tool, value, onChangeValue, onChangeTool, position, SVGAlignX, SVGAlignY}) {\r\n\r\n  let handleChangeTool = (event, tool) => {\r\n    onChangeTool(tool);\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  let handleFit = event => {\r\n    onChangeValue(fitToViewer(value, SVGAlignX, SVGAlignY));\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  let isHorizontal = [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0;\r\n\r\n  let style = {\r\n    //position\r\n    position: \"absolute\",\r\n    transform: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"translate(-50%, 0px)\" : \"none\",\r\n    top: [POSITION_LEFT, POSITION_RIGHT, POSITION_TOP].indexOf(position) >= 0 ? \"5px\" : \"unset\",\r\n    left: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"50%\" : (POSITION_LEFT === position ? \"5px\" : \"unset\"),\r\n    right: [POSITION_RIGHT].indexOf(position) >= 0 ? \"5px\" : \"unset\",\r\n    bottom: [POSITION_BOTTOM].indexOf(position) >= 0 ? \"5px\" : \"unset\",\r\n\r\n    //inner styling\r\n    backgroundColor: \"rgba(19, 20, 22, 0.90)\",\r\n    borderRadius: \"2px\",\r\n    display: \"flex\",\r\n    flexDirection: isHorizontal ? \"row\" : \"column\",\r\n    padding: isHorizontal ? \"1px 2px\" : \"2px 1px\"\r\n  };\r\n\r\n  return (\r\n    <div style={style} role=\"toolbar\">\r\n      <ToolbarButton\r\n        toolbarPosition={position}\r\n        active={tool === TOOL_NONE}\r\n        name=\"unselect-tools\"\r\n        title=\"Selection\"\r\n        onClick={ event => handleChangeTool(event, TOOL_NONE) }>\r\n        <IconCursor/>\r\n      </ToolbarButton>\r\n\r\n      <ToolbarButton\r\n        toolbarPosition={position}\r\n        active={tool === TOOL_PAN}\r\n        name=\"select-tool-pan\"\r\n        title=\"Pan\"\r\n        onClick={ event => handleChangeTool(event, TOOL_PAN) }>\r\n        <IconPan/>\r\n      </ToolbarButton>\r\n\r\n      <ToolbarButton\r\n        toolbarPosition={position}\r\n        active={tool === TOOL_ZOOM_IN}\r\n        name=\"select-tool-zoom-in\"\r\n        title=\"Zoom in\"\r\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_IN) }>\r\n        <IconZoomIn/>\r\n      </ToolbarButton>\r\n\r\n      <ToolbarButton\r\n        toolbarPosition={position}\r\n        active={tool === TOOL_ZOOM_OUT}\r\n        name=\"select-tool-zoom-out\"\r\n        title=\"Zoom out\"\r\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_OUT) }>\r\n        <IconZoomOut/>\r\n      </ToolbarButton>\r\n\r\n      <ToolbarButton\r\n        toolbarPosition={position}\r\n        active={false}\r\n        name=\"fit-to-viewer\"\r\n        title=\"Fit to viewer\"\r\n        onClick={ event => handleFit(event) }>\r\n        <IconFit/>\r\n      </ToolbarButton>\r\n    </div>\r\n  )\r\n}\r\n\r\nToolbar.propTypes = {\r\n  tool: PropTypes.string.isRequired,\r\n  onChangeTool: PropTypes.func.isRequired,\r\n  value: PropTypes.object.isRequired,\r\n  onChangeValue: PropTypes.func.isRequired,\r\n\r\n  //customizations\r\n  position: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\r\n  SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\r\n  SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\r\n};\r\n\r\nToolbar.defaultProps = {\r\n  position: POSITION_RIGHT,\r\n  SVGAlignX: ALIGN_LEFT,\r\n  SVGAlignY: ALIGN_TOP\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {POSITION_LEFT, POSITION_RIGHT,} from '../constants';\r\nimport {applyToPoints, inverse} from 'transformation-matrix';\r\nimport MiniatureToggleButton from './miniature-toggle-button';\r\nimport MiniatureMask from './miniature-mask';\r\n\r\nconst {min, max} = Math;\r\n\r\nexport default function Miniature(props) {\r\n\r\n  let {value, onChangeValue, children, position, background, SVGBackground, width: miniatureWidth, height: miniatureHeight} = props;\r\n  let {SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight, viewerWidth, viewerHeight} = value;\r\n\r\n  let ratio = SVGHeight / SVGWidth;\r\n\r\n  let zoomToFit = ratio >= 1\r\n    ? miniatureHeight / SVGHeight\r\n    : miniatureWidth / SVGWidth;\r\n\r\n  let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(inverse(value), [\r\n    {x: 0, y: 0},\r\n    {x: viewerWidth, y: viewerHeight}\r\n  ]);\r\n\r\n  let width, height;\r\n  if (value.miniatureOpen) {\r\n    width = miniatureWidth;\r\n    height = miniatureHeight;\r\n  } else {\r\n    width = 24;\r\n    height = 24;\r\n  }\r\n\r\n  let style = {\r\n    position: \"absolute\",\r\n    overflow: \"hidden\",\r\n    outline: \"1px solid rgba(19, 20, 22, 0.90)\",\r\n    transition: \"width 200ms ease, height 200ms ease, bottom 200ms ease\",\r\n    width: width + \"px\",\r\n    height: height + \"px\",\r\n    bottom: \"6px\",\r\n    [position === POSITION_LEFT ? 'left' : 'right']: \"6px\",\r\n    background\r\n  };\r\n\r\n  let centerTranslation = ratio >= 1\r\n    ? `translate(${(miniatureWidth - (SVGWidth * zoomToFit)) / 2 - SVGViewBoxX * zoomToFit}, ${ - SVGViewBoxY * zoomToFit})`\r\n    : `translate(${ - SVGViewBoxX * zoomToFit}, ${(miniatureHeight - (SVGHeight * zoomToFit)) / 2 - SVGViewBoxY * zoomToFit})`;\r\n\r\n  return (\r\n    <div role=\"navigation\" style={style}>\r\n      <svg\r\n        width={miniatureWidth}\r\n        height={miniatureHeight}\r\n        style={{pointerEvents: \"none\"}}>\r\n        <g transform={centerTranslation}>\r\n          <g transform={`scale(${zoomToFit}, ${zoomToFit})`}>\r\n\r\n            <rect\r\n              fill={SVGBackground}\r\n              x={SVGViewBoxX}\r\n              y={SVGViewBoxY}\r\n              width={SVGWidth}\r\n              height={SVGHeight}/>\r\n\r\n            {children}\r\n\r\n            <MiniatureMask\r\n              SVGWidth={SVGWidth}\r\n              SVGHeight={SVGHeight}\r\n              SVGViewBoxX={SVGViewBoxX}\r\n              SVGViewBoxY={SVGViewBoxY}\r\n              x1={x1}\r\n              y1={y1}\r\n              x2={x2}\r\n              y2={y2}\r\n              zoomToFit={zoomToFit}\r\n            />\r\n\r\n          </g>\r\n        </g>\r\n      </svg>\r\n      <MiniatureToggleButton value={value} onChangeValue={onChangeValue} position={position}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nMiniature.propTypes = {\r\n  value: PropTypes.object.isRequired,\r\n  onChangeValue: PropTypes.func.isRequired,\r\n  SVGBackground: PropTypes.string.isRequired,\r\n\r\n  //customizations\r\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]),\r\n  background: PropTypes.string.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n};\r\n\r\nMiniature.defaultProps = {\r\n  position: POSITION_LEFT,\r\n  background: \"#616264\",\r\n  width: 100,\r\n  height: 80,\r\n}\r\n","import {tipNoViewer} from \"./migration-tips\";\r\n\r\nexport {default as ReactSVGPanZoom} from './viewer';\r\nexport {default as UncontrolledReactSVGPanZoom} from './uncontrolled-viewer';\r\nexport {default as Toolbar} from './ui-toolbar/toolbar';\r\nexport {default as Miniature} from './ui-miniature/miniature';\r\nexport {setPointOnViewerCenter, reset} from './features/common';\r\nexport {pan} from './features/pan';\r\nexport {zoom, fitSelection, fitToViewer, zoomOnViewerCenter} from './features/zoom';\r\nexport {openMiniature, closeMiniature} from './features/miniature'\r\nexport * from './constants';\r\n\r\nexport const Viewer = () => {\r\n  tipNoViewer()\r\n  return null;\r\n};\r\n","export function isNullOrUndefined(value) {\r\n  return typeof value === 'undefined' || value === null\r\n}\r\n","import ViewerMouseEvent from './viewer-mouse-event';\r\nimport ViewerTouchEvent from './viewer-touch-event';\r\n\r\nexport default function (originalEvent, value, SVGViewer) {\r\n\r\n  let eventType = originalEvent.type;\r\n\r\n  switch (eventType) {\r\n    case \"mousemove\":\r\n    case \"mouseup\":\r\n    case \"mousedown\":\r\n    case \"click\":\r\n    case \"dblclick\":\r\n      return new ViewerMouseEvent(originalEvent, value, SVGViewer);\r\n\r\n    case \"touchstart\":\r\n    case \"touchmove\":\r\n    case \"touchend\":\r\n    case \"touchcancel\":\r\n      return new ViewerTouchEvent(originalEvent, value, SVGViewer);\r\n\r\n    default:\r\n      throw new Error(`${eventType} not supported`);\r\n  }\r\n}\r\n","import {getSVGPoint} from '../features/common'\r\nimport ViewerEvent from './viewer-event';\r\n\r\nexport default class ViewerMouseEvent extends ViewerEvent{\r\n\r\n  get point() {\r\n    if (!this._cachePoint) {\r\n      let event = this.originalEvent, value = this.value, SVGViewer = this.SVGViewer;\r\n\r\n      let rect = SVGViewer.getBoundingClientRect();\r\n      let x = event.clientX - Math.round(rect.left);\r\n      let y = event.clientY - Math.round(rect.top);\r\n\r\n      this._cachePoint = getSVGPoint(value, x, y);\r\n    }\r\n    return this._cachePoint;\r\n  }\r\n\r\n  get x() {\r\n    return this.point.x;\r\n  }\r\n\r\n  get y() {\r\n    return this.point.y;\r\n  }\r\n}\r\n","import {getSVGPoint} from '../features/common'\r\nimport ViewerEvent from './viewer-event';\r\n\r\nexport default class ViewerTouchEvent extends ViewerEvent {\r\n  get points() {\r\n    if (!this._cachePoints)\r\n      this._cachePoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.touches, this.SVGViewer, this.value);\r\n\r\n    return this._cachePoints;\r\n  }\r\n\r\n  get changedPoints() {\r\n    if (!this._cacheChangedPoints)\r\n      this._cacheChangedPoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.changedTouches, this.SVGViewer, this.value);\r\n\r\n    return this._cacheChangedPoints;\r\n  }\r\n\r\n  static touchesToPoints(touches, SVGViewer, value) {\r\n    let points = [];\r\n    for (let i = 0; i < touches.length; i++) {\r\n      let touch = touches[i];\r\n\r\n      let rect = SVGViewer.getBoundingClientRect();\r\n      let x = touch.clientX - Math.round(rect.left);\r\n      let y = touch.clientY - Math.round(rect.top);\r\n\r\n      let point = getSVGPoint(value, x, y);\r\n\r\n      points.push({...point, identifier: touch.identifier});\r\n    }\r\n    return points;\r\n  }\r\n}\r\n","export default function mapRange(value, low1, high1, low2, high2) {\r\n  return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\r\n}\r\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\r\nimport {\r\n  TOOL_NONE, TOOL_PAN, TOOL_AUTO, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\r\n  MODE_IDLE, MODE_PANNING, MODE_ZOOMING\r\n} from '../constants';\r\nimport {resetMode, getSVGPoint, set} from './common';\r\nimport {onMouseDown, onMouseMove, onMouseUp} from './interactions';\r\nimport {isZoomLevelGoingOutOfBounds, limitZoomLevel} from './zoom';\r\n\r\nfunction hasPinchPointDistance(value) {\r\n  return typeof value.pinchPointDistance === 'number';\r\n}\r\n\r\nfunction onMultiTouch(event, ViewerDOM, tool, value, props) {\r\n  const {left, top} = ViewerDOM.getBoundingClientRect();\r\n  const x1 = event.touches[0].clientX - Math.round(left);\r\n  const y1 = event.touches[0].clientY - Math.round(top);\r\n  const x2 = event.touches[1].clientX - Math.round(left);\r\n  const y2 = event.touches[1].clientY - Math.round(top);\r\n  const pinchPointDistance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\r\n  const previousPointDistance = hasPinchPointDistance(value) ? value.pinchPointDistance : pinchPointDistance;\r\n  const svgPoint = getSVGPoint(value, (x1 + x2) / 2, (y1 + y2) / 2);\r\n  let distanceFactor = pinchPointDistance/previousPointDistance;\r\n\r\n  if (isZoomLevelGoingOutOfBounds(value, distanceFactor)) {\r\n    // Do not change translation and scale of value\r\n    return value;\r\n  }\r\n\r\n  if (event.cancelable) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  let matrix = transform(\r\n    fromObject(value),\r\n    translate(svgPoint.x, svgPoint.y),\r\n    scale(distanceFactor, distanceFactor),\r\n    translate(-svgPoint.x, -svgPoint.y)\r\n  );\r\n\r\n  return set(value, set({\r\n    mode: MODE_ZOOMING,\r\n    ...limitZoomLevel(value, matrix),\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null,\r\n    prePinchMode: value.prePinchMode ? value.prePinchMode : value.mode,\r\n    pinchPointDistance\r\n  }));\r\n}\r\n\r\nfunction isMultiTouch(event, props) {\r\n  return props.detectPinchGesture && event.touches.length > 1;\r\n}\r\n\r\nfunction shouldResetPinchPointDistance(event, value, props) {\r\n  return props.detectPinchGesture && hasPinchPointDistance(value) && event.touches.length < 2;\r\n}\r\n\r\nfunction getTouchPosition(touch, ViewerDOM) {\r\n  let {left, top} = ViewerDOM.getBoundingClientRect();\r\n  let x = touch.clientX - Math.round(left);\r\n  let y = touch.clientY - Math.round(top);\r\n\r\n  return { x, y };\r\n}\r\n\r\nfunction getNextValue(event, ViewerDOM, tool, value, props, nextValueFn) {\r\n  let nextValue = event.touches.length === 0 ? set(value, { mode: value.prePinchMode ? MODE_IDLE : value.mode, prePinchMode: null }) : value;\r\n  let touch = event.touches.length > 0 ? event.touches[0] : event.changedTouches[0];\r\n  let touchPosition = getTouchPosition(touch, ViewerDOM);\r\n\r\n  switch (tool) {\r\n    case TOOL_ZOOM_OUT:\r\n    case TOOL_ZOOM_IN:\r\n    case TOOL_AUTO:\r\n    case TOOL_PAN:\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n      return nextValueFn(event, ViewerDOM, tool, nextValue, props, touchPosition);\r\n\r\n    default:\r\n      return nextValue;\r\n  }\r\n}\r\n\r\nexport function onTouchStart(event, ViewerDOM, tool, value, props) {\r\n  if (isMultiTouch(event, props)) {\r\n    return onMultiTouch(event, ViewerDOM, tool, value, props);\r\n  }\r\n\r\n  if (event.touches.length !== 1) {\r\n    if ([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0){\r\n      return resetMode(value);\r\n    } else if([MODE_IDLE].indexOf(value.mode) >= 0){\r\n      return value;\r\n    }\r\n  }\r\n\r\n  return getNextValue(event, ViewerDOM, tool, value, props, onMouseDown);\r\n}\r\n\r\nexport function onTouchMove(event, ViewerDOM, tool, value, props) {\r\n  if (isMultiTouch(event, props)) {\r\n    return onMultiTouch(event, ViewerDOM, tool, value, props);\r\n  }\r\n\r\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0)) {\r\n    return value;\r\n  }\r\n\r\n  return getNextValue(event, ViewerDOM, tool, value, props, onMouseMove);\r\n}\r\n\r\nexport function onTouchEnd(event, ViewerDOM, tool, value, props) {\r\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0)) {\r\n    return value;\r\n  }\r\n\r\n  let nextValue = shouldResetPinchPointDistance(event, value, props) ? set(value, { pinchPointDistance: null }) : value;\r\n\r\n  if (event.touches.length > 0) {\r\n    return nextValue;\r\n  }\r\n\r\n  return getNextValue(event, ViewerDOM, tool, nextValue, props, onMouseUp);\r\n}\r\n\r\nexport function onTouchCancel(event, ViewerDOM, tool, value, props) {\r\n  event.stopPropagation();\r\n  event.preventDefault();\r\n\r\n  return resetMode(value);\r\n}\r\n","//specs: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor\r\n\r\nlet needPrefix = (cursor) => ['zoom-in', 'zoom-out', 'grab', 'grabbing'].indexOf(cursor) > -1;\r\nlet userAgent = () => navigator.userAgent.toLowerCase();\r\nlet isFirefox = () => userAgent().indexOf('firefox') > -1;\r\nlet isWebkit = () => userAgent().indexOf('webkit') > -1;\r\n\r\nexport default function (cursor) {\r\n  if (!needPrefix(cursor)) return cursor;\r\n  if (isFirefox()) return `-moz-${cursor}`;\r\n  if (isWebkit()) return `-webkit-${cursor}`;\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT} from '../constants';\r\nimport RandomUID from \"../utils/RandomUID\";\r\n\r\nconst prefixID = 'react-svg-pan-zoom_border_gradient'\r\n\r\nfunction BorderGradient({direction, width, height, _uid}) {\r\n\r\n  let transform;\r\n\r\n  switch (direction) {\r\n    case POSITION_TOP:\r\n      transform = `translate(${width}, 0) rotate(90)`;\r\n      break;\r\n\r\n    case POSITION_RIGHT:\r\n      transform = `translate(${width}, ${height}) rotate(180)`;\r\n      break;\r\n\r\n    case POSITION_BOTTOM:\r\n      transform = `translate(0, ${height}) rotate(270)`;\r\n      break;\r\n\r\n    case POSITION_LEFT:\r\n      transform = \" \";\r\n      break;\r\n  }\r\n\r\n  let gradientID = `${prefixID}_gradient_${_uid}`\r\n  let maskID = `${prefixID}_mask_${_uid}`\r\n\r\n  return (\r\n    <g>\r\n      <defs>\r\n        <linearGradient id={gradientID} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\" spreadMethod=\"pad\">\r\n          <stop offset=\"0%\" stopColor=\"#fff\" stopOpacity=\"0.8\"/>\r\n          <stop offset=\"100%\" stopColor=\"#000\" stopOpacity=\"0.5\"/>\r\n        </linearGradient>\r\n\r\n        <mask id={maskID} x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}>\r\n          <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\r\n                style={{stroke: \"none\", fill: `url(#${gradientID})`}}/>\r\n        </mask>\r\n      </defs>\r\n\r\n      <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\r\n            style={{stroke: \"none\", fill: \"#000\", mask: `url(#${maskID})`}} transform={transform}/>\r\n    </g>\r\n  );\r\n}\r\n\r\nBorderGradient.propTypes = {\r\n  direction: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]).isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired\r\n};\r\n\r\nexport default RandomUID(BorderGradient)\r\n","//https://facebook.github.io/react/docs/higher-order-components.html#convention-wrap-the-display-name-for-easy-debugging\r\nexport default function getDisplayName(WrappedComponent) {\r\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport calculateBox from '../utils/calculateBox';\r\n\r\nexport default function Selection({startX, startY, endX, endY}) {\r\n  if (!startX || !startY || !endX || !endY) return null;\r\n\r\n  let box = calculateBox({x: startX, y: startY}, {x: endX, y: endY});\r\n\r\n  return (<rect\r\n    stroke=\"#969FFF\"\r\n    strokeOpacity={0.7}\r\n    fill=\"#F3F4FF\"\r\n    fillOpacity={0.7}\r\n    x={box.x}\r\n    y={box.y}\r\n    width={box.width}\r\n    height={box.height}\r\n    style={{pointerEvents: \"none\"}}/>);\r\n}\r\n\r\nSelection.propTypes = {\r\n  startX: PropTypes.number,\r\n  startY: PropTypes.number,\r\n  endX: PropTypes.number,\r\n  endY: PropTypes.number\r\n};\r\n","import React from 'react';\r\n\r\n//credits https://materialdesignicons.com/icon/cursor-default-outline\r\n\r\nexport default function IconCursor() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <path\r\n        d=\"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z\"/>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\n//https://materialdesignicons.com/icon/cursor-move\r\n\r\nexport default function IconPan() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <path\r\n        d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\"/>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\n//https://material.io/icons/#ic_zoom_in\r\n\r\nexport default function IconZoomIn() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <g>\r\n        <path\r\n          d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\r\n        <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\n//https://material.io/icons/#ic_zoom_out\r\n\r\nexport default function IconZoomOut() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <path\r\n        d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\"/>\r\n    </svg>\r\n  )\r\n}\r\n","import React from 'react';\r\n\r\n//credits https://materialdesignicons.com/icon/cursor-default-outline\r\n\r\nexport default function IconFit() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <path\r\n        d=\"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z\"/>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  POSITION_TOP, POSITION_BOTTOM\r\n} from '../constants';\r\n\r\nexport default class ToolbarButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {hover: false};\r\n  }\r\n\r\n  change(event) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    switch (event.type) {\r\n      case 'mouseenter':\r\n      case 'touchstart':\r\n        this.setState({hover: true});\r\n        break;\r\n      case 'mouseleave':\r\n      case 'touchend':\r\n      case 'touchcancel':\r\n        this.setState({hover: false});\r\n        break;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let style = {\r\n      display: \"block\",\r\n      width: \"24px\",\r\n      height: \"24px\",\r\n      margin: [POSITION_TOP, POSITION_BOTTOM].indexOf(this.props.toolbarPosition) >= 0 ? \"2px 1px\" : \"1px 2px\",\r\n      color: this.props.active || this.state.hover ? '#1CA6FC' : '#FFF',\r\n      transition: \"color 200ms ease\",\r\n      background: \"none\",\r\n      padding: \"0px\",\r\n      border: \"0px\",\r\n      outline: \"0px\",\r\n      cursor: \"pointer\"\r\n    };\r\n\r\n    return (\r\n      <button\r\n        onMouseEnter={e => this.change(e)}\r\n        onMouseLeave={e => this.change(e)}\r\n\r\n        onTouchStart={e => {\r\n          this.change(e);\r\n          this.props.onClick(e);\r\n        }}\r\n        onTouchEnd={e => this.change(e)}\r\n        onTouchCancel={e => this.change(e)}\r\n\r\n        onClick={this.props.onClick}\r\n\r\n        style={style}\r\n        title={this.props.title}\r\n        name={this.props.name}\r\n        role=\"button\"\r\n        type=\"button\"\r\n      >{this.props.children}</button>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nToolbarButton.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  toolbarPosition: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n  active: PropTypes.bool.isRequired\r\n};\r\n","//http://stackoverflow.com/a/4819886/1398836\r\n\r\nexport default function isTouchDevice() {\r\n  return 'ontouchstart' in window        // works on most browsers\r\n    || navigator.maxTouchPoints;       // works on IE10/11 and Surface\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {openMiniature, closeMiniature} from '../features/miniature';\r\nimport IconArrow from './icon-arrow';\r\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\r\n\r\nexport default function MiniatureToggleButton({value, onChangeValue, position}) {\r\n  let style = {\r\n    width: \"24px\",\r\n    height: \"24px\",\r\n    display: \"block\",\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    [position === POSITION_LEFT ? 'left' : 'right']: '0px',\r\n    background: \"rgba(19, 20, 22, 0.901961)\",\r\n    border: 0,\r\n    padding: 0,\r\n    outline: 0,\r\n    color: \"#fff\"\r\n  };\r\n\r\n  let action = value.miniatureOpen ? closeMiniature : openMiniature;\r\n\r\n  return (\r\n    <button role=\"button\" type=\"button\" style={style} onClick={event => onChangeValue(action(value))}>\r\n      <IconArrow open={value.miniatureOpen} position={position}/>\r\n    </button>\r\n  )\r\n\r\n}\r\n\r\nMiniatureToggleButton.propTypes = {\r\n  value: PropTypes.object.isRequired,\r\n  onChangeValue: PropTypes.func.isRequired,\r\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\r\n\r\n//credits https://materialdesignicons.com/icon/chevron-up\r\n\r\nexport default function IconArrow({open, position}) {\r\n\r\n  let transform = 0;\r\n\r\n  switch (position){\r\n    case POSITION_LEFT:\r\n      transform = open ? \"rotate(225, 12, 13)\" : \"rotate(45, 12, 13)\";\r\n      break;\r\n\r\n    case POSITION_RIGHT:\r\n      transform = transform = open ? \"rotate(135, 12, 13)\" : \"rotate(-45, 12, 13)\";\r\n  }\r\n\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <g transform={transform}>\r\n        <path fill=\"#000000\" d=\"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z\"/>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nIconArrow.propTypes = {\r\n  open: PropTypes.bool.isRequired,\r\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport RandomUID from \"../utils/RandomUID\";\r\n\r\nconst prefixID = 'react-svg-pan-zoom_miniature'\r\n\r\nfunction MiniatureMask({SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight, x1, y1, x2, y2, zoomToFit, _uid}) {\r\n  const maskID = `${prefixID}_mask_${_uid}`\r\n\r\n  return (\r\n    <g>\r\n      <defs>\r\n        <mask id={maskID}>\r\n          <rect x={SVGViewBoxX} y={SVGViewBoxY} width={SVGWidth} height={SVGHeight} fill=\"#ffffff\"/>\r\n          <rect x={x1} y={y1} width={x2 - x1} height={y2 - y1}/>\r\n        </mask>\r\n      </defs>\r\n\r\n      <rect\r\n        x={SVGViewBoxX}\r\n        y={SVGViewBoxY}\r\n        width={SVGWidth}\r\n        height={SVGHeight}\r\n        style={{\r\n          stroke: \"none\",\r\n          fill: \"#000\",\r\n          mask: `url(#${maskID})`,\r\n          opacity: 0.4\r\n        }}\r\n      />\r\n    </g>)\r\n}\r\n\r\nMiniatureMask.propTypes = {\r\n  SVGWidth: PropTypes.number.isRequired,\r\n  SVGHeight: PropTypes.number.isRequired,\r\n  SVGViewBoxX: PropTypes.number.isRequired,\r\n  SVGViewBoxY: PropTypes.number.isRequired,\r\n  x1: PropTypes.number.isRequired,\r\n  y1: PropTypes.number.isRequired,\r\n  x2: PropTypes.number.isRequired,\r\n  y2: PropTypes.number.isRequired,\r\n  zoomToFit: PropTypes.number.isRequired,\r\n}\r\n\r\nexport default RandomUID(MiniatureMask)\r\n","import React from \"react\";\r\nimport ReactSVGPanZoom from './viewer'\r\nimport PropTypes from \"prop-types\";\r\nimport {TOOL_NONE} from \"./constants\";\r\n\r\nexport default class UncontrolledReactSVGPanZoom extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: props.defaultValue || {},\r\n      tool: props.defaultTool || TOOL_NONE,\r\n    }\r\n\r\n    this.Viewer = null;\r\n    this.changeTool = this.changeTool.bind(this)\r\n    this.changeValue = this.changeValue.bind(this)\r\n  }\r\n\r\n  changeTool(tool) {\r\n    this.setState({tool})\r\n  }\r\n\r\n  changeValue(value) {\r\n    this.setState({value})\r\n  }\r\n\r\n  pan(SVGDeltaX, SVGDeltaY) {\r\n    this.Viewer.pan(SVGDeltaX, SVGDeltaY)\r\n  }\r\n\r\n  zoom(SVGPointX, SVGPointY, scaleFactor) {\r\n    this.Viewer.zoom(SVGPointX, SVGPointY, scaleFactor)\r\n  }\r\n\r\n  fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\r\n    this.Viewer.fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight)\r\n  }\r\n\r\n  fitToViewer(SVGAlignX, SVGAlignY) {\r\n    this.Viewer.fitToViewer(SVGAlignX, SVGAlignY)\r\n  }\r\n\r\n  zoomOnViewerCenter(scaleFactor) {\r\n    this.Viewer.zoomOnViewerCenter(scaleFactor)\r\n  }\r\n\r\n  setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\r\n    this.Viewer.setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel)\r\n  }\r\n\r\n  reset() {\r\n    this.Viewer.reset()\r\n  }\r\n\r\n  openMiniature() {\r\n    this.Viewer.openMiniature()\r\n  }\r\n\r\n  closeMiniature() {\r\n    this.Viewer.closeMiniature()\r\n  }\r\n\r\n  render() {\r\n    const {width, height, onChangeTool, onChangeValue, ...props} = this.props\r\n    const {tool, value} = this.state\r\n\r\n    return (\r\n      <ReactSVGPanZoom\r\n        width={width} height={height}\r\n        tool={tool} onChangeTool={this.changeTool}\r\n        value={value} onChangeValue={this.changeValue}\r\n        ref={Viewer => this.Viewer = Viewer}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nUncontrolledReactSVGPanZoom.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n\r\n  defaultValue: PropTypes.object,\r\n  defaultTool: PropTypes.string,\r\n}\r\n"],"sourceRoot":""}