{"version":3,"sources":["webpack://ReactSVGPanZoom/webpack/universalModuleDefinition","webpack://ReactSVGPanZoom/webpack/bootstrap","webpack://ReactSVGPanZoom/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://ReactSVGPanZoom/./src/constants.js","webpack://ReactSVGPanZoom/external {\"root\":\"PropTypes\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}","webpack://ReactSVGPanZoom/./src/features/common.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/applyToPoint.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromObject.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromString.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/identity.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/inverse.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/utils.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/isAffineMatrix.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/translate.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/transform.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/rotate.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/scale.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/shear.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/skew.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/toString.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/smoothMatrix.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTriangles.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromDefinition.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTransformAttribute.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/index.js","webpack://ReactSVGPanZoom/./src/features/zoom.js","webpack://ReactSVGPanZoom/./src/features/pan.js","webpack://ReactSVGPanZoom/./src/features/miniature.js","webpack://ReactSVGPanZoom/./src/migration-tips.js","webpack://ReactSVGPanZoom/./src/viewer.js","webpack://ReactSVGPanZoom/./src/events/viewer-event.js","webpack://ReactSVGPanZoom/./src/features/interactions.js","webpack://ReactSVGPanZoom/./src/utils/calculateBox.js","webpack://ReactSVGPanZoom/./src/utils/RandomUID.js","webpack://ReactSVGPanZoom/./src/ui-toolbar/toolbar.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature.jsx","webpack://ReactSVGPanZoom/./src/index.js","webpack://ReactSVGPanZoom/./src/utils/is.js","webpack://ReactSVGPanZoom/./src/events/event-factory.js","webpack://ReactSVGPanZoom/./src/events/viewer-mouse-event.js","webpack://ReactSVGPanZoom/./src/events/viewer-touch-event.js","webpack://ReactSVGPanZoom/./src/utils/mapRange.js","webpack://ReactSVGPanZoom/./src/features/interactions-touch.js","webpack://ReactSVGPanZoom/./src/ui/cursor-polyfill.js","webpack://ReactSVGPanZoom/./src/ui/border-gradient.js","webpack://ReactSVGPanZoom/./src/utils/getDisplayName.js","webpack://ReactSVGPanZoom/./src/ui/selection.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-cursor.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-pan.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-zoom-in.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-zoom-out.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-fit.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/toolbar-button.jsx","webpack://ReactSVGPanZoom/./src/ui/detect-touch.js","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature-toggle-button.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/icon-arrow.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature-mask.jsx","webpack://ReactSVGPanZoom/./src/uncontrolled-viewer.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__2__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","viewerWidth","viewerHeight","SVGViewBoxX","SVGViewBoxY","SVGWidth","SVGHeight","scaleFactorMin","scaleFactorMax","set","identity","version","MODE_IDLE","focus","pinchPointDistance","prePinchMode","startX","startY","endX","endY","miniatureOpen","lastAction","viewerX","viewerY","matrix","fromObject","inverseMatrix","inverse","applyToPoint","x","y","scaleFactor","a","translationX","e","translationY","f","SVGPointX","SVGPointY","zoomLevel","transform","translate","scale","change","action","assign","freeze","point","Array","isArray","b","applyToPoints","points","map","parseFloat","matrixRegex","fromString","string","parsed","match","length","Error","denom","isUndefined","val","isNumeric","Number","isNaN","isFinite","isAffineMatrix","obj","tx","ty","matrices","multiply","m1","m2","rest","compose","cos","sin","PI","Math","rotate","angle","cx","cy","cosAngle","sinAngle","rotationMatrix","rotateDEG","sx","sy","shear","shx","shy","tan","skew","ax","ay","skewDEG","toCSS","toSVG","smoothMatrix","precision","round","fromTriangles","t1","t2","px1","py1","px2","py2","qx1","qy1","qx2","qy2","rx1","ry1","rx2","ry2","fromDefinition","definitionOrArrayOfDefinition","mapper","descriptor","type","peg$SyntaxError","message","expected","found","location","this","captureStackTrace","peg$parse","input","options","undefined","peg$result","peg$FAILED","peg$startRuleFunctions","transformList","peg$parsetransformList","peg$startRuleFunction","peg$c0","peg$c1","peg$c2","peg$c3","peg$c4","peg$c5","peg$c6","peg$c7","peg$c8","peg$c9","peg$r0","peg$r1","peg$r2","peg$r3","peg$e0","peg$literalExpectation","peg$e1","peg$e2","peg$e3","peg$e4","peg$e5","peg$e6","peg$e7","peg$e8","peg$e9","peg$otherExpectation","peg$e10","peg$classExpectation","peg$e11","peg$e12","peg$e13","peg$f0","ts","peg$f1","concat","peg$f2","peg$f3","peg$f4","peg$f5","peg$f6","peg$f7","peg$f8","join","peg$f9","parseInt","peg$f10","peg$f11","n1","n2","peg$f12","ds","peg$f13","d1","d2","peg$f14","peg$currPos","peg$posDetailsCache","line","column","peg$expected","peg$silentFails","startRule","text","ignoreCase","parts","inverted","description","peg$computePosDetails","pos","details","charCodeAt","peg$VALIDFILENAME","filename","peg$computeLocation","startPos","endPos","loc","startPosDetails","start","offset","endPosDetails","end","peg$expect","top","variants","push","peg$buildStructuredError","buildMessage","s0","s1","s2","s3","s4","peg$parsewsp","peg$parsetransforms","peg$parsetransform","peg$parsecommaWsp","s5","s7","s9","s11","s13","s15","s16","s17","rule$expects","substr","peg$parsenumber","peg$parsematrix","s6","s8","peg$parsecommaWspNumber","peg$parsetranslate","peg$parsescale","peg$parsecommaWspTwoNumbers","peg$parserotate","peg$parseskewX","peg$parseskewY","peg$parsesign","peg$parsedigitSequence","peg$parsefractionalConstant","peg$parseexponent","peg$parsefloatingPointConstant","peg$parseintegerConstant","peg$parsecomma","test","charAt","peg$parsedigit","failPos","peg$buildError","child","parent","C","constructor","peg$subclass","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","class","escapedParts","part","classEscape","any","other","not","describeExpectation","hex","ch","toString","toUpperCase","replace","j","descriptions","sort","slice","describeExpected","describeFound","fromTransformAttribute","transformString","SVGAlignX","ALIGN_LEFT","SVGAlignY","ALIGN_TOP","scaleX","scaleY","scaleLevel","min","scaleMatrix","translationMatrix","remainderY","ALIGN_CENTER","ALIGN_BOTTOM","remainderX","ALIGN_RIGHT","isZoomLevelGoingOutOfBounds","limitZoomLevel","ACTION_ZOOM","SVGPoint","getSVGPoint","zoom","MODE_ZOOMING","props","abs","box","fitSelection","width","height","lessThanScaleFactorMin","moreThanScaleFactorMax","max","selectionSVGPointX","selectionSVGPointY","selectionWidth","selectionHeight","MODE_PANNING","ACTION_PAN","panLimit","deltaX","deltaY","nextValue","pan","SVGDeltaX","SVGDeltaY","x1","y1","x2","y2","moveX","moveY","console","error","doc_v1_to_v2","isNullOrUndefined","tool","tipControlledComponent","miniaturePosition","miniatureBackground","miniatureWidth","miniatureHeight","tipDeprecatedMiniatureProps","toolbarPosition","tipDeprecateToolbarProps","github_base","doc_v2_to_v3","ReactSVGPanZoom","context","children","SVGViewBox","viewBox","split","ViewerDOM","state","pointerX","pointerY","defaultValue","getDefaultValue","autoPanLoop","React","Component","prevProps","getValue","needUpdate","setViewerSize","prevSVGWidth","prevSVGHeight","x0","y0","setSVGViewBox","setZoomLevels","setValue","autoPanIsRunning","requestAnimationFrame","isValueValid","TOOL_NONE","onChangeValue","onZoom","onPan","fitToViewer","zoomOnViewerCenter","setPointOnViewerCenter","reset","openMiniature","closeMiniature","event","TOOL_AUTO","indexOf","getTool","target","onEventHandler","click","onClick","dblclick","onDoubleClick","mousemove","onMouseMove","mouseup","onMouseUp","mousedown","onMouseDown","touchstart","onTouchStart","touchmove","onTouchMove","touchend","onTouchEnd","touchcancel","onTouchCancel","coords","onInterval","cursor","CustomToolbar","customToolbar","CustomMiniature","customMiniature","panningWithToolAuto","TOOL_PAN","TOOL_ZOOM_IN","TOOL_ZOOM_OUT","blockChildEvents","style","display","touchAction","detectPinchGesture","position","className","ref","handleViewerEvent","getBoundingClientRect","left","clientX","clientY","setState","onWheel","onMouseEnter","onMouseEnterOrLeave","onMouseLeave","fill","background","pointerEvents","SVGBackground","SVGStyle","detectAutoPan","direction","POSITION_TOP","POSITION_RIGHT","POSITION_BOTTOM","POSITION_LEFT","toolbarProps","POSITION_NONE","onChangeTool","miniatureProps","propTypes","PropTypes","number","isRequired","oneOfType","shape","oneOf","bool","func","detectWheel","preventPanOutside","scaleFactorOnWheel","modifierKeys","array","disableDoubleClickZoomWithToolAuto","element","propName","componentName","prop","types","Children","count","defaultProps","disableZoomWithToolAuto","Toolbar","Miniature","ViewerEvent","originalEvent","SVGViewer","preventDefault","stopPropagation","_cacheDecomposedValue","decompose","startZooming","startPanning","forceExit","buttons","stopZooming","updateZooming","stopPanning","updatePanning","reduce","current","modifierKey","getModifierState","delta","setFocus","autoPanIfNeeded","WrappedComponent","RandomUID","uid","nextUID","_uid","displayName","handleChangeTool","isHorizontal","right","bottom","backgroundColor","borderRadius","flexDirection","padding","role","active","title","handleFit","ratio","zoomToFit","overflow","outline","transition","centerTranslation","tipNoViewer","eventType","ViewerMouseEvent","ViewerTouchEvent","_cachePoint","rect","touches","touch","identifier","_cachePoints","touchesToPoints","_cacheChangedPoints","changedTouches","low1","high1","low2","high2","isMultiTouch","onMultiTouch","resetMode","getNextValue","hasPinchPointDistance","shouldResetPinchPointDistance","sqrt","pow","previousPointDistance","svgPoint","distanceFactor","cancelable","nextValueFn","touchPosition","getTouchPosition","needPrefix","isFirefox","isWebkit","userAgent","navigator","toLowerCase","prefixID","BorderGradient","gradientID","maskID","id","spreadMethod","stopColor","stopOpacity","stroke","mask","Selection","strokeOpacity","fillOpacity","ToolbarButton","hover","margin","color","border","maxTouchPoints","MiniatureToggleButton","open","IconArrow","MiniatureMask","opacity","UncontrolledReactSVGPanZoom","defaultTool","Viewer","changeTool","changeValue"],"mappings":"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","file":"react-svg-pan-zoom.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"prop-types\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"prop-types\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactSVGPanZoom\"] = factory(require(\"react\"), require(\"prop-types\"));\n\telse\n\t\troot[\"ReactSVGPanZoom\"] = factory(root[\"React\"], root[\"PropTypes\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","export const MODE_IDLE = 'idle';\r\nexport const MODE_PANNING = 'panning';\r\nexport const MODE_ZOOMING = 'zooming';\r\n\r\nexport const TOOL_AUTO = 'auto';\r\nexport const TOOL_NONE = 'none';\r\nexport const TOOL_PAN = 'pan';\r\nexport const TOOL_ZOOM_IN = 'zoom-in';\r\nexport const TOOL_ZOOM_OUT = 'zoom-out';\r\n\r\nexport const POSITION_NONE = 'none';\r\nexport const POSITION_TOP = 'top';\r\nexport const POSITION_RIGHT = 'right';\r\nexport const POSITION_BOTTOM = 'bottom';\r\nexport const POSITION_LEFT = 'left';\r\n\r\nexport const ACTION_ZOOM = 'zoom';\r\nexport const ACTION_PAN = 'pan';\r\n\r\nexport const ALIGN_CENTER = 'center';\r\nexport const ALIGN_LEFT = 'left';\r\nexport const ALIGN_RIGHT = 'right';\r\nexport const ALIGN_TOP = 'top';\r\nexport const ALIGN_BOTTOM = 'bottom';\r\n\r\nexport const INITIAL_VALUE = {}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import {TOOL_NONE, MODE_IDLE} from '../constants';\r\nimport {\r\n  identity,\r\n  fromObject,\r\n  inverse,\r\n  applyToPoint,\r\n  transform,\r\n  translate,\r\n  scale\r\n} from 'transformation-matrix';\r\n\r\n/**\r\n * Obtain default value\r\n * @returns {Object}\r\n */\r\nexport function getDefaultValue(viewerWidth, viewerHeight, SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax) {\r\n  return set({}, {\r\n    ...identity(),\r\n    version: 2,\r\n    mode: MODE_IDLE,\r\n    focus: false,\r\n    pinchPointDistance: null,\r\n    prePinchMode: null,\r\n    viewerWidth,\r\n    viewerHeight,\r\n    SVGWidth,\r\n    SVGHeight,\r\n    SVGViewBoxX,\r\n    SVGViewBoxY,\r\n    scaleFactorMin,\r\n    scaleFactorMax,\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null,\r\n    miniatureOpen: true,\r\n    lastAction: null,\r\n  });\r\n}\r\n\r\n/**\r\n * Change value\r\n * @param value\r\n * @param change\r\n * @param action\r\n * @returns {Object}\r\n */\r\nexport function set(value, change, action = null) {\r\n  value = Object.assign({}, value, change, {lastAction: action});\r\n  return Object.freeze(value);\r\n}\r\n\r\n/**\r\n * value valid check\r\n * @param value\r\n */\r\nexport function isValueValid(value) {\r\n  return value !== null\r\n    && typeof value === 'object'\r\n    && value.hasOwnProperty('version');\r\n}\r\n\r\n/**\r\n * Export x,y coords relative to SVG\r\n * @param value\r\n * @param viewerX\r\n * @param viewerY\r\n * @returns {*|{x, y}|{x: number, y: number}}\r\n */\r\nexport function getSVGPoint(value, viewerX, viewerY) {\r\n  let matrix = fromObject(value);\r\n\r\n  let inverseMatrix = inverse(matrix);\r\n  return applyToPoint(inverseMatrix, {x: viewerX, y: viewerY});\r\n}\r\n\r\n/**\r\n * Decompose matrix from value\r\n * @param value\r\n * @returns {{scaleFactor: number, translationX: number, translationY: number}}\r\n */\r\nexport function decompose(value) {\r\n  let matrix = fromObject(value);\r\n\r\n  return {\r\n    scaleFactor: matrix.a,\r\n    translationX: matrix.e,\r\n    translationY: matrix.f\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param focus\r\n * @returns {Object}\r\n */\r\nexport function setFocus(value, focus) {\r\n  return set(value, {focus});\r\n}\r\n\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param viewerWidth\r\n * @param viewerHeight\r\n * @returns {Object}\r\n */\r\nexport function setViewerSize(value, viewerWidth, viewerHeight) {\r\n  return set(value, {viewerWidth, viewerHeight});\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param SVGWidth\r\n * @param SVGHeight\r\n * @param SVGViewBoxX\r\n * @param SVGViewBoxY\r\n * @returns {Object}\r\n */\r\nexport function setSVGViewBox(value, SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight) {\r\n  return set(value, {SVGWidth, SVGHeight, SVGViewBoxX, SVGViewBoxY});\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param scaleFactorMin\r\n * @param scaleFactorMax\r\n * @returns {Object}\r\n */\r\nexport function setZoomLevels(value, scaleFactorMin, scaleFactorMax) {\r\n  return set(value, {scaleFactorMin, scaleFactorMax});\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param SVGPointX\r\n * @param SVGPointY\r\n * @param zoomLevel\r\n * @returns {Object}\r\n */\r\nexport function setPointOnViewerCenter(value, SVGPointX, SVGPointY, zoomLevel) {\r\n  let {viewerWidth, viewerHeight} = value;\r\n\r\n  let matrix = transform(\r\n    translate(-SVGPointX + viewerWidth / 2, -SVGPointY + viewerHeight / 2),   //4\r\n    translate(SVGPointX, SVGPointY),                                          //3\r\n    scale(zoomLevel, zoomLevel),                                              //2\r\n    translate(-SVGPointX, -SVGPointY)                                         //1\r\n  );\r\n\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...matrix,\r\n  });\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @returns {Object}\r\n */\r\nexport function reset(value) {\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...identity()\r\n  });\r\n}\r\n\r\n/**\r\n *\r\n * @param value\r\n * @returns {Object}\r\n */\r\nexport function resetMode(value) {\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null\r\n  })\r\n}\r\n","/**\n * Calculate a point transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param  point {Point} Point\n * @returns {Point} Point\n */\nexport function applyToPoint (matrix, point) {\n  return Array.isArray(point) ? [\n    matrix.a * point[0] + matrix.c * point[1] + matrix.e,\n    matrix.b * point[0] + matrix.d * point[1] + matrix.f\n  ] : {\n    x: matrix.a * point.x + matrix.c * point.y + matrix.e,\n    y: matrix.b * point.x + matrix.d * point.y + matrix.f\n  }\n}\n\n/**\n * Calculate an array of points transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param points {Point[]} Array of point\n * @returns {Point[]} Array of point\n */\nexport function applyToPoints (matrix, points) {\n  return points.map(point => applyToPoint(matrix, point))\n}\n","/**\n * Extract an affine matrix from an object that contains a,b,c,d,e,f keys\n * Any value could be a float or a string that contains a float\n * @param object {Object} Object that contains a,b,c,d,e,f keys\n * @return {Matrix} Affine Matrix\n */\nexport function fromObject (object) {\n  return {\n    a: parseFloat(object.a),\n    b: parseFloat(object.b),\n    c: parseFloat(object.c),\n    d: parseFloat(object.d),\n    e: parseFloat(object.e),\n    f: parseFloat(object.f)\n  }\n}\n","/**\n * @ignore\n * @type {RegExp}\n */\nconst matrixRegex = /^matrix\\(\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*\\)$/i\n\n/**\n * Parse a string formatted as matrix(a,b,c,d,e,f)\n * @param string {string} String with an affine matrix\n * @returns {Matrix} Affine Matrix\n *\n * @example\n * > fromString('matrix(1,2,3,4,5,6)')\n * {a: 1, b: 2, c: 3, d: 4, c: 5, e: 6}\n */\nexport function fromString (string) {\n  const parsed = string.match(matrixRegex)\n  if (parsed === null || parsed.length < 7) throw new Error(`'${string}' is not a matrix`)\n  return {\n    a: parseFloat(parsed[1]),\n    b: parseFloat(parsed[2]),\n    c: parseFloat(parsed[3]),\n    d: parseFloat(parsed[4]),\n    e: parseFloat(parsed[5]),\n    f: parseFloat(parsed[6])\n  }\n}\n","/**\n * Identity matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function identity () {\n  return {\n    a: 1,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: 1,\n    f: 0\n  }\n}\n","/**\n * Calculate a matrix that is the inverse of the provided matrix\n * @param matrix {Matrix} Affine Matrix\n * @returns {Matrix} Inverted Affine Matrix\n */\nexport function inverse (matrix) {\n  // http://www.wolframalpha.com/input/?i=Inverse+%5B%7B%7Ba,c,e%7D,%7Bb,d,f%7D,%7B0,0,1%7D%7D%5D\n\n  const { a, b, c, d, e, f } = matrix\n\n  const denom = a * d - b * c\n\n  return {\n    a: d / denom,\n    b: b / -denom,\n    c: c / -denom,\n    d: a / denom,\n    e: (d * e - c * f) / -denom,\n    f: (b * e - a * f) / denom\n  }\n}\n","export function isUndefined (val) {\n  return typeof val === 'undefined'\n}\n\nexport function isNumeric (n) {\n  return typeof n === 'number' &&\n    !Number.isNaN(n) &&\n    Number.isFinite(n)\n}\n\nexport function isObject (obj) {\n  return typeof obj === 'object' &&\n    obj !== null &&\n    !Array.isArray(obj)\n}\n\nexport function matchesShape (obj, keys) {\n  return keys.every(key => key in obj)\n}\n","import { isNumeric, isObject } from './utils'\n\n/**\n * Check if the object contain an affine matrix\n * @param object {Object} Generic Plain Object\n * @return {boolean} True if is an object and contains an affine matrix\n */\n\nexport function isAffineMatrix (object) {\n  return isObject(object) &&\n    'a' in object &&\n    isNumeric(object.a) &&\n    'b' in object &&\n    isNumeric(object.b) &&\n    'c' in object &&\n    isNumeric(object.c) &&\n    'd' in object &&\n    isNumeric(object.d) &&\n    'e' in object &&\n    isNumeric(object.e) &&\n    'f' in object &&\n    isNumeric(object.f)\n}\n","/**\n * Calculate a translate matrix\n * @param tx {number} Translation on axis x\n * @param [ty = 0] {number} Translation on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function translate (tx, ty = 0) {\n  return {\n    a: 1,\n    c: 0,\n    e: tx,\n    b: 0,\n    d: 1,\n    f: ty\n  }\n}\n","/**\n * Merge multiple matrices into one\n * @param matrices {Matrix[]} Array of affine matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function transform (...matrices) {\n  matrices = Array.isArray(matrices[0]) ? matrices[0] : matrices\n\n  const multiply = (m1, m2) => {\n    return {\n      a: m1.a * m2.a + m1.c * m2.b,\n      c: m1.a * m2.c + m1.c * m2.d,\n      e: m1.a * m2.e + m1.c * m2.f + m1.e,\n      b: m1.b * m2.a + m1.d * m2.b,\n      d: m1.b * m2.c + m1.d * m2.d,\n      f: m1.b * m2.e + m1.d * m2.f + m1.f\n    }\n  }\n\n  switch (matrices.length) {\n    case 0:\n      throw new Error('no matrices provided')\n\n    case 1:\n      return matrices[0]\n\n    case 2:\n      return multiply(matrices[0], matrices[1])\n\n    default:\n      const [m1, m2, ...rest] = matrices\n      const m = multiply(m1, m2)\n      return transform(m, ...rest)\n  }\n}\n\n/**\n * Merge multiple matrices into one\n * @param matrices {Matrix[]} Array of matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function compose (...matrices) {\n  return transform(...matrices)\n}\n","import { isUndefined } from './utils'\nimport { translate } from './translate'\nimport { transform } from './transform'\n\nconst { cos, sin, PI } = Math\n/**\n * Calculate a rotation matrix\n * @param angle {number} Angle in radians\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotate (angle, cx, cy) {\n  const cosAngle = cos(angle)\n  const sinAngle = sin(angle)\n  const rotationMatrix = {\n    a: cosAngle,\n    c: -sinAngle,\n    e: 0,\n    b: sinAngle,\n    d: cosAngle,\n    f: 0\n  }\n  if (isUndefined(cx) || isUndefined(cy)) {\n    return rotationMatrix\n  }\n\n  return transform([\n    translate(cx, cy),\n    rotationMatrix,\n    translate(-cx, -cy)\n  ])\n}\n\n/**\n * Calculate a rotation matrix with a DEG angle\n * @param angle {number} Angle in degree\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotateDEG (angle, cx = undefined, cy = undefined) {\n  return rotate(angle * PI / 180, cx, cy)\n}\n","import { isUndefined } from './utils'\n\n/**\n * Calculate a scaling matrix\n * @param sx {number} Scaling on axis x\n * @param [sy = sx] {number} Scaling on axis y (default sx)\n * @returns {Matrix} Affine Matrix\n */\nexport function scale (sx, sy = undefined) {\n  if (isUndefined(sy)) sy = sx\n  return {\n    a: sx,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: sy,\n    f: 0\n  }\n}\n","/**\n * Calculate a shear matrix\n * @param shx {number} Shear on axis x\n * @param shy {number} Shear on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function shear (shx, shy) {\n  return {\n    a: 1,\n    c: shx,\n    e: 0,\n    b: shy,\n    d: 1,\n    f: 0\n  }\n}\n","// https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/skew\nconst { tan } = Math\n\n/**\n * Calculate a skew matrix\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skew (ax, ay) {\n  return {\n    a: 1,\n    c: tan(ax),\n    e: 0,\n    b: tan(ay),\n    d: 1,\n    f: 0\n  }\n}\n\n/**\n * Calculate a skew matrix using DEG angles\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skewDEG (ax, ay) {\n  return skew(ax * Math.PI / 180, ay * Math.PI / 180)\n}\n","/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toCSS (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toSVG (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toString (matrix) {\n  return `matrix(${matrix.a},${matrix.b},${matrix.c},${matrix.d},${matrix.e},${matrix.f})`\n}\n","/**\n * Rounds all elements of the given matrix using the given precision\n * @param matrix {Matrix} An affine matrix to round\n * @param [precision] {number} A precision to use for Math.round. Defaults to 10000000000 (meaning which rounds to the 10th digit after the comma).\n * @returns {Matrix} The rounded Affine Matrix\n */\nexport function smoothMatrix (matrix, precision = 10000000000) {\n  return {\n    a: Math.round(matrix.a * precision) / precision,\n    b: Math.round(matrix.b * precision) / precision,\n    c: Math.round(matrix.c * precision) / precision,\n    d: Math.round(matrix.d * precision) / precision,\n    e: Math.round(matrix.e * precision) / precision,\n    f: Math.round(matrix.f * precision) / precision\n  }\n}\n","import { inverse } from './inverse'\nimport { transform } from './transform'\nimport { smoothMatrix } from './smoothMatrix'\n\n/**\n * Returns a matrix that transforms a triangle t1 into another triangle t2, or throws an exception if it is impossible.\n * @param t1 {Point[]} Array of points containing the three points for the first triangle\n * @param t2 {Point[]} Array of points containing the three points for the second triangle\n * @returns {Matrix} Matrix which transforms t1 to t2\n * @throws Exception if the matrix becomes not invertible\n */\nexport function fromTriangles (t1, t2) {\n  // point p = first point of the triangle\n  const px1 = t1[0].x != null ? t1[0].x : t1[0][0]\n  const py1 = t1[0].y != null ? t1[0].y : t1[0][1]\n  const px2 = t2[0].x != null ? t2[0].x : t2[0][0]\n  const py2 = t2[0].y != null ? t2[0].y : t2[0][1]\n\n  // point q = second point of the triangle\n  const qx1 = t1[1].x != null ? t1[1].x : t1[1][0]\n  const qy1 = t1[1].y != null ? t1[1].y : t1[1][1]\n  const qx2 = t2[1].x != null ? t2[1].x : t2[1][0]\n  const qy2 = t2[1].y != null ? t2[1].y : t2[1][1]\n\n  // point r = third point of the triangle\n  const rx1 = t1[2].x != null ? t1[2].x : t1[2][0]\n  const ry1 = t1[2].y != null ? t1[2].y : t1[2][1]\n  const rx2 = t2[2].x != null ? t2[2].x : t2[2][0]\n  const ry2 = t2[2].y != null ? t2[2].y : t2[2][1]\n\n  const r1 = {\n    a: px1 - rx1,\n    b: py1 - ry1,\n    c: qx1 - rx1,\n    d: qy1 - ry1,\n    e: rx1,\n    f: ry1\n  }\n  const r2 = {\n    a: px2 - rx2,\n    b: py2 - ry2,\n    c: qx2 - rx2,\n    d: qy2 - ry2,\n    e: rx2,\n    f: ry2\n  }\n\n  const inverseR1 = inverse(r1)\n  const affineMatrix = transform([r2, inverseR1])\n\n  // round the matrix elements to smooth the finite inversion\n  return smoothMatrix(affineMatrix)\n}\n","import { fromObject } from './fromObject'\nimport { translate } from './translate'\nimport { scale } from './scale'\nimport { rotateDEG } from './rotate'\nimport { skewDEG } from './skew'\nimport { shear } from './shear'\n\n/**\n * Converts array of matrix descriptor to array of matrix\n * @param definitionOrArrayOfDefinition {Object[]} Array of object describing the matrix\n * @returns {Matrix[]} Array of matrix\n *\n * @example\n * > fromDefinition([\n *  { type: 'matrix', a:1, b:2, c:3, d:4, e:5, f:6 },\n *  { type: 'translate', tx: 10, ty: 20 },\n *  { type: 'scale', sx: 2, sy: 4 },\n *  { type: 'rotate', angle: 90, sx: 50, sy: 25 },\n *  { type: 'skewX', angle: 45 },\n *  { type: 'skewY',  angle: 45 },\n *  { type: 'shear', shx: 10, shy: 20}\n * ])\n *\n * [\n *  { a: 1, b: 2, c: 3, d: 4, e: 5, f: 6 },\n *  { a: 1, c: 0, e: 10, b: 0, d: 1, f: 20 },\n *  { a: 2, c: 0, e: 0, b: 0, d: 4, f: 0 },\n *  { a: 6.123, c: -1, e: 0, b: 1, d: 6.123, f: 0 },\n *  { a: 1, c: 0.99.., e: 0, b: 0, d: 1, f: 0 },\n *  { a: 1, c: 0, e: 0, b: 0.99, d: 1, f: 0 },\n *  { a: 1, c: 10, e: 0, b: 20, d: 1, f: 0 }\n * ]\n **/\nexport function fromDefinition (definitionOrArrayOfDefinition) {\n  return Array.isArray(definitionOrArrayOfDefinition)\n    ? definitionOrArrayOfDefinition.map(mapper)\n    : mapper(definitionOrArrayOfDefinition)\n\n  function mapper (descriptor) {\n    switch (descriptor.type) {\n      case 'matrix':\n        if ('a' in descriptor &&\n          'b' in descriptor &&\n          'c' in descriptor &&\n          'd' in descriptor &&\n          'e' in descriptor &&\n          'f' in descriptor\n        ) {\n          return fromObject(descriptor)\n        } else {\n          throw new Error('MISSING_MANDATORY_PARAM')\n        }\n\n      case 'translate':\n        if (!('tx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('ty' in descriptor) return translate(descriptor.tx, descriptor.ty)\n\n        return translate(descriptor.tx)\n\n      case 'scale':\n        if (!('sx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('sy' in descriptor) return scale(descriptor.sx, descriptor.sy)\n\n        return scale(descriptor.sx)\n\n      case 'rotate':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('cx' in descriptor && 'cy' in descriptor) {\n          return rotateDEG(descriptor.angle, descriptor.cx, descriptor.cy)\n        }\n        return rotateDEG(descriptor.angle)\n\n      case 'skewX':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(descriptor.angle, 0)\n\n      case 'skewY':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(0, descriptor.angle)\n\n      case 'shear':\n        if (!('shx' in descriptor && 'shy' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return shear(descriptor.shx, descriptor.shy)\n\n      default:\n        throw new Error('UNSUPPORTED_DESCRIPTOR')\n    }\n  }\n}\n","// Generated by PEG.js v0.11.0-master.30f3260, https://pegjs.org/\n\nfunction peg$subclass(child, parent) {\n  function C() { this.constructor = child; }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message = message;\n  this.expected = expected;\n  this.found = found;\n  this.location = location;\n  this.name = \"SyntaxError\";\n\n  // istanbul ignore next\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function(expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n\n    class: function(expectation) {\n      var escapedParts = expectation.parts.map(function(part) {\n        return Array.isArray(part)\n          ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n          : classEscape(part);\n      });\n\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n    },\n\n    any: function() {\n      return \"any character\";\n    },\n\n    end: function() {\n      return \"end of input\";\n    },\n\n    other: function(expectation) {\n      return expectation.description;\n    },\n\n    not: function(expectation) {\n      return \"not \" + describeExpectation(expectation.expected);\n    }\n  };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\"/g,  \"\\\\\\\"\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\]/g, \"\\\\]\")\n      .replace(/\\^/g, \"\\\\^\")\n      .replace(/-/g,  \"\\\\-\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n\n  var peg$FAILED = {};\n\n  var peg$startRuleFunctions = { transformList: peg$parsetransformList };\n  var peg$startRuleFunction = peg$parsetransformList;\n\n  var peg$c0 = \"matrix\";\n  var peg$c1 = \"(\";\n  var peg$c2 = \")\";\n  var peg$c3 = \"translate\";\n  var peg$c4 = \"scale\";\n  var peg$c5 = \"rotate\";\n  var peg$c6 = \"skewX\";\n  var peg$c7 = \"skewY\";\n  var peg$c8 = \",\";\n  var peg$c9 = \".\";\n\n  var peg$r0 = /^[eE]/;\n  var peg$r1 = /^[+\\-]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[ \\t\\r\\n]/;\n\n  var peg$e0 = peg$literalExpectation(\"matrix\", false);\n  var peg$e1 = peg$literalExpectation(\"(\", false);\n  var peg$e2 = peg$literalExpectation(\")\", false);\n  var peg$e3 = peg$literalExpectation(\"translate\", false);\n  var peg$e4 = peg$literalExpectation(\"scale\", false);\n  var peg$e5 = peg$literalExpectation(\"rotate\", false);\n  var peg$e6 = peg$literalExpectation(\"skewX\", false);\n  var peg$e7 = peg$literalExpectation(\"skewY\", false);\n  var peg$e8 = peg$literalExpectation(\",\", false);\n  var peg$e9 = peg$otherExpectation(\"fractionalConstant\");\n  var peg$e10 = peg$classExpectation([\"e\", \"E\"], false, false);\n  var peg$e11 = peg$classExpectation([\"+\", \"-\"], false, false);\n  var peg$e12 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e13 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false);\n\n  var peg$f0 = function(ts) { return ts; };\n  var peg$f1 = function(t, ts) { return t.concat(ts) };\n  var peg$f2 = function(a, b, c, d, e, f) {\n        return [{type: 'matrix', a: a, b: b, c: c, d: d, e: e, f: f}];\n      };\n  var peg$f3 = function(tx, ty) {\n        var t = {type: 'translate', tx: tx};\n        if (ty) t.ty = ty;\n        return [t];\n      };\n  var peg$f4 = function(sx, sy) {\n        var s = {type:'scale', sx: sx};\n        if (sy) s.sy = sy;\n        return [s];\n      };\n  var peg$f5 = function(angle, c) {\n        var r = {type:'rotate', angle: angle};\n        if (c) {\n          r.cx = c[0];\n          r.cy = c[1];\n        }\n        return [r];\n      };\n  var peg$f6 = function(angle) {\n        return [{type: 'skewX', angle: angle}];\n      };\n  var peg$f7 = function(angle) {\n        return [{type: 'skewY', angle: angle}];\n      };\n  var peg$f8 = function(f) { return parseFloat(f.join(\"\")); };\n  var peg$f9 = function(i) { return parseInt(i.join(\"\")); };\n  var peg$f10 = function(n) { return n; };\n  var peg$f11 = function(n1, n2) { return [n1, n2]; };\n  var peg$f12 = function(ds) { return ds.join(\"\"); };\n  var peg$f13 = function(d1, d2) { return [d1 ? d1.join(\"\") : null, \".\", d2.join(\"\")].join(\"\"); };\n  var peg$f14 = function(d) { return d.join(\"\"); };\n\n  var peg$currPos = 0;\n  var peg$savedPos = 0;\n  var peg$posDetailsCache = [{ line: 1, column: 1 }];\n  var peg$expected = [];\n  var peg$silentFails = 0;\n\n  var peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function offset() {\n    return peg$savedPos;\n  }\n\n  function range() {\n    return [peg$savedPos, peg$currPos];\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  var peg$VALIDFILENAME = typeof options.filename === \"string\" && options.filename.length > 0;\n  function peg$computeLocation(startPos, endPos) {\n    var loc = {};\n\n    if ( peg$VALIDFILENAME ) loc.filename = options.filename;\n\n    var startPosDetails = peg$computePosDetails(startPos);\n    loc.start = {\n      offset: startPos,\n      line: startPosDetails.line,\n      column: startPosDetails.column\n    };\n\n    var endPosDetails = peg$computePosDetails(endPos);\n    loc.end = {\n      offset: endPos,\n      line: endPosDetails.line,\n      column: endPosDetails.column\n    };\n\n    return loc;\n  }\n\n  function peg$begin() {\n    peg$expected.push({ pos: peg$currPos, variants: [] });\n  }\n\n  function peg$expect(expected) {\n    var top = peg$expected[peg$expected.length - 1];\n\n    if (peg$currPos < top.pos) { return; }\n\n    if (peg$currPos > top.pos) {\n      top.pos = peg$currPos;\n      top.variants = [];\n    }\n\n    top.variants.push(expected);\n  }\n\n  function peg$end(invert) {\n    var expected = peg$expected.pop();\n    var top = peg$expected[peg$expected.length - 1];\n    var variants = expected.variants;\n\n    if (top.pos !== expected.pos) { return; }\n\n    if (invert) {\n      variants = variants.map(function(e) {\n        return e.type === \"not\" ? e.expected : { type: \"not\", expected: e };\n      });\n    }\n\n    Array.prototype.push.apply(top.variants, variants);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$buildError() {\n    var expected = peg$expected[0];\n    var failPos = expected.pos;\n\n    return peg$buildStructuredError(\n      expected.variants,\n      failPos < input.length ? input.charAt(failPos) : null,\n      failPos < input.length\n        ? peg$computeLocation(failPos, failPos + 1)\n        : peg$computeLocation(failPos, failPos)\n    );\n  }\n\n  function peg$parsetransformList() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    s2 = peg$parsetransforms();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = [];\n    s4 = peg$parsewsp();\n    while (s4 !== peg$FAILED) {\n      s3.push(s4);\n      s4 = peg$parsewsp();\n    }\n    peg$savedPos = s0;\n    s0 = peg$f0(s2);\n\n    return s0;\n  }\n\n  function peg$parsetransforms() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsetransform();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsecommaWsp();\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsecommaWsp();\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsetransforms();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f1(s1, s3);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetransform();\n    }\n\n    return s0;\n  }\n\n  function peg$parsetransform() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$parsematrix();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetranslate();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsescale();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parserotate();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseskewX();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parseskewY();\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsematrix() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16, s17;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e0);\n    if (input.substr(peg$currPos, 6) === peg$c0) {\n      s1 = peg$c0;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWsp();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenumber();\n            if (s7 !== peg$FAILED) {\n              s8 = peg$parsecommaWsp();\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parsenumber();\n                if (s9 !== peg$FAILED) {\n                  s10 = peg$parsecommaWsp();\n                  if (s10 !== peg$FAILED) {\n                    s11 = peg$parsenumber();\n                    if (s11 !== peg$FAILED) {\n                      s12 = peg$parsecommaWsp();\n                      if (s12 !== peg$FAILED) {\n                        s13 = peg$parsenumber();\n                        if (s13 !== peg$FAILED) {\n                          s14 = peg$parsecommaWsp();\n                          if (s14 !== peg$FAILED) {\n                            s15 = peg$parsenumber();\n                            if (s15 !== peg$FAILED) {\n                              s16 = [];\n                              s17 = peg$parsewsp();\n                              while (s17 !== peg$FAILED) {\n                                s16.push(s17);\n                                s17 = peg$parsewsp();\n                              }\n                              rule$expects(peg$e2);\n                              if (input.charCodeAt(peg$currPos) === 41) {\n                                s17 = peg$c2;\n                                peg$currPos++;\n                              } else {\n                                s17 = peg$FAILED;\n                              }\n                              if (s17 !== peg$FAILED) {\n                                peg$savedPos = s0;\n                                s0 = peg$f2(s5, s7, s9, s11, s13, s15);\n                              } else {\n                                peg$currPos = s0;\n                                s0 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s0;\n                              s0 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetranslate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e3);\n    if (input.substr(peg$currPos, 9) === peg$c3) {\n      s1 = peg$c3;\n      peg$currPos += 9;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f3(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsescale() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e4);\n    if (input.substr(peg$currPos, 5) === peg$c4) {\n      s1 = peg$c4;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f4(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parserotate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e5);\n    if (input.substr(peg$currPos, 6) === peg$c5) {\n      s1 = peg$c5;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspTwoNumbers();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f5(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewX() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e6);\n    if (input.substr(peg$currPos, 5) === peg$c6) {\n      s1 = peg$c6;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f6(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewY() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e7);\n    if (input.substr(peg$currPos, 5) === peg$c7) {\n      s1 = peg$c7;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f7(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = peg$parsefloatingPointConstant();\n    if (s3 !== peg$FAILED) {\n      s2 = [s2, s3];\n      s1 = s2;\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f8(s1);\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parseintegerConstant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$f9(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspNumber() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f10(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspTwoNumbers() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecommaWsp();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenumber();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f11(s2, s4);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWsp() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = [];\n      s4 = peg$parsewsp();\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = peg$parsewsp();\n      }\n      s1 = [s1, s2, s3];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsecomma();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsewsp();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsewsp();\n        }\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e8);\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c8;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseintegerConstant() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f12(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefloatingPointConstant() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsefractionalConstant();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseexponent();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s1 = [s1, s2];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseexponent();\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefractionalConstant() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e9);\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c9;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f13(s1, s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s2 = peg$c9;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f14(s1);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e10);\n    if (peg$r0.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        s1 = [s1, s2, s3];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e11);\n    if (peg$r1.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigitSequence() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = [];\n    s1 = peg$parsedigit();\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parsedigit();\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e12);\n    if (peg$r2.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e13);\n    if (peg$r3.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  peg$begin();\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$expect(peg$endExpectation());\n    }\n\n    throw peg$buildError();\n  }\n}\n\nexport {\n  peg$SyntaxError as SyntaxError,\n  peg$parse as parse\n};\n\nexport default {\n  SyntaxError: peg$SyntaxError,\n  parse: peg$parse\n};\n","import { parse } from './fromTransformAttribute.autogenerated'\n\n/**\n * Parser for SVG Trasform Attribute http://www.w3.org/TR/SVG/coords.html#TransformAttribute <br/>\n * Warning: This should be considered BETA until it is released a stable version of pegjs.\n * @param transformString {string} Transform string as defined by w3 Consortium\n * @returns {Matrix[]} Array of MatrixDescriptor\n *\n * @example\n * > fromTransformAttribute('translate(-10,-10) scale(2,2) translate(10,10)')\n * [\n *  { type: 'translate', tx: -10, ty: -10},\n *  { type: 'scale', sx: 2, sy: 2 },\n *  { type: 'translate', tx: 10, ty: 10}\n * ]\n *\n * > compose(fromDefinition(fromTransformAttribute('translate(-10, -10) scale(10, 10)')))\n * { a: 10, c: 0, e: -10, b: 0, d: 10, f: -10 }\n */\nexport function fromTransformAttribute (transformString) {\n  return parse(transformString)\n}\n","export * from './applyToPoint'\nexport * from './fromObject'\nexport * from './fromString'\nexport * from './identity'\nexport * from './inverse'\nexport * from './isAffineMatrix'\nexport * from './rotate'\nexport * from './scale'\nexport * from './shear'\nexport * from './skew'\nexport * from './toString'\nexport * from './transform'\nexport * from './translate'\nexport * from './fromTriangles'\nexport * from './smoothMatrix'\nexport * from './fromDefinition'\nexport * from './fromTransformAttribute'\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\r\n\r\nimport {\r\n  ACTION_ZOOM, MODE_IDLE, MODE_ZOOMING,\r\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM\r\n} from '../constants';\r\nimport {set, getSVGPoint} from './common';\r\nimport calculateBox from '../utils/calculateBox';\r\n\r\nfunction lessThanScaleFactorMin (value, scaleFactor) {\r\n  return value.scaleFactorMin && (value.d * (scaleFactor)) <= value.scaleFactorMin;\r\n}\r\n\r\nfunction moreThanScaleFactorMax (value, scaleFactor) {\r\n  return value.scaleFactorMax && (value.d * scaleFactor) >= value.scaleFactorMax;\r\n}\r\n\r\nexport function isZoomLevelGoingOutOfBounds(value, scaleFactor) {\r\n  return lessThanScaleFactorMin(value, scaleFactor) && scaleFactor < 1 || moreThanScaleFactorMax(value, scaleFactor) && scaleFactor > 1;\r\n}\r\n\r\nexport function limitZoomLevel(value, matrix) {\r\n  let scaleLevel = matrix.a;\r\n\r\n  if(value.scaleFactorMin != null) {\r\n    // limit minimum zoom\r\n    scaleLevel = Math.max(scaleLevel, value.scaleFactorMin);\r\n  }\r\n\r\n  if(value.scaleFactorMax != null) {\r\n    // limit maximum zoom\r\n    scaleLevel = Math.min(scaleLevel, value.scaleFactorMax);\r\n  }\r\n\r\n  return set(matrix, {\r\n    a: scaleLevel,\r\n    d: scaleLevel\r\n  });\r\n}\r\n\r\nexport function zoom(value, SVGPointX, SVGPointY, scaleFactor) {\r\n  if (isZoomLevelGoingOutOfBounds(value, scaleFactor)) {\r\n      // Do not change translation and scale of value\r\n      return value;\r\n  }\r\n\r\n  const matrix = transform(\r\n    fromObject(value),\r\n    translate(SVGPointX, SVGPointY),\r\n    scale(scaleFactor, scaleFactor),\r\n    translate(-SVGPointX, -SVGPointY)\r\n  );\r\n\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...limitZoomLevel(value, matrix),\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null\r\n  }, ACTION_ZOOM);\r\n}\r\n\r\nexport function fitSelection(value, selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\r\n  let {viewerWidth, viewerHeight} = value;\r\n\r\n  let scaleX = viewerWidth / selectionWidth;\r\n  let scaleY = viewerHeight / selectionHeight;\r\n\r\n  let scaleLevel = Math.min(scaleX, scaleY);\r\n\r\n  const matrix = transform(\r\n    scale(scaleLevel, scaleLevel),                      //2\r\n    translate(-selectionSVGPointX, -selectionSVGPointY) //1\r\n  );\r\n\r\n  if(isZoomLevelGoingOutOfBounds(value, scaleLevel / value.d)) {\r\n    // Do not allow scale and translation\r\n    return set(value, {\r\n      mode: MODE_IDLE,\r\n      startX: null,\r\n      startY: null,\r\n      endX: null,\r\n      endY: null\r\n    });\r\n  }\r\n\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...limitZoomLevel(value, matrix),\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null\r\n  }, ACTION_ZOOM);\r\n}\r\n\r\nexport function fitToViewer(value, SVGAlignX=ALIGN_LEFT, SVGAlignY=ALIGN_TOP) {\r\n  let {viewerWidth, viewerHeight, SVGWidth, SVGHeight, SVGViewBoxX, SVGViewBoxY} = value;\r\n\r\n  let scaleX = viewerWidth / SVGWidth;\r\n  let scaleY = viewerHeight / SVGHeight;\r\n  let scaleLevel = Math.min(scaleX, scaleY);\r\n\r\n  const scaleMatrix = scale(scaleLevel, scaleLevel);\r\n  let translationMatrix = translate(-SVGViewBoxX * scaleX, -SVGViewBoxY * scaleY);\r\n\r\n  // after fitting, SVG and the viewer will match in width (1) or in height (2)\r\n  if (scaleX < scaleY) {\r\n    //(1) match in width, meaning scaled SVGHeight <= viewerHeight\r\n    let remainderY = viewerHeight - scaleX * SVGHeight;\r\n\r\n    if (SVGAlignY === ALIGN_CENTER)\r\n      translationMatrix = translate(-SVGViewBoxX * scaleX, (Math.round(remainderY / 2) - SVGViewBoxY) * scaleY);\r\n    if (SVGAlignY === ALIGN_BOTTOM)\r\n      translationMatrix = translate(-SVGViewBoxX * scaleX, (remainderY - SVGViewBoxY) * scaleY);\r\n  }\r\n  else {\r\n    //(2) match in height, meaning scaled SVGWidth <= viewerWidth\r\n    let remainderX = viewerWidth - scaleY * SVGWidth;\r\n\r\n    if (SVGAlignX === ALIGN_CENTER)\r\n      translationMatrix = translate((Math.round(remainderX / 2) - SVGViewBoxX) * scaleX, -SVGViewBoxY * scaleY);\r\n    if (SVGAlignX === ALIGN_RIGHT)\r\n      translationMatrix = translate((remainderX - SVGViewBoxX) * scaleX, -SVGViewBoxY * scaleY);\r\n  }\r\n  const matrix = transform(\r\n    translationMatrix, //2\r\n    scaleMatrix        //1\r\n  );\r\n\r\n  if (isZoomLevelGoingOutOfBounds(value, scaleLevel / value.d)) {\r\n    // Do not allow scale and translation\r\n    return set(value, {\r\n      mode: MODE_IDLE,\r\n      startX: null,\r\n      startY: null,\r\n      endX: null,\r\n      endY: null\r\n    });\r\n  }\r\n\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...limitZoomLevel(value, matrix),\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null\r\n  }, ACTION_ZOOM);\r\n}\r\n\r\nexport function zoomOnViewerCenter(value, scaleFactor) {\r\n  let {viewerWidth, viewerHeight} = value;\r\n  let SVGPoint = getSVGPoint(value, viewerWidth / 2, viewerHeight / 2);\r\n  return zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor);\r\n}\r\n\r\nexport function startZooming(value, viewerX, viewerY) {\r\n  return set(value, {\r\n    mode: MODE_ZOOMING,\r\n    startX: viewerX,\r\n    startY: viewerY,\r\n    endX: viewerX,\r\n    endY: viewerY\r\n  });\r\n}\r\n\r\nexport function updateZooming(value, viewerX, viewerY) {\r\n  if (value.mode !== MODE_ZOOMING) throw new Error('update selection not allowed in this mode ' + value.mode);\r\n\r\n  return set(value, {\r\n    endX: viewerX,\r\n    endY: viewerY\r\n  });\r\n}\r\n\r\nexport function stopZooming(value, viewerX, viewerY, scaleFactor, props) {\r\n  let {startX, startY, endX, endY} = value;\r\n\r\n  let start = getSVGPoint(value, startX, startY);\r\n  let end = getSVGPoint(value, endX, endY);\r\n\r\n  if (Math.abs(startX - endX) > 7 && Math.abs(startY - endY) > 7) {\r\n    let box = calculateBox(start, end);\r\n    return fitSelection(value, box.x, box.y, box.width, box.height);\r\n  } else {\r\n    let SVGPoint = getSVGPoint(value, viewerX, viewerY);\r\n    return zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\r\n  }\r\n}\r\n","import {ACTION_PAN, MODE_IDLE, MODE_PANNING} from '../constants';\r\nimport {set, getSVGPoint} from './common';\r\nimport {fromObject, translate, transform, applyToPoints, inverse} from 'transformation-matrix';\r\n\r\n/**\r\n *\r\n * @param value\r\n * @param SVGDeltaX\r\n * @param SVGDeltaY\r\n * @param panLimit\r\n * @returns {Object}\r\n */\r\nexport function pan(value, SVGDeltaX, SVGDeltaY, panLimit = undefined) {\r\n\r\n  let matrix = transform(\r\n    fromObject(value),              //2\r\n    translate(SVGDeltaX, SVGDeltaY) //1\r\n  );\r\n\r\n  // apply pan limits\r\n  if (panLimit) {\r\n    let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(matrix, [\r\n      {x: value.SVGViewBoxX + panLimit, y:  value.SVGViewBoxY + panLimit},\r\n      {x: value.SVGViewBoxX + value.SVGWidth - panLimit, y: value.SVGViewBoxY + value.SVGHeight - panLimit}\r\n    ]);\r\n\r\n    //x limit\r\n    let moveX = 0;\r\n    if (value.viewerWidth - x1 < 0)\r\n      moveX = value.viewerWidth - x1;\r\n    else if (x2 < 0) moveX = -x2;\r\n\r\n\r\n    //y limit\r\n    let moveY = 0;\r\n    if (value.viewerHeight - y1 < 0)\r\n      moveY = value.viewerHeight - y1;\r\n    else if (y2 < 0) moveY = -y2;\r\n\r\n    //apply limits\r\n    matrix = transform(\r\n      translate(moveX, moveY),\r\n      matrix\r\n    )\r\n  }\r\n\r\n  return set(value, {\r\n    mode: MODE_IDLE,\r\n    ...matrix,\r\n  }, ACTION_PAN);\r\n}\r\n\r\nexport function startPanning(value, viewerX, viewerY) {\r\n  return set(value, {\r\n    mode: MODE_PANNING,\r\n    startX: viewerX,\r\n    startY: viewerY,\r\n    endX: viewerX,\r\n    endY: viewerY\r\n  }, ACTION_PAN);\r\n}\r\n\r\nexport function updatePanning(value, viewerX, viewerY, panLimit) {\r\n  if (value.mode !== MODE_PANNING) throw new Error('update pan not allowed in this mode ' + value.mode);\r\n\r\n  let {endX, endY} = value;\r\n\r\n  let start = getSVGPoint(value, endX, endY);\r\n  let end = getSVGPoint(value, viewerX, viewerY);\r\n\r\n  let deltaX = end.x - start.x;\r\n  let deltaY = end.y - start.y;\r\n\r\n  let nextValue = pan(value, deltaX, deltaY, panLimit);\r\n  return set(nextValue, {\r\n    mode: MODE_PANNING,\r\n    endX: viewerX,\r\n    endY: viewerY,\r\n  }, ACTION_PAN);\r\n}\r\n\r\nexport function stopPanning(value) {\r\n  return set(value, {\r\n      mode: MODE_IDLE,\r\n      startX: null,\r\n      startY: null,\r\n      endX: null,\r\n      endY: null\r\n    }, ACTION_PAN\r\n  );\r\n}\r\n\r\nexport function autoPanIfNeeded(value, viewerX, viewerY) {\r\n  let deltaX = 0;\r\n  let deltaY = 0;\r\n\r\n  if (viewerY <= 20) deltaY = 2;\r\n  if (value.viewerWidth - viewerX <= 20) deltaX = -2;\r\n  if (value.viewerHeight - viewerY <= 20) deltaY = -2;\r\n  if (viewerX <= 20) deltaX = 2;\r\n\r\n  deltaX = deltaX / value.d;\r\n  deltaY = deltaY / value.d;\r\n\r\n  return (deltaX === 0 && deltaY === 0) ? value : pan(value, deltaX, deltaY);\r\n}\r\n","import {set} from './common';\r\n\r\n\r\nexport function openMiniature(value) {\r\n  return set(value, {\r\n    miniatureOpen: true\r\n  });\r\n}\r\n\r\nexport function closeMiniature(value) {\r\n  return set(value, {\r\n    miniatureOpen: false\r\n  });\r\n}\r\n\r\n","import {isNullOrUndefined} from \"./utils/is\";\r\n\r\nconst github_base = 'https://github.com/chrvadala/react-svg-pan-zoom/blob/master'\r\n\r\nconst doc_v1_to_v2 = github_base + '/docs/migrate-from-v1-to-v2.md'\r\nconst doc_v2_to_v3 = github_base + '/docs/migrate-from-v2-to-v3.md'\r\n\r\nexport function tipNoViewer() {\r\n  console.error(`HEY! You are trying to use an older version of ReactSVGPanZoom. Please read here ${doc_v1_to_v2}`)\r\n}\r\n\r\nexport function tipControlledComponent() {\r\n  console.error(`HEY! With ReactSVGPanZoom >= 3 you MUST specify value and tool props. Please read here ${doc_v2_to_v3}`)\r\n}\r\n\r\nexport function tipDeprecatedMiniatureProps(){\r\n  console.error(`HEY! With ReactSVGPanZoom >= 3 the props miniaturePosition, miniatureBackground, miniatureWidth, miniatureHeight can be specified as key in the miniatureProps object. Please read here ${doc_v2_to_v3}`)\r\n}\r\n\r\nexport function tipDeprecateToolbarProps(){\r\n  console.error(`HEY! With ReactSVGPanZoom >= 3 the prop toolbarPosition can be specified as key in the toolbarProps object. Please read here ${doc_v2_to_v3}`)\r\n}\r\n\r\nexport function printMigrationTipsRelatedToProps(props){\r\n  if (\r\n    isNullOrUndefined(props.tool) ||\r\n    isNullOrUndefined(props.value)\r\n  ) tipControlledComponent()\r\n\r\n  if (\r\n    !isNullOrUndefined(props.miniaturePosition) ||\r\n    !isNullOrUndefined(props.miniatureBackground) ||\r\n    !isNullOrUndefined(props.miniatureWidth) ||\r\n    !isNullOrUndefined(props.miniatureHeight)\r\n  ) tipDeprecatedMiniatureProps()\r\n\r\n\r\n  if (\r\n    !isNullOrUndefined(props.toolbarPosition)\r\n  ) tipDeprecateToolbarProps()\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {toSVG} from 'transformation-matrix';\r\n//events\r\nimport eventFactory from './events/event-factory';\r\n//features\r\nimport {pan} from './features/pan';\r\nimport {\r\n  getDefaultValue,\r\n  isValueValid,\r\n  reset,\r\n  setPointOnViewerCenter,\r\n  setSVGViewBox,\r\n  setViewerSize,\r\n  setZoomLevels\r\n} from './features/common';\r\nimport {\r\n  onDoubleClick,\r\n  onInterval,\r\n  onMouseDown,\r\n  onMouseEnterOrLeave,\r\n  onMouseMove,\r\n  onMouseUp,\r\n  onWheel\r\n} from './features/interactions';\r\nimport {onTouchCancel, onTouchEnd, onTouchMove, onTouchStart} from './features/interactions-touch';\r\n\r\nimport {fitSelection, fitToViewer, zoom, zoomOnViewerCenter} from './features/zoom';\r\nimport {closeMiniature, openMiniature} from './features/miniature';\r\n//ui\r\nimport cursorPolyfill from './ui/cursor-polyfill';\r\nimport BorderGradient from './ui/border-gradient';\r\nimport Selection from './ui/selection';\r\nimport Toolbar from './ui-toolbar/toolbar';\r\nimport detectTouch from './ui/detect-touch';\r\nimport Miniature from './ui-miniature/miniature'\r\n\r\nimport {\r\n  ACTION_PAN,\r\n  ACTION_ZOOM,\r\n  ALIGN_BOTTOM,\r\n  ALIGN_CENTER,\r\n  ALIGN_LEFT,\r\n  ALIGN_RIGHT,\r\n  ALIGN_TOP,\r\n  MODE_IDLE,\r\n  MODE_PANNING,\r\n  MODE_ZOOMING,\r\n  POSITION_BOTTOM,\r\n  POSITION_LEFT,\r\n  POSITION_NONE,\r\n  POSITION_RIGHT,\r\n  POSITION_TOP,\r\n  TOOL_AUTO,\r\n  TOOL_NONE,\r\n  TOOL_PAN,\r\n  TOOL_ZOOM_IN,\r\n  TOOL_ZOOM_OUT\r\n} from './constants';\r\nimport {printMigrationTipsRelatedToProps} from \"./migration-tips\";\r\n\r\nexport default class ReactSVGPanZoom extends React.Component {\r\n\r\n  constructor(props, context) {\r\n    const {value, width: viewerWidth, height: viewerHeight, scaleFactorMin, scaleFactorMax, children} = props;\r\n    let {width: SVGWidth, height: SVGHeight, viewBox: SVGViewBox} = children.props;\r\n    let SVGViewBoxX, SVGViewBoxY;\r\n    if (SVGViewBox) {\r\n      [SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight] = SVGViewBox.split(' ').map(parseFloat);\r\n    }\r\n    super(props, context);\r\n    this.ViewerDOM = null;\r\n    this.state = {\r\n      pointerX: null,\r\n      pointerY: null,\r\n      defaultValue: getDefaultValue(viewerWidth, viewerHeight, SVGViewBoxX || 0, SVGViewBoxY || 0, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax)\r\n    }\r\n    this.autoPanLoop = this.autoPanLoop.bind(this);\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      printMigrationTipsRelatedToProps(props)\r\n    }\r\n  }\r\n\r\n  /** React hooks **/\r\n  componentDidUpdate(prevProps) {\r\n    const value = this.getValue();\r\n    const props = this.props;\r\n\r\n    let nextValue = value;\r\n    let needUpdate = false;\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      printMigrationTipsRelatedToProps(props)\r\n    }\r\n\r\n    if (\r\n      prevProps.width !== props.width ||\r\n      prevProps.height !== props.height\r\n    ) {\r\n      nextValue = setViewerSize(nextValue, props.width, props.height);\r\n      needUpdate = true;\r\n    }\r\n\r\n    let {width: SVGWidth, height: SVGHeight, viewBox: SVGViewBox} = props.children.props;\r\n    let {width: prevSVGWidth, height: prevSVGHeight, viewBox: prevSVGViewBox} = prevProps.children.props;\r\n\r\n    if (SVGViewBox) {\r\n      let [x0, y0, width, height] = SVGViewBox.split(' ').map(parseFloat);\r\n      if(\r\n        value.SVGViewBoxX !== x0 ||\r\n        value.SVGViewBoxY !== y0 ||\r\n        value.SVGWidth !== width ||\r\n        value.SVGHeight !== height) {\r\n        nextValue = setSVGViewBox(nextValue, x0, y0, width, height);\r\n        needUpdate = true;\r\n      }\r\n    } else {\r\n      if (\r\n        prevSVGWidth !== SVGWidth ||\r\n        prevSVGHeight !== SVGHeight\r\n      ) {\r\n        nextValue = setSVGViewBox(nextValue, 0, 0, SVGWidth, SVGHeight);\r\n        needUpdate = true;\r\n      }\r\n    }\r\n\r\n    if (\r\n      prevProps.scaleFactorMin !== props.scaleFactorMin ||\r\n      prevProps.scaleFactorMax !== props.scaleFactorMax\r\n    ) {\r\n      nextValue = setZoomLevels(nextValue, props.scaleFactorMin, props.scaleFactorMax);\r\n      needUpdate = true;\r\n    }\r\n\r\n    if (needUpdate) {\r\n      this.setValue(nextValue);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.autoPanIsRunning = true;\r\n    requestAnimationFrame(this.autoPanLoop);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.autoPanIsRunning = false;\r\n  }\r\n\r\n  /** ReactSVGPanZoom handlers **/\r\n  getValue() {\r\n    if (isValueValid(this.props.value)) return this.props.value\r\n    return this.state.defaultValue\r\n  }\r\n\r\n  getTool() {\r\n    if (this.props.tool) return this.props.tool\r\n    return TOOL_NONE\r\n  }\r\n\r\n  setValue(nextValue) {\r\n    let {onChangeValue, onZoom, onPan} = this.props;\r\n\r\n    if (onChangeValue) onChangeValue(nextValue);\r\n    if (nextValue.lastAction) {\r\n      if (onZoom && nextValue.lastAction === ACTION_ZOOM) onZoom(nextValue);\r\n      if (onPan && nextValue.lastAction === ACTION_PAN) onPan(nextValue);\r\n    }\r\n  }\r\n\r\n  /** ReactSVGPanZoom methods **/\r\n  pan(SVGDeltaX, SVGDeltaY) {\r\n    let nextValue = pan(this.getValue(), SVGDeltaX, SVGDeltaY);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  zoom(SVGPointX, SVGPointY, scaleFactor) {\r\n    let nextValue = zoom(this.getValue(), SVGPointX, SVGPointY, scaleFactor);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\r\n    let nextValue = fitSelection(this.getValue(), selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  fitToViewer(SVGAlignX = ALIGN_LEFT, SVGAlignY = ALIGN_TOP) {\r\n    let nextValue = fitToViewer(this.getValue(), SVGAlignX, SVGAlignY);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  zoomOnViewerCenter(scaleFactor) {\r\n    let nextValue = zoomOnViewerCenter(this.getValue(), scaleFactor);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\r\n    let nextValue = setPointOnViewerCenter(this.getValue(), SVGPointX, SVGPointY, zoomLevel);\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  reset() {\r\n    let nextValue = reset(this.getValue());\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  openMiniature() {\r\n    let nextValue = openMiniature(this.getValue());\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  closeMiniature() {\r\n    let nextValue = closeMiniature(this.getValue());\r\n    this.setValue(nextValue);\r\n  }\r\n\r\n  /** ReactSVGPanZoom internals **/\r\n  handleViewerEvent(event) {\r\n    let {props, ViewerDOM} = this;\r\n\r\n    if (!([TOOL_NONE, TOOL_AUTO].indexOf(this.getTool()) >= 0)) return;\r\n    if (event.target === ViewerDOM) return;\r\n\r\n    let eventsHandler = {\r\n      click: props.onClick,\r\n      dblclick: props.onDoubleClick,\r\n\r\n      mousemove: props.onMouseMove,\r\n      mouseup: props.onMouseUp,\r\n      mousedown: props.onMouseDown,\r\n\r\n      touchstart: props.onTouchStart,\r\n      touchmove: props.onTouchMove,\r\n      touchend: props.onTouchEnd,\r\n      touchcancel: props.onTouchCancel,\r\n    };\r\n\r\n    let onEventHandler = eventsHandler[event.type];\r\n    if (!onEventHandler) return;\r\n\r\n    onEventHandler(eventFactory(event, props.value, ViewerDOM));\r\n  }\r\n\r\n  autoPanLoop() {\r\n    let coords = {x: this.state.pointerX, y: this.state.pointerY};\r\n    let nextValue = onInterval(null, this.ViewerDOM, this.getTool(), this.getValue(), this.props, coords);\r\n    if (this.getValue() !== nextValue) {\r\n      this.setValue(nextValue);\r\n    }\r\n\r\n    if (this.autoPanIsRunning) {\r\n      requestAnimationFrame(this.autoPanLoop);\r\n    }\r\n  }\r\n\r\n  /** React renderer **/\r\n  render() {\r\n    let {props, state: {pointerX, pointerY}} = this;\r\n    let tool = this.getTool();\r\n    let value = this.getValue();\r\n    let {customToolbar: CustomToolbar, customMiniature: CustomMiniature} = props;\r\n\r\n    let panningWithToolAuto = tool === TOOL_AUTO\r\n      && value.mode === MODE_PANNING\r\n      && value.startX !== value.endX\r\n      && value.startY !== value.endY;\r\n\r\n    let cursor;\r\n\r\n    if (tool === TOOL_PAN)\r\n      cursor = cursorPolyfill(value.mode === MODE_PANNING ? 'grabbing' : 'grab');\r\n\r\n    if (tool === TOOL_ZOOM_IN)\r\n      cursor = cursorPolyfill('zoom-in');\r\n\r\n    if (tool === TOOL_ZOOM_OUT)\r\n      cursor = cursorPolyfill('zoom-out');\r\n\r\n    if (panningWithToolAuto)\r\n      cursor = cursorPolyfill('grabbing');\r\n\r\n    let blockChildEvents = [TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT].indexOf(tool) >= 0;\r\n    blockChildEvents = blockChildEvents || panningWithToolAuto;\r\n\r\n    const touchAction = (this.props.detectPinchGesture || [TOOL_PAN, TOOL_AUTO].indexOf(this.getTool()) !== -1) ? 'none' : undefined\r\n\r\n    const style = {display: 'block', cursor, touchAction};\r\n\r\n    return (\r\n      <div\r\n        style={{position: \"relative\", width: value.viewerWidth, height: value.viewerHeight, ...props.style}}\r\n        className={this.props.className}>\r\n        <svg\r\n          ref={ViewerDOM => this.ViewerDOM = ViewerDOM}\r\n          width={value.viewerWidth}\r\n          height={value.viewerHeight}\r\n          style={style}\r\n\r\n          onMouseDown={event => {\r\n            let nextValue = onMouseDown(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n          onMouseMove={event => {\r\n            let {left, top} = this.ViewerDOM.getBoundingClientRect();\r\n            let x = event.clientX - Math.round(left);\r\n            let y = event.clientY - Math.round(top);\r\n\r\n            let nextValue = onMouseMove(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props, {x, y});\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.setState({pointerX: x, pointerY: y});\r\n            this.handleViewerEvent(event);\r\n          }}\r\n          onMouseUp={event => {\r\n            let nextValue = onMouseUp(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n\r\n          onClick={event => {\r\n            this.handleViewerEvent(event)\r\n          }}\r\n          onDoubleClick={event => {\r\n            let nextValue = onDoubleClick(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n\r\n          onWheel={event => {\r\n            let nextValue = onWheel(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n          }}\r\n\r\n          onMouseEnter={event => {\r\n            if (detectTouch()) return;\r\n            let nextValue = onMouseEnterOrLeave(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n          }}\r\n          onMouseLeave={event => {\r\n            let nextValue = onMouseEnterOrLeave(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n          }}\r\n\r\n          onTouchStart={event => {\r\n            let nextValue = onTouchStart(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n          onTouchMove={event => {\r\n            let nextValue = onTouchMove(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n          onTouchEnd={event => {\r\n            let nextValue = onTouchEnd(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}\r\n          onTouchCancel={event => {\r\n            let nextValue = onTouchCancel(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\r\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\r\n            this.handleViewerEvent(event);\r\n          }}>\r\n\r\n          <rect\r\n            fill={props.background}\r\n            x={0}\r\n            y={0}\r\n            width={value.viewerWidth}\r\n            height={value.viewerHeight}\r\n            style={{pointerEvents: \"none\"}}\r\n          />\r\n\r\n          <g\r\n            transform={toSVG(value)}\r\n            style={blockChildEvents ? {pointerEvents: \"none\"} : {}}>\r\n            <rect\r\n              fill={this.props.SVGBackground}\r\n              style={this.props.SVGStyle}\r\n              x={value.SVGViewBoxX}\r\n              y={value.SVGViewBoxY}\r\n              width={value.SVGWidth}\r\n              height={value.SVGHeight}/>\r\n            <g>\r\n              {props.children.props.children}\r\n            </g>\r\n          </g>\r\n\r\n          {!([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0 && props.detectAutoPan && value.focus) ? null : (\r\n            <g style={{pointerEvents: \"none\"}}>\r\n              {!(pointerY <= 20) ? null :\r\n                <BorderGradient direction={POSITION_TOP} width={value.viewerWidth} height={value.viewerHeight}/>\r\n              }\r\n\r\n              {!(value.viewerWidth - pointerX <= 20) ? null :\r\n                <BorderGradient direction={POSITION_RIGHT} width={value.viewerWidth} height={value.viewerHeight}/>\r\n              }\r\n\r\n              {!(value.viewerHeight - pointerY <= 20) ? null :\r\n                <BorderGradient direction={POSITION_BOTTOM} width={value.viewerWidth} height={value.viewerHeight}/>\r\n              }\r\n\r\n              {!(value.focus && pointerX <= 20) ? null :\r\n                <BorderGradient direction={POSITION_LEFT} width={value.viewerWidth} height={value.viewerHeight}/>\r\n              }\r\n            </g>\r\n          )}\r\n\r\n          {!(value.mode === MODE_ZOOMING) ? null :\r\n            <Selection startX={value.startX} startY={value.startY} endX={value.endX} endY={value.endY}/>\r\n          }\r\n        </svg>\r\n\r\n        {props.toolbarProps.position === POSITION_NONE ? null :\r\n          <CustomToolbar\r\n            {...this.props.toolbarProps}\r\n            value={value}\r\n            onChangeValue={value => this.setValue(value)}\r\n            tool={tool}\r\n            onChangeTool={tool => this.props.onChangeTool(tool)}\r\n          />}\r\n\r\n        {props.miniatureProps.position === POSITION_NONE ? null :\r\n          <CustomMiniature\r\n            {...this.props.miniatureProps}\r\n            value={value}\r\n            onChangeValue={value => this.setValue(value)}\r\n            SVGBackground={this.props.SVGBackground}\r\n          >\r\n            {props.children.props.children}\r\n          </CustomMiniature>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nReactSVGPanZoom.propTypes = {\r\n  /**************************************************************************/\r\n  /*  Viewer configuration                                                  */\r\n  /**************************************************************************/\r\n  //width of the viewer displayed on screen\r\n  width: PropTypes.number.isRequired,\r\n\r\n  //height of the viewer displayed on screen\r\n  height: PropTypes.number.isRequired,\r\n\r\n  //value of the viewer (current camera view)\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.object,\r\n    PropTypes.shape({\r\n      version: PropTypes.oneOf([2]).isRequired,\r\n      mode: PropTypes.oneOf([MODE_IDLE, MODE_PANNING, MODE_ZOOMING]).isRequired,\r\n      focus: PropTypes.bool.isRequired,\r\n      a: PropTypes.number.isRequired,\r\n      b: PropTypes.number.isRequired,\r\n      c: PropTypes.number.isRequired,\r\n      d: PropTypes.number.isRequired,\r\n      e: PropTypes.number.isRequired,\r\n      f: PropTypes.number.isRequired,\r\n      viewerWidth: PropTypes.number.isRequired,\r\n      viewerHeight: PropTypes.number.isRequired,\r\n      SVGWidth: PropTypes.number.isRequired,\r\n      SVGHeight: PropTypes.number.isRequired,\r\n      SVGViewBoxX: PropTypes.number.isRequired,\r\n      SVGViewBoxY: PropTypes.number.isRequired,\r\n      startX: PropTypes.number,\r\n      startY: PropTypes.number,\r\n      endX: PropTypes.number,\r\n      endY: PropTypes.number,\r\n      miniatureOpen: PropTypes.bool.isRequired,\r\n    })\r\n  ]).isRequired,\r\n\r\n  //handler something changed\r\n  onChangeValue: PropTypes.func.isRequired,\r\n\r\n  //current active tool (TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT)\r\n  tool: PropTypes.oneOf([TOOL_AUTO, TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT]).isRequired,\r\n\r\n  //handler tool changed\r\n  onChangeTool: PropTypes.func.isRequired,\r\n\r\n  /**************************************************************************/\r\n  /* Customize style                                                        */\r\n  /**************************************************************************/\r\n\r\n  //background of the viewer\r\n  background: PropTypes.string,\r\n\r\n  //background of the svg\r\n  SVGBackground: PropTypes.string,\r\n\r\n  //style of the svg\r\n  SVGStyle: PropTypes.object,\r\n\r\n  //CSS style of the Viewer\r\n  style: PropTypes.object,\r\n\r\n  //className of the Viewer\r\n  className: PropTypes.string,\r\n\r\n\r\n  /**************************************************************************/\r\n  /* Detect events                                                          */\r\n  /**************************************************************************/\r\n\r\n  //perform zoom operation on mouse scroll\r\n  detectWheel: PropTypes.bool,\r\n\r\n  //perform PAN if the mouse is on viewer border\r\n  detectAutoPan: PropTypes.bool,\r\n\r\n  //perform zoom operation on pinch gesture\r\n  detectPinchGesture: PropTypes.bool,\r\n\r\n  //toolbar position\r\n  toolbarPosition: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\r\n\r\n  //handler zoom level changed\r\n  onZoom: PropTypes.func,\r\n\r\n  //handler pan action performed\r\n  onPan: PropTypes.func,\r\n\r\n  //handler click\r\n  onClick: PropTypes.func,\r\n\r\n  //handler double click\r\n  onDoubleClick: PropTypes.func,\r\n\r\n  //handler mouseup\r\n  onMouseUp: PropTypes.func,\r\n\r\n  //handler mousemove\r\n  onMouseMove: PropTypes.func,\r\n\r\n  //handler mousedown\r\n  onMouseDown: PropTypes.func,\r\n\r\n  /**************************************************************************/\r\n  /* Some advanced configurations                                           */\r\n  /**************************************************************************/\r\n\r\n  //if disabled the user can move the image outside the viewer\r\n  preventPanOutside: PropTypes.bool,\r\n\r\n  //how much scale in or out\r\n  scaleFactor: PropTypes.number,\r\n\r\n  //how much scale in or out on mouse wheel (requires detectWheel enabled)\r\n  scaleFactorOnWheel: PropTypes.number,\r\n\r\n  // maximum amount of scale a user can zoom in to\r\n  scaleFactorMax: PropTypes.number,\r\n\r\n  // minimum amount of a scale a user can zoom out of\r\n  scaleFactorMin: PropTypes.number,\r\n\r\n  //modifier keys //https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState\r\n  modifierKeys: PropTypes.array,\r\n\r\n  //Turn off zoom on double click\r\n  disableDoubleClickZoomWithToolAuto: PropTypes.bool,\r\n\r\n  /**************************************************************************/\r\n  /* Miniature configurations                                                 */\r\n  /**************************************************************************/\r\n\r\n  //override miniature component\r\n  customMiniature: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\r\n\r\n  //miniature props\r\n  miniatureProps: PropTypes.shape({\r\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_RIGHT, POSITION_LEFT]),\r\n    background: PropTypes.string,\r\n    width: PropTypes.number,\r\n    height: PropTypes.number,\r\n  }),\r\n\r\n  /**************************************************************************/\r\n  /* Toolbar configurations                                                 */\r\n  /**************************************************************************/\r\n\r\n  //override toolbar component\r\n  customToolbar: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\r\n\r\n  //toolbar props\r\n  toolbarProps: PropTypes.shape({\r\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\r\n    SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\r\n    SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\r\n  }),\r\n\r\n  /**************************************************************************/\r\n  /* Children Check                                                         */\r\n  /**************************************************************************/\r\n  //accept only one node SVG\r\n  children: function (props, propName, componentName) {\r\n    // Only accept a single child, of the appropriate type\r\n    //credits: http://www.mattzabriskie.com/blog/react-validating-children\r\n    let prop = props[propName];\r\n    let types = ['svg'];\r\n    if (React.Children.count(prop) !== 1 ||\r\n      types.indexOf(prop.type) === -1) {\r\n      return new Error(\r\n        '`' + componentName + '` ' +\r\n        'should have a single child of the following types: ' +\r\n        ' `' + types.join('`, `') + '`.'\r\n      );\r\n    }\r\n    if (!prop.props.hasOwnProperty('width') || !prop.props.hasOwnProperty('height')) {\r\n      return new Error('SVG should have props `width` and `height`');\r\n    }\r\n\r\n  }\r\n};\r\n\r\nReactSVGPanZoom.defaultProps = {\r\n  style: {},\r\n  background: \"#616264\",\r\n  SVGBackground: \"#fff\",\r\n  SVGStyle: {},\r\n  detectWheel: true,\r\n  detectAutoPan: true,\r\n  detectPinchGesture: true,\r\n  modifierKeys: [\"Alt\", \"Shift\", \"Control\"],\r\n  preventPanOutside: true,\r\n  scaleFactor: 1.1,\r\n  scaleFactorOnWheel: 1.06,\r\n  disableZoomWithToolAuto: false,\r\n  onZoom: null,\r\n  onPan: null,\r\n  customToolbar: Toolbar,\r\n  toolbarProps: {},\r\n  customMiniature: Miniature,\r\n  miniatureProps: {},\r\n};\r\n","import {decompose} from '../features/common'\r\n\r\nexport default class ViewerEvent {\r\n  constructor(originalEvent, value, SVGViewer) {\r\n    this.originalEvent = originalEvent;\r\n    this.value = value;\r\n    this.SVGViewer = SVGViewer;\r\n  }\r\n\r\n  get scaleFactor() {\r\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\r\n    return this._cacheDecomposedValue.scaleFactor;\r\n  }\r\n\r\n  get translationX() {\r\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\r\n    return this._cacheDecomposedValue.translationX;\r\n  }\r\n\r\n  get translationY() {\r\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\r\n    return this._cacheDecomposedValue.translationY;\r\n  }\r\n\r\n  preventDefault(){\r\n    this.originalEvent.preventDefault();\r\n  }\r\n\r\n  stopPropagation(){\r\n    this.originalEvent.stopPropagation();\r\n  }\r\n}\r\n","import {\r\n  TOOL_AUTO,\r\n  TOOL_NONE,\r\n  TOOL_PAN,\r\n  TOOL_ZOOM_IN,\r\n  TOOL_ZOOM_OUT,\r\n  MODE_PANNING,\r\n  MODE_ZOOMING,\r\n  MODE_IDLE\r\n} from '../constants';\r\nimport {setFocus, setViewerCoords, getSVGPoint} from './common';\r\nimport {startPanning, updatePanning, stopPanning, autoPanIfNeeded} from './pan';\r\nimport {startZooming, updateZooming, stopZooming, zoom} from './zoom';\r\nimport mapRange from '../utils/mapRange';\r\n\r\n\r\nexport function onMouseDown(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let x, y;\r\n  if (coords) {\r\n    ({x, y} = coords);\r\n  } else {\r\n    let {left, top} = ViewerDOM.getBoundingClientRect();\r\n    x = event.clientX - Math.round(left);\r\n    y = event.clientY - Math.round(top);\r\n  }\r\n\r\n  let nextValue = value;\r\n\r\n  switch (tool) {\r\n    case TOOL_ZOOM_OUT:\r\n      let SVGPoint = getSVGPoint(value, x, y);\r\n      nextValue = zoom(value, SVGPoint.x, SVGPoint.y, 1 / props.scaleFactor, props);\r\n      break;\r\n\r\n    case TOOL_ZOOM_IN:\r\n      nextValue = startZooming(value, x, y);\r\n      break;\r\n\r\n    case TOOL_AUTO:\r\n    case TOOL_PAN:\r\n      nextValue = startPanning(value, x, y);\r\n      break;\r\n\r\n    default:\r\n      return value;\r\n  }\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onMouseMove(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let x, y;\r\n  if (coords) {\r\n    ({x, y} = coords);\r\n  } else {\r\n    let {left, top} = ViewerDOM.getBoundingClientRect();\r\n    x = event.clientX - Math.round(left);\r\n    y = event.clientY - Math.round(top);\r\n  }\r\n\r\n  let forceExit = (event.buttons === 0); //the mouse exited and reentered into svg\r\n  let nextValue = value;\r\n\r\n  switch (tool) {\r\n    case TOOL_ZOOM_IN:\r\n      if (value.mode === MODE_ZOOMING)\r\n        nextValue = forceExit ? stopZooming(value, x, y, props.scaleFactor, props) : updateZooming(value, x, y);\r\n      break;\r\n\r\n    case TOOL_AUTO:\r\n    case TOOL_PAN:\r\n      if (value.mode === MODE_PANNING)\r\n        nextValue = forceExit ? stopPanning(value) : updatePanning(value, x, y, props.preventPanOutside ? 20 : undefined);\r\n      break;\r\n\r\n    default:\r\n      return value;\r\n  }\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onMouseUp(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let x, y;\r\n  if (coords) {\r\n    ({x, y} = coords);\r\n  } else {\r\n    let {left, top} = ViewerDOM.getBoundingClientRect();\r\n    x = event.clientX - Math.round(left);\r\n    y = event.clientY - Math.round(top);\r\n  }\r\n\r\n  let nextValue = value;\r\n\r\n  switch (tool) {\r\n    case TOOL_ZOOM_OUT:\r\n      if (value.mode === MODE_ZOOMING)\r\n        nextValue = stopZooming(value, x, y, 1 / props.scaleFactor, props);\r\n      break;\r\n\r\n    case TOOL_ZOOM_IN:\r\n      if (value.mode === MODE_ZOOMING)\r\n        nextValue = stopZooming(value, x, y, props.scaleFactor, props);\r\n      break;\r\n\r\n    case TOOL_AUTO:\r\n    case TOOL_PAN:\r\n      if (value.mode === MODE_PANNING)\r\n        nextValue = stopPanning(value, x, y);\r\n      break;\r\n\r\n    default:\r\n      return value;\r\n  }\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onDoubleClick(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let x, y;\r\n  if (coords) {\r\n    ({x, y} = coords);\r\n  } else {\r\n    let {left, top} = ViewerDOM.getBoundingClientRect();\r\n    x = event.clientX - Math.round(left);\r\n    y = event.clientY - Math.round(top);\r\n  }\r\n\r\n  let nextValue = value;\r\n\r\n  switch (tool) {\r\n    case TOOL_AUTO:\r\n      if (!props.disableDoubleClickZoomWithToolAuto) {\r\n        let SVGPoint = getSVGPoint(value, x, y);\r\n        let modifierKeysReducer = (current, modifierKey) => current || event.getModifierState(modifierKey);\r\n        let modifierKeyActive = props.modifierKeys.reduce(modifierKeysReducer, false);\r\n        let scaleFactor = modifierKeyActive ? 1 / props.scaleFactor : props.scaleFactor;\r\n        nextValue = zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\r\n      }\r\n      break;\r\n\r\n    default:\r\n      return value;\r\n  }\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onWheel(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let x, y;\r\n  if (coords) {\r\n    ({x, y} = coords);\r\n  } else {\r\n    let {left, top} = ViewerDOM.getBoundingClientRect();\r\n    x = event.clientX - Math.round(left);\r\n    y = event.clientY - Math.round(top);\r\n  }\r\n\r\n  if (!props.detectWheel) return value;\r\n\r\n  let delta = Math.max(-1, Math.min(1, event.deltaY));\r\n  let scaleFactor = mapRange(delta, -1, 1, props.scaleFactorOnWheel, 1 / props.scaleFactorOnWheel);\r\n\r\n  let SVGPoint = getSVGPoint(value, x, y);\r\n  let nextValue = zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onMouseEnterOrLeave(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let nextValue = setFocus(value, event.type === 'mouseenter');\r\n\r\n  event.preventDefault();\r\n  return nextValue;\r\n}\r\n\r\nexport function onInterval(event, ViewerDOM, tool, value, props, coords = null) {\r\n  let {x, y} = coords;\r\n\r\n  if (! ([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0) ) return value;\r\n  if (!props.detectAutoPan) return value;\r\n  if (!value.focus) return value;\r\n\r\n  return autoPanIfNeeded(value, x, y);\r\n}\r\n","export default function calculateBox(start, end) {\r\n  if (start.x <= end.x && start.y <= end.y) {\r\n    return {\r\n      x: start.x,\r\n      y: start.y,\r\n      width: end.x - start.x,\r\n      height: end.y - start.y\r\n    };\r\n  } else if (start.x >= end.x && start.y <= end.y) {\r\n    return {\r\n      x: end.x,\r\n      y: start.y,\r\n      width: start.x - end.x,\r\n      height: end.y - start.y\r\n    };\r\n  } else if (start.x >= end.x && start.y >= end.y) {\r\n    return {\r\n      x: end.x,\r\n      y: end.y,\r\n      width: start.x - end.x,\r\n      height: start.y - end.y\r\n    };\r\n  } else if (start.x <= end.x && start.y >= end.y) {\r\n    return {\r\n      x: start.x,\r\n      y: end.y,\r\n      width: end.x - start.x,\r\n      height: start.y - end.y\r\n    };\r\n  }\r\n}\r\n\r\n","import React from \"react\";\r\nimport getDisplayName from \"./getDisplayName\";\r\n\r\nlet uid = 1;\r\nconst nextUID = () => `uid${uid++}`;\r\n\r\nexport default function RandomUID(WrappedComponent) {\r\n  class RandomUID extends React.Component {\r\n    constructor(props) {\r\n      super(props)\r\n      this.state = {uid: nextUID()}\r\n    }\r\n\r\n    render() {\r\n      return <WrappedComponent _uid={this.state.uid} {...this.props}/>\r\n    }\r\n  }\r\n\r\n  RandomUID.displayName = `RandomUID(${getDisplayName(WrappedComponent)})`;\r\n\r\n  return RandomUID;\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\r\n  POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT,\r\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM,\r\n} from '../constants';\r\n\r\nimport {fitToViewer} from '../features/zoom';\r\nimport IconCursor from './icon-cursor';\r\nimport IconPan from './icon-pan';\r\nimport IconZoomIn from './icon-zoom-in';\r\nimport IconZoomOut from './icon-zoom-out';\r\nimport IconFit from './icon-fit';\r\nimport ToolbarButton from './toolbar-button';\r\n\r\nexport default function Toolbar({tool, value, onChangeValue, onChangeTool, position, SVGAlignX, SVGAlignY}) {\r\n\r\n  let handleChangeTool = (event, tool) => {\r\n    onChangeTool(tool);\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  let handleFit = event => {\r\n    onChangeValue(fitToViewer(value, SVGAlignX, SVGAlignY));\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  };\r\n\r\n  let isHorizontal = [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0;\r\n\r\n  let style = {\r\n    //position\r\n    position: \"absolute\",\r\n    transform: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"translate(-50%, 0px)\" : \"none\",\r\n    top: [POSITION_LEFT, POSITION_RIGHT, POSITION_TOP].indexOf(position) >= 0 ? \"5px\" : \"unset\",\r\n    left: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"50%\" : (POSITION_LEFT === position ? \"5px\" : \"unset\"),\r\n    right: [POSITION_RIGHT].indexOf(position) >= 0 ? \"5px\" : \"unset\",\r\n    bottom: [POSITION_BOTTOM].indexOf(position) >= 0 ? \"5px\" : \"unset\",\r\n\r\n    //inner styling\r\n    backgroundColor: \"rgba(19, 20, 22, 0.90)\",\r\n    borderRadius: \"2px\",\r\n    display: \"flex\",\r\n    flexDirection: isHorizontal ? \"row\" : \"column\",\r\n    padding: isHorizontal ? \"1px 2px\" : \"2px 1px\"\r\n  };\r\n\r\n  return (\r\n    <div style={style} role=\"toolbar\">\r\n      <ToolbarButton\r\n        toolbarPosition={position}\r\n        active={tool === TOOL_NONE}\r\n        name=\"unselect-tools\"\r\n        title=\"Selection\"\r\n        onClick={ event => handleChangeTool(event, TOOL_NONE) }>\r\n        <IconCursor/>\r\n      </ToolbarButton>\r\n\r\n      <ToolbarButton\r\n        toolbarPosition={position}\r\n        active={tool === TOOL_PAN}\r\n        name=\"select-tool-pan\"\r\n        title=\"Pan\"\r\n        onClick={ event => handleChangeTool(event, TOOL_PAN) }>\r\n        <IconPan/>\r\n      </ToolbarButton>\r\n\r\n      <ToolbarButton\r\n        toolbarPosition={position}\r\n        active={tool === TOOL_ZOOM_IN}\r\n        name=\"select-tool-zoom-in\"\r\n        title=\"Zoom in\"\r\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_IN) }>\r\n        <IconZoomIn/>\r\n      </ToolbarButton>\r\n\r\n      <ToolbarButton\r\n        toolbarPosition={position}\r\n        active={tool === TOOL_ZOOM_OUT}\r\n        name=\"select-tool-zoom-out\"\r\n        title=\"Zoom out\"\r\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_OUT) }>\r\n        <IconZoomOut/>\r\n      </ToolbarButton>\r\n\r\n      <ToolbarButton\r\n        toolbarPosition={position}\r\n        active={false}\r\n        name=\"fit-to-viewer\"\r\n        title=\"Fit to viewer\"\r\n        onClick={ event => handleFit(event) }>\r\n        <IconFit/>\r\n      </ToolbarButton>\r\n    </div>\r\n  )\r\n}\r\n\r\nToolbar.propTypes = {\r\n  tool: PropTypes.string.isRequired,\r\n  onChangeTool: PropTypes.func.isRequired,\r\n  value: PropTypes.object.isRequired,\r\n  onChangeValue: PropTypes.func.isRequired,\r\n\r\n  //customizations\r\n  position: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\r\n  SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\r\n  SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\r\n};\r\n\r\nToolbar.defaultProps = {\r\n  position: POSITION_RIGHT,\r\n  SVGAlignX: ALIGN_LEFT,\r\n  SVGAlignY: ALIGN_TOP\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {POSITION_LEFT, POSITION_RIGHT,} from '../constants';\r\nimport {applyToPoints, inverse} from 'transformation-matrix';\r\nimport MiniatureToggleButton from './miniature-toggle-button';\r\nimport MiniatureMask from './miniature-mask';\r\n\r\nconst {min, max} = Math;\r\n\r\nexport default function Miniature(props) {\r\n\r\n  let {value, onChangeValue, children, position, background, SVGBackground, width: miniatureWidth, height: miniatureHeight} = props;\r\n  let {SVGWidth, SVGHeight, SVGViewBoxX, SVGViewBoxY, viewerWidth, viewerHeight} = value;\r\n\r\n  let ratio = SVGHeight / SVGWidth;\r\n\r\n  let zoomToFit = ratio >= 1\r\n    ? miniatureHeight / SVGHeight\r\n    : miniatureWidth / SVGWidth;\r\n\r\n  let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(inverse(value), [\r\n    {x: 0, y: 0},\r\n    {x: viewerWidth, y: viewerHeight}\r\n  ]);\r\n\r\n  let width, height;\r\n  if (value.miniatureOpen) {\r\n    width = miniatureWidth;\r\n    height = miniatureHeight;\r\n  } else {\r\n    width = 24;\r\n    height = 24;\r\n  }\r\n\r\n  let style = {\r\n    position: \"absolute\",\r\n    overflow: \"hidden\",\r\n    outline: \"1px solid rgba(19, 20, 22, 0.90)\",\r\n    transition: \"width 200ms ease, height 200ms ease, bottom 200ms ease\",\r\n    width: width + \"px\",\r\n    height: height + \"px\",\r\n    bottom: \"6px\",\r\n    [position === POSITION_LEFT ? 'left' : 'right']: \"6px\",\r\n    background\r\n  };\r\n\r\n  let centerTranslation = ratio >= 1\r\n    ? `translate(${(miniatureWidth / 2 - SVGWidth / 2 + SVGViewBoxX) * zoomToFit}, ${-SVGViewBoxY * zoomToFit})`\r\n    : `translate(${-SVGViewBoxX * zoomToFit}, ${(miniatureHeight / 2 - SVGHeight / 2 + SVGViewBoxY) * zoomToFit})`;\r\n\r\n  return (\r\n    <div role=\"navigation\" style={style}>\r\n      <svg\r\n        width={miniatureWidth}\r\n        height={miniatureHeight}\r\n        style={{pointerEvents: \"none\"}}>\r\n        <g transform={centerTranslation}>\r\n          <g transform={`scale(${zoomToFit}, ${zoomToFit})`}>\r\n\r\n            <rect\r\n              fill={SVGBackground}\r\n              x={value.SVGViewBoxX}\r\n              y={value.SVGViewBoxY}\r\n              width={value.SVGWidth}\r\n              height={value.SVGHeight}/>\r\n\r\n            {children}\r\n\r\n            <MiniatureMask\r\n              SVGWidth={SVGWidth}\r\n              SVGHeight={SVGHeight}\r\n              SVGViewBoxX={SVGViewBoxX}\r\n              SVGViewBoxY={SVGViewBoxY}\r\n              x1={x1}\r\n              y1={y1}\r\n              x2={x2}\r\n              y2={y2}\r\n              zoomToFit={zoomToFit}\r\n            />\r\n\r\n          </g>\r\n        </g>\r\n      </svg>\r\n      <MiniatureToggleButton value={value} onChangeValue={onChangeValue} position={position}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nMiniature.propTypes = {\r\n  value: PropTypes.object.isRequired,\r\n  onChangeValue: PropTypes.func.isRequired,\r\n  SVGBackground: PropTypes.string.isRequired,\r\n\r\n  //customizations\r\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]),\r\n  background: PropTypes.string.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n};\r\n\r\nMiniature.defaultProps = {\r\n  position: POSITION_LEFT,\r\n  background: \"#616264\",\r\n  width: 100,\r\n  height: 80,\r\n}\r\n","import {tipNoViewer} from \"./migration-tips\";\r\n\r\nexport {default as ReactSVGPanZoom} from './viewer';\r\nexport {default as UncontrolledReactSVGPanZoom} from './uncontrolled-viewer';\r\nexport {default as Toolbar} from './ui-toolbar/toolbar';\r\nexport {default as Miniature} from './ui-miniature/miniature';\r\nexport {setPointOnViewerCenter, reset} from './features/common';\r\nexport {pan} from './features/pan';\r\nexport {zoom, fitSelection, fitToViewer, zoomOnViewerCenter} from './features/zoom';\r\nexport {openMiniature, closeMiniature} from './features/miniature'\r\nexport * from './constants';\r\n\r\nexport const Viewer = () => {\r\n  tipNoViewer()\r\n  return null;\r\n};\r\n","export function isNullOrUndefined(value) {\r\n  return typeof value === 'undefined' || value === null\r\n}\r\n","import ViewerMouseEvent from './viewer-mouse-event';\r\nimport ViewerTouchEvent from './viewer-touch-event';\r\n\r\nexport default function (originalEvent, value, SVGViewer) {\r\n\r\n  let eventType = originalEvent.type;\r\n\r\n  switch (eventType) {\r\n    case \"mousemove\":\r\n    case \"mouseup\":\r\n    case \"mousedown\":\r\n    case \"click\":\r\n    case \"dblclick\":\r\n      return new ViewerMouseEvent(originalEvent, value, SVGViewer);\r\n\r\n    case \"touchstart\":\r\n    case \"touchmove\":\r\n    case \"touchend\":\r\n    case \"touchcancel\":\r\n      return new ViewerTouchEvent(originalEvent, value, SVGViewer);\r\n\r\n    default:\r\n      throw new Error(`${eventType} not supported`);\r\n  }\r\n}\r\n","import {getSVGPoint} from '../features/common'\r\nimport ViewerEvent from './viewer-event';\r\n\r\nexport default class ViewerMouseEvent extends ViewerEvent{\r\n\r\n  get point() {\r\n    if (!this._cachePoint) {\r\n      let event = this.originalEvent, value = this.value, SVGViewer = this.SVGViewer;\r\n\r\n      let rect = SVGViewer.getBoundingClientRect();\r\n      let x = event.clientX - Math.round(rect.left);\r\n      let y = event.clientY - Math.round(rect.top);\r\n\r\n      this._cachePoint = getSVGPoint(value, x, y);\r\n    }\r\n    return this._cachePoint;\r\n  }\r\n\r\n  get x() {\r\n    return this.point.x;\r\n  }\r\n\r\n  get y() {\r\n    return this.point.y;\r\n  }\r\n}\r\n","import {getSVGPoint} from '../features/common'\r\nimport ViewerEvent from './viewer-event';\r\n\r\nexport default class ViewerTouchEvent extends ViewerEvent {\r\n  get points() {\r\n    if (!this._cachePoints)\r\n      this._cachePoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.touches, this.SVGViewer, this.value);\r\n\r\n    return this._cachePoints;\r\n  }\r\n\r\n  get changedPoints() {\r\n    if (!this._cacheChangedPoints)\r\n      this._cacheChangedPoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.changedTouches, this.SVGViewer, this.value);\r\n\r\n    return this._cacheChangedPoints;\r\n  }\r\n\r\n  static touchesToPoints(touches, SVGViewer, value) {\r\n    let points = [];\r\n    for (let i = 0; i < touches.length; i++) {\r\n      let touch = touches[i];\r\n\r\n      let rect = SVGViewer.getBoundingClientRect();\r\n      let x = touch.clientX - Math.round(rect.left);\r\n      let y = touch.clientY - Math.round(rect.top);\r\n\r\n      let point = getSVGPoint(value, x, y);\r\n\r\n      points.push({...point, identifier: touch.identifier});\r\n    }\r\n    return points;\r\n  }\r\n}\r\n","export default function mapRange(value, low1, high1, low2, high2) {\r\n  return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\r\n}\r\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\r\nimport {\r\n  TOOL_NONE, TOOL_PAN, TOOL_AUTO, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\r\n  MODE_IDLE, MODE_PANNING, MODE_ZOOMING\r\n} from '../constants';\r\nimport {resetMode, getSVGPoint, set} from './common';\r\nimport {onMouseDown, onMouseMove, onMouseUp} from './interactions';\r\nimport {isZoomLevelGoingOutOfBounds, limitZoomLevel} from './zoom';\r\n\r\nfunction hasPinchPointDistance(value) {\r\n  return typeof value.pinchPointDistance === 'number';\r\n}\r\n\r\nfunction onMultiTouch(event, ViewerDOM, tool, value, props) {\r\n  const {left, top} = ViewerDOM.getBoundingClientRect();\r\n  const x1 = event.touches[0].clientX - Math.round(left);\r\n  const y1 = event.touches[0].clientY - Math.round(top);\r\n  const x2 = event.touches[1].clientX - Math.round(left);\r\n  const y2 = event.touches[1].clientY - Math.round(top);\r\n  const pinchPointDistance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\r\n  const previousPointDistance = hasPinchPointDistance(value) ? value.pinchPointDistance : pinchPointDistance;\r\n  const svgPoint = getSVGPoint(value, (x1 + x2) / 2, (y1 + y2) / 2);\r\n  let distanceFactor = pinchPointDistance/previousPointDistance;\r\n\r\n  if (isZoomLevelGoingOutOfBounds(value, distanceFactor)) {\r\n    // Do not change translation and scale of value\r\n    return value;\r\n  }\r\n\r\n  if (event.cancelable) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  let matrix = transform(\r\n    fromObject(value),\r\n    translate(svgPoint.x, svgPoint.y),\r\n    scale(distanceFactor, distanceFactor),\r\n    translate(-svgPoint.x, -svgPoint.y)\r\n  );\r\n\r\n  return set(value, set({\r\n    mode: MODE_ZOOMING,\r\n    ...limitZoomLevel(value, matrix),\r\n    startX: null,\r\n    startY: null,\r\n    endX: null,\r\n    endY: null,\r\n    prePinchMode: value.prePinchMode ? value.prePinchMode : value.mode,\r\n    pinchPointDistance\r\n  }));\r\n}\r\n\r\nfunction isMultiTouch(event, props) {\r\n  return props.detectPinchGesture && event.touches.length > 1;\r\n}\r\n\r\nfunction shouldResetPinchPointDistance(event, value, props) {\r\n  return props.detectPinchGesture && hasPinchPointDistance(value) && event.touches.length < 2;\r\n}\r\n\r\nfunction getTouchPosition(touch, ViewerDOM) {\r\n  let {left, top} = ViewerDOM.getBoundingClientRect();\r\n  let x = touch.clientX - Math.round(left);\r\n  let y = touch.clientY - Math.round(top);\r\n\r\n  return { x, y };\r\n}\r\n\r\nfunction getNextValue(event, ViewerDOM, tool, value, props, nextValueFn) {\r\n  let nextValue = event.touches.length === 0 ? set(value, { mode: value.prePinchMode ? MODE_IDLE : value.mode, prePinchMode: null }) : value;\r\n  let touch = event.touches.length > 0 ? event.touches[0] : event.changedTouches[0];\r\n  let touchPosition = getTouchPosition(touch, ViewerDOM);\r\n\r\n  switch (tool) {\r\n    case TOOL_ZOOM_OUT:\r\n    case TOOL_ZOOM_IN:\r\n    case TOOL_AUTO:\r\n    case TOOL_PAN:\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n      return nextValueFn(event, ViewerDOM, tool, nextValue, props, touchPosition);\r\n\r\n    default:\r\n      return nextValue;\r\n  }\r\n}\r\n\r\nexport function onTouchStart(event, ViewerDOM, tool, value, props) {\r\n  if (isMultiTouch(event, props)) {\r\n    return onMultiTouch(event, ViewerDOM, tool, value, props);\r\n  }\r\n\r\n  if (event.touches.length !== 1) {\r\n    if ([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0){\r\n      return resetMode(value);\r\n    } else if([MODE_IDLE].indexOf(value.mode) >= 0){\r\n      return value;\r\n    }\r\n  }\r\n\r\n  return getNextValue(event, ViewerDOM, tool, value, props, onMouseDown);\r\n}\r\n\r\nexport function onTouchMove(event, ViewerDOM, tool, value, props) {\r\n  if (isMultiTouch(event, props)) {\r\n    return onMultiTouch(event, ViewerDOM, tool, value, props);\r\n  }\r\n\r\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0)) {\r\n    return value;\r\n  }\r\n\r\n  return getNextValue(event, ViewerDOM, tool, value, props, onMouseMove);\r\n}\r\n\r\nexport function onTouchEnd(event, ViewerDOM, tool, value, props) {\r\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0)) {\r\n    return value;\r\n  }\r\n\r\n  let nextValue = shouldResetPinchPointDistance(event, value, props) ? set(value, { pinchPointDistance: null }) : value;\r\n\r\n  if (event.touches.length > 0) {\r\n    return nextValue;\r\n  }\r\n\r\n  return getNextValue(event, ViewerDOM, tool, nextValue, props, onMouseUp);\r\n}\r\n\r\nexport function onTouchCancel(event, ViewerDOM, tool, value, props) {\r\n  event.stopPropagation();\r\n  event.preventDefault();\r\n\r\n  return resetMode(value);\r\n}\r\n","//specs: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor\r\n\r\nlet needPrefix = (cursor) => ['zoom-in', 'zoom-out', 'grab', 'grabbing'].indexOf(cursor) > -1;\r\nlet userAgent = () => navigator.userAgent.toLowerCase();\r\nlet isFirefox = () => userAgent().indexOf('firefox') > -1;\r\nlet isWebkit = () => userAgent().indexOf('webkit') > -1;\r\n\r\nexport default function (cursor) {\r\n  if (!needPrefix(cursor)) return cursor;\r\n  if (isFirefox()) return `-moz-${cursor}`;\r\n  if (isWebkit()) return `-webkit-${cursor}`;\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT} from '../constants';\r\nimport RandomUID from \"../utils/RandomUID\";\r\n\r\nconst prefixID = 'react-svg-pan-zoom_border_gradient'\r\n\r\nfunction BorderGradient({direction, width, height, _uid}) {\r\n\r\n  let transform;\r\n\r\n  switch (direction) {\r\n    case POSITION_TOP:\r\n      transform = `translate(${width}, 0) rotate(90)`;\r\n      break;\r\n\r\n    case POSITION_RIGHT:\r\n      transform = `translate(${width}, ${height}) rotate(180)`;\r\n      break;\r\n\r\n    case POSITION_BOTTOM:\r\n      transform = `translate(0, ${height}) rotate(270)`;\r\n      break;\r\n\r\n    case POSITION_LEFT:\r\n      transform = \" \";\r\n      break;\r\n  }\r\n\r\n  let gradientID = `${prefixID}_gradient_${_uid}`\r\n  let maskID = `${prefixID}_mask_${_uid}`\r\n\r\n  return (\r\n    <g>\r\n      <defs>\r\n        <linearGradient id={gradientID} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\" spreadMethod=\"pad\">\r\n          <stop offset=\"0%\" stopColor=\"#fff\" stopOpacity=\"0.8\"/>\r\n          <stop offset=\"100%\" stopColor=\"#000\" stopOpacity=\"0.5\"/>\r\n        </linearGradient>\r\n\r\n        <mask id={maskID} x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}>\r\n          <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\r\n                style={{stroke: \"none\", fill: `url(#${gradientID})`}}/>\r\n        </mask>\r\n      </defs>\r\n\r\n      <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\r\n            style={{stroke: \"none\", fill: \"#000\", mask: `url(#${maskID})`}} transform={transform}/>\r\n    </g>\r\n  );\r\n}\r\n\r\nBorderGradient.propTypes = {\r\n  direction: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]).isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired\r\n};\r\n\r\nexport default RandomUID(BorderGradient)\r\n","//https://facebook.github.io/react/docs/higher-order-components.html#convention-wrap-the-display-name-for-easy-debugging\r\nexport default function getDisplayName(WrappedComponent) {\r\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport calculateBox from '../utils/calculateBox';\r\n\r\nexport default function Selection({startX, startY, endX, endY}) {\r\n  if (!startX || !startY || !endX || !endY) return null;\r\n\r\n  let box = calculateBox({x: startX, y: startY}, {x: endX, y: endY});\r\n\r\n  return (<rect\r\n    stroke=\"#969FFF\"\r\n    strokeOpacity={0.7}\r\n    fill=\"#F3F4FF\"\r\n    fillOpacity={0.7}\r\n    x={box.x}\r\n    y={box.y}\r\n    width={box.width}\r\n    height={box.height}\r\n    style={{pointerEvents: \"none\"}}/>);\r\n}\r\n\r\nSelection.propTypes = {\r\n  startX: PropTypes.number,\r\n  startY: PropTypes.number,\r\n  endX: PropTypes.number,\r\n  endY: PropTypes.number\r\n};\r\n","import React from 'react';\r\n\r\n//credits https://materialdesignicons.com/icon/cursor-default-outline\r\n\r\nexport default function IconCursor() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <path\r\n        d=\"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z\"/>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\n//https://materialdesignicons.com/icon/cursor-move\r\n\r\nexport default function IconPan() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <path\r\n        d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\"/>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\n//https://material.io/icons/#ic_zoom_in\r\n\r\nexport default function IconZoomIn() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <g>\r\n        <path\r\n          d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\r\n        <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\n//https://material.io/icons/#ic_zoom_out\r\n\r\nexport default function IconZoomOut() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <path\r\n        d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\"/>\r\n    </svg>\r\n  )\r\n}\r\n","import React from 'react';\r\n\r\n//credits https://materialdesignicons.com/icon/cursor-default-outline\r\n\r\nexport default function IconFit() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <path\r\n        d=\"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z\"/>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  POSITION_TOP, POSITION_BOTTOM\r\n} from '../constants';\r\n\r\nexport default class ToolbarButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {hover: false};\r\n  }\r\n\r\n  change(event) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    switch (event.type) {\r\n      case 'mouseenter':\r\n      case 'touchstart':\r\n        this.setState({hover: true});\r\n        break;\r\n      case 'mouseleave':\r\n      case 'touchend':\r\n      case 'touchcancel':\r\n        this.setState({hover: false});\r\n        break;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let style = {\r\n      display: \"block\",\r\n      width: \"24px\",\r\n      height: \"24px\",\r\n      margin: [POSITION_TOP, POSITION_BOTTOM].indexOf(this.props.toolbarPosition) >= 0 ? \"2px 1px\" : \"1px 2px\",\r\n      color: this.props.active || this.state.hover ? '#1CA6FC' : '#FFF',\r\n      transition: \"color 200ms ease\",\r\n      background: \"none\",\r\n      padding: \"0px\",\r\n      border: \"0px\",\r\n      outline: \"0px\",\r\n      cursor: \"pointer\"\r\n    };\r\n\r\n    return (\r\n      <button\r\n        onMouseEnter={e => this.change(e)}\r\n        onMouseLeave={e => this.change(e)}\r\n\r\n        onTouchStart={e => {\r\n          this.change(e);\r\n          this.props.onClick(e);\r\n        }}\r\n        onTouchEnd={e => this.change(e)}\r\n        onTouchCancel={e => this.change(e)}\r\n\r\n        onClick={this.props.onClick}\r\n\r\n        style={style}\r\n        title={this.props.title}\r\n        name={this.props.name}\r\n        role=\"button\"\r\n        type=\"button\"\r\n      >{this.props.children}</button>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nToolbarButton.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  toolbarPosition: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n  active: PropTypes.bool.isRequired\r\n};\r\n","//http://stackoverflow.com/a/4819886/1398836\r\n\r\nexport default function isTouchDevice() {\r\n  return 'ontouchstart' in window        // works on most browsers\r\n    || navigator.maxTouchPoints;       // works on IE10/11 and Surface\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {openMiniature, closeMiniature} from '../features/miniature';\r\nimport IconArrow from './icon-arrow';\r\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\r\n\r\nexport default function MiniatureToggleButton({value, onChangeValue, position}) {\r\n  let style = {\r\n    width: \"24px\",\r\n    height: \"24px\",\r\n    display: \"block\",\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    [position === POSITION_LEFT ? 'left' : 'right']: '0px',\r\n    background: \"rgba(19, 20, 22, 0.901961)\",\r\n    border: 0,\r\n    padding: 0,\r\n    outline: 0,\r\n    color: \"#fff\"\r\n  };\r\n\r\n  let action = value.miniatureOpen ? closeMiniature : openMiniature;\r\n\r\n  return (\r\n    <button role=\"button\" type=\"button\" style={style} onClick={event => onChangeValue(action(value))}>\r\n      <IconArrow open={value.miniatureOpen} position={position}/>\r\n    </button>\r\n  )\r\n\r\n}\r\n\r\nMiniatureToggleButton.propTypes = {\r\n  value: PropTypes.object.isRequired,\r\n  onChangeValue: PropTypes.func.isRequired,\r\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\r\n\r\n//credits https://materialdesignicons.com/icon/chevron-up\r\n\r\nexport default function IconArrow({open, position}) {\r\n\r\n  let transform = 0;\r\n\r\n  switch (position){\r\n    case POSITION_LEFT:\r\n      transform = open ? \"rotate(225, 12, 13)\" : \"rotate(45, 12, 13)\";\r\n      break;\r\n\r\n    case POSITION_RIGHT:\r\n      transform = transform = open ? \"rotate(135, 12, 13)\" : \"rotate(-45, 12, 13)\";\r\n  }\r\n\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\">\r\n      <g transform={transform}>\r\n        <path fill=\"#000000\" d=\"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z\"/>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nIconArrow.propTypes = {\r\n  open: PropTypes.bool.isRequired,\r\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport RandomUID from \"../utils/RandomUID\";\r\n\r\nconst prefixID = 'react-svg-pan-zoom_miniature'\r\n\r\nfunction MiniatureMask({SVGViewBoxX, SVGViewBoxY, SVGWidth, SVGHeight, x1, y1, x2, y2, zoomToFit, _uid}) {\r\n  let maskID = `${prefixID}_mask_${_uid}`\r\n  return (\r\n    <g>\r\n      <defs>\r\n        <mask id={maskID}>\r\n          <rect x={SVGViewBoxX} y={SVGViewBoxY} width={SVGWidth} height={SVGHeight} fill=\"#ffffff\"/>\r\n          <rect x={x1} y={y1} width={x2 - x1} height={y2 - y1}/>\r\n        </mask>\r\n      </defs>\r\n\r\n      <rect\r\n        x={SVGViewBoxX}\r\n        y={SVGViewBoxY}\r\n        width={SVGWidth}\r\n        height={SVGHeight}\r\n        style={{\r\n          stroke: \"none\",\r\n          fill: \"#000\",\r\n          mask: `url(#${maskID})`,\r\n          opacity: 0.4\r\n        }}\r\n      />\r\n    </g>)\r\n}\r\n\r\nMiniatureMask.propTypes = {\r\n  SVGWidth: PropTypes.number.isRequired,\r\n  SVGHeight: PropTypes.number.isRequired,\r\n  SVGViewBoxX: PropTypes.number.isRequired,\r\n  SVGViewBoxY: PropTypes.number.isRequired,\r\n  x1: PropTypes.number.isRequired,\r\n  y1: PropTypes.number.isRequired,\r\n  x2: PropTypes.number.isRequired,\r\n  y2: PropTypes.number.isRequired,\r\n  zoomToFit: PropTypes.number.isRequired,\r\n}\r\n\r\nexport default RandomUID(MiniatureMask)\r\n","import React from \"react\";\r\nimport ReactSVGPanZoom from './viewer'\r\nimport PropTypes from \"prop-types\";\r\nimport {TOOL_NONE} from \"./constants\";\r\n\r\nexport default class UncontrolledReactSVGPanZoom extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: props.defaultValue || {},\r\n      tool: props.defaultTool || TOOL_NONE,\r\n    }\r\n\r\n    this.Viewer = null;\r\n    this.changeTool = this.changeTool.bind(this)\r\n    this.changeValue = this.changeValue.bind(this)\r\n  }\r\n\r\n  changeTool(tool) {\r\n    this.setState({tool})\r\n  }\r\n\r\n  changeValue(value) {\r\n    this.setState({value})\r\n  }\r\n\r\n  pan(SVGDeltaX, SVGDeltaY) {\r\n    this.Viewer.pan(SVGDeltaX, SVGDeltaY)\r\n  }\r\n\r\n  zoom(SVGPointX, SVGPointY, scaleFactor) {\r\n    this.Viewer.zoom(SVGPointX, SVGPointY, scaleFactor)\r\n  }\r\n\r\n  fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\r\n    this.Viewer.fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight)\r\n  }\r\n\r\n  fitToViewer(SVGAlignX, SVGAlignY) {\r\n    this.Viewer.fitToViewer(SVGAlignX, SVGAlignY)\r\n  }\r\n\r\n  zoomOnViewerCenter(scaleFactor) {\r\n    this.Viewer.zoomOnViewerCenter(scaleFactor)\r\n  }\r\n\r\n  setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\r\n    this.Viewer.setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel)\r\n  }\r\n\r\n  reset() {\r\n    this.Viewer.reset()\r\n  }\r\n\r\n  openMiniature() {\r\n    this.Viewer.openMiniature()\r\n  }\r\n\r\n  closeMiniature() {\r\n    this.Viewer.closeMiniature()\r\n  }\r\n\r\n  render() {\r\n    const {width, height, onChangeTool, onChangeValue, ...props} = this.props\r\n    const {tool, value} = this.state\r\n\r\n    return (\r\n      <ReactSVGPanZoom\r\n        width={width} height={height}\r\n        tool={tool} onChangeTool={this.changeTool}\r\n        value={value} onChangeValue={this.changeValue}\r\n        ref={Viewer => this.Viewer = Viewer}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nUncontrolledReactSVGPanZoom.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n\r\n  defaultValue: PropTypes.object,\r\n  defaultTool: PropTypes.string,\r\n}\r\n"],"sourceRoot":""}