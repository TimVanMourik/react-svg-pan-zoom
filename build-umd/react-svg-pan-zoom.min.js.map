{"version":3,"sources":["webpack://ReactSVGPanZoom/webpack/universalModuleDefinition","webpack://ReactSVGPanZoom/webpack/bootstrap","webpack://ReactSVGPanZoom/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://ReactSVGPanZoom/./src/constants.js","webpack://ReactSVGPanZoom/external {\"root\":\"PropTypes\",\"commonjs2\":\"prop-types\",\"commonjs\":\"prop-types\",\"amd\":\"prop-types\"}","webpack://ReactSVGPanZoom/./src/features/common.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/applyToPoint.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromObject.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromString.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/identity.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/inverse.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/utils.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/isAffineMatrix.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/translate.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/transform.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/rotate.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/scale.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/shear.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/skew.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/toString.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/smoothMatrix.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTriangles.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromDefinition.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/fromTransformAttribute.js","webpack://ReactSVGPanZoom/./node_modules/transformation-matrix/src/index.js","webpack://ReactSVGPanZoom/./src/features/zoom.js","webpack://ReactSVGPanZoom/./src/features/pan.js","webpack://ReactSVGPanZoom/./src/features/miniature.js","webpack://ReactSVGPanZoom/./src/migration-tips.js","webpack://ReactSVGPanZoom/./src/utils/is.js","webpack://ReactSVGPanZoom/./src/viewer.js","webpack://ReactSVGPanZoom/./src/events/viewer-event.js","webpack://ReactSVGPanZoom/./src/features/interactions.js","webpack://ReactSVGPanZoom/./src/utils/calculateBox.js","webpack://ReactSVGPanZoom/./src/utils/RandomUID.js","webpack://ReactSVGPanZoom/./src/ui-toolbar/toolbar.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature.jsx","webpack://ReactSVGPanZoom/./src/index.js","webpack://ReactSVGPanZoom/./src/events/event-factory.js","webpack://ReactSVGPanZoom/./src/events/viewer-mouse-event.js","webpack://ReactSVGPanZoom/./src/events/viewer-touch-event.js","webpack://ReactSVGPanZoom/./src/utils/mapRange.js","webpack://ReactSVGPanZoom/./src/utils/ViewBoxParser.js","webpack://ReactSVGPanZoom/./src/features/interactions-touch.js","webpack://ReactSVGPanZoom/./src/ui/cursor-polyfill.js","webpack://ReactSVGPanZoom/./src/ui/border-gradient.js","webpack://ReactSVGPanZoom/./src/utils/getDisplayName.js","webpack://ReactSVGPanZoom/./src/ui/selection.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-cursor.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-pan.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-zoom-in.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-zoom-out.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/icon-fit.jsx","webpack://ReactSVGPanZoom/./src/ui-toolbar/toolbar-button.jsx","webpack://ReactSVGPanZoom/./src/ui/detect-touch.js","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature-toggle-button.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/icon-arrow.jsx","webpack://ReactSVGPanZoom/./src/ui-miniature/miniature-mask.jsx","webpack://ReactSVGPanZoom/./src/uncontrolled-viewer.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__2__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","x","y","matrix","identity","applyToPoint","inverse","event","boundingRect","left","top","clientX","Math","round","clientY","scaleFactor","a","translationX","e","translationY","f","viewerWidth","viewerHeight","SVGPointX","SVGPointY","zoomLevel","transform","translate","scale","MODE_IDLE","start","NULL_POSITION","end","point","Array","isArray","b","applyToPoints","points","map","fromObject","parseFloat","matrixRegex","fromString","string","parsed","match","length","Error","denom","isUndefined","val","isNumeric","Number","isNaN","isFinite","isAffineMatrix","obj","tx","ty","matrices","multiply","m1","m2","rest","compose","cos","sin","PI","rotate","angle","cx","cy","cosAngle","sinAngle","rotationMatrix","rotateDEG","sx","sy","shear","shx","shy","tan","skew","ax","ay","skewDEG","toCSS","toSVG","smoothMatrix","precision","fromTriangles","t1","t2","px1","py1","px2","py2","qx1","qy1","qx2","qy2","rx1","ry1","rx2","ry2","fromDefinition","definitionOrArrayOfDefinition","mapper","descriptor","type","peg$SyntaxError","message","expected","found","location","this","captureStackTrace","peg$parse","input","options","undefined","peg$result","peg$FAILED","peg$startRuleFunctions","transformList","peg$parsetransformList","peg$startRuleFunction","peg$c0","peg$c1","peg$c2","peg$c3","peg$c4","peg$c5","peg$c6","peg$c7","peg$c8","peg$c9","peg$r0","peg$r1","peg$r2","peg$r3","peg$e0","peg$literalExpectation","peg$e1","peg$e2","peg$e3","peg$e4","peg$e5","peg$e6","peg$e7","peg$e8","peg$e9","peg$otherExpectation","peg$e10","peg$classExpectation","peg$e11","peg$e12","peg$e13","peg$f0","ts","peg$f1","concat","peg$f2","peg$f3","peg$f4","peg$f5","peg$f6","peg$f7","peg$f8","join","peg$f9","parseInt","peg$f10","peg$f11","n1","n2","peg$f12","ds","peg$f13","d1","d2","peg$f14","peg$currPos","peg$posDetailsCache","line","column","peg$expected","peg$silentFails","startRule","text","ignoreCase","parts","inverted","description","peg$computePosDetails","pos","details","charCodeAt","peg$VALIDFILENAME","filename","peg$computeLocation","startPos","endPos","loc","startPosDetails","offset","endPosDetails","peg$expect","variants","push","peg$buildStructuredError","buildMessage","s0","s1","s2","s3","s4","peg$parsewsp","peg$parsetransforms","peg$parsetransform","peg$parsecommaWsp","s5","s7","s9","s11","s13","s15","s16","s17","rule$expects","substr","peg$parsenumber","peg$parsematrix","s6","s8","peg$parsecommaWspNumber","peg$parsetranslate","peg$parsescale","peg$parsecommaWspTwoNumbers","peg$parserotate","peg$parseskewX","peg$parseskewY","peg$parsesign","peg$parsedigitSequence","peg$parsefractionalConstant","peg$parseexponent","peg$parsefloatingPointConstant","peg$parseintegerConstant","peg$parsecomma","test","charAt","peg$parsedigit","failPos","peg$buildError","child","parent","C","constructor","peg$subclass","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","class","escapedParts","part","classEscape","any","other","not","describeExpectation","hex","ch","toString","toUpperCase","replace","j","descriptions","sort","slice","describeExpected","describeFound","fromTransformAttribute","transformString","viewer","SVGAttributes","SVGAlignX","ALIGN_LEFT","SVGAlignY","ALIGN_TOP","SVGMinX","SVGMinY","SVGWidth","SVGHeight","scaleX","scaleY","scaleLevel","min","scaleMatrix","translateX","translateY","remainderY","ALIGN_CENTER","ALIGN_BOTTOM","remainderX","ALIGN_RIGHT","translationMatrix","isZoomLevelGoingOutOfBounds","limitZoomLevel","last_action","ACTION_ZOOM","scaleFactorMin","scaleFactorMax","SVGPoint","getSVGPoint","zoom","MODE_ZOOMING","cursor","props","abs","box","fitSelection","width","height","lessThanScaleFactorMin","moreThanScaleFactorMax","max","newMatrix","selectionSVGPointX","selectionSVGPointY","selectionWidth","selectionHeight","MODE_PANNING","ACTION_PAN","panLimit","delta","pan","pointer","deltaX","deltaY","initialMatrix","x1","y1","x2","y2","moveX","moveY","lastAction","miniatureOpen","console","error","doc_v1_to_v2","isNullOrUndefined","tool","tipControlledComponent","miniaturePosition","miniatureBackground","miniatureWidth","miniatureHeight","tipDeprecatedMiniatureProps","toolbarPosition","tipDeprecateToolbarProps","github_base","doc_v2_to_v3","keys","ReactSVGPanZoom","forwardRef","Viewer","children","useState","POSITION_NONE","autoPanHover","setAutoPanHover","TOOL_AUTO","setTool","setMatrix","setStart","setEnd","setMode","focus","setFocus","pinchPointDistance","prePinchMode","setMiniatureOpen","setLastAction","ViewerDOM","useRef","current","getBoundingClientRect","SVGViewBox","viewBox","hoverBorderRef","useEffect","requestAnimationFrame","panOnHover","cancelAnimationFrame","inputMatrix","POSITION_TOP","POSITION_RIGHT","POSITION_BOTTOM","POSITION_LEFT","nextValue","preventPanOutside","updateValue","getValue","version","onChangeValue","handleViewerEvent","TOOL_NONE","indexOf","target","onEventHandler","click","onClick","dblclick","onDoubleClick","mousemove","onMouseMove","mouseup","onMouseUp","mousedown","onMouseDown","touchstart","onTouchStart","touchmove","onTouchMove","touchend","onTouchEnd","touchcancel","onTouchCancel","onZoom","onPan","useImperativeHandle","SVGDeltaX","SVGDeltaY","fitToViewer","zoomOnViewerCenter","setPointOnViewerCenter","reset","openMiniature","closeMiniature","changeTool","CustomToolbar","customToolbar","CustomMiniature","customMiniature","panningWithToolAuto","TOOL_PAN","TOOL_ZOOM_IN","TOOL_ZOOM_OUT","blockChildEvents","style","display","touchAction","detectPinchGesture","position","className","ref","isEmpty","onWheel","onMouseEnter","onMouseEnterOrLeave","onMouseLeave","fill","background","pointerEvents","SVGBackground","SVGStyle","detectAutoPan","direction","startX","startY","endX","endY","toolbarProps","onChangeTool","miniatureProps","propTypes","PropTypes","number","isRequired","func","oneOf","detectWheel","bool","scaleFactorOnWheel","modifierKeys","array","disableDoubleClickZoomWithToolAuto","oneOfType","element","shape","propName","componentName","prop","types","React","Children","count","defaultProps","disableZoomWithToolAuto","Toolbar","Miniature","ViewerEvent","originalEvent","preventDefault","stopPropagation","_cacheDecomposedValue","decompose","cursurPosition","getCursorPosition","startZooming","startPanning","forceExit","buttons","stopZooming","updateZooming","stopPanning","updatePanning","reduce","modifierKey","getModifierState","WrappedComponent","RandomUID","nextUID","uid","_uid","displayName","handleChangeTool","isHorizontal","right","bottom","backgroundColor","borderRadius","flexDirection","padding","role","active","title","handleFit","ratio","zoomToFit","overflow","outline","transition","centerTranslation","tipNoViewer","eventType","ViewerMouseEvent","ViewerTouchEvent","_cachePoint","touches","touch","identifier","_cachePoints","touchesToPoints","_cacheChangedPoints","changedTouches","low1","high1","low2","high2","viewBoxString","split","filter","Boolean","index","HASH_MAP","acc","0","1","2","3","isMultiTouch","onMultiTouch","resetMode","getNextValue","hasPinchPointDistance","shouldResetPinchPointDistance","thisPinchPointDistance","sqrt","pow","previousPointDistance","svgPoint","distanceFactor","cancelable","nextValueFn","touchPosition","getTouchPosition","needPrefix","isFirefox","isWebkit","userAgent","navigator","toLowerCase","prefixID","BorderGradient","hover","setHover","gradientID","maskID","id","spreadMethod","stopColor","stopOpacity","stroke","mask","opacity","Selection","strokeOpacity","fillOpacity","ToolbarButton","change","margin","color","border","maxTouchPoints","MiniatureToggleButton","open","IconArrow","MiniatureMask","UncontrolledReactSVGPanZoom","defaultTool","svgProps"],"mappings":"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","file":"react-svg-pan-zoom.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"prop-types\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"prop-types\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactSVGPanZoom\"] = factory(require(\"react\"), require(\"prop-types\"));\n\telse\n\t\troot[\"ReactSVGPanZoom\"] = factory(root[\"React\"], root[\"PropTypes\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","export const MODE_IDLE = 'idle';\nexport const MODE_PANNING = 'panning';\nexport const MODE_ZOOMING = 'zooming';\n\nexport const TOOL_AUTO = 'auto';\nexport const TOOL_NONE = 'none';\nexport const TOOL_PAN = 'pan';\nexport const TOOL_ZOOM_IN = 'zoom-in';\nexport const TOOL_ZOOM_OUT = 'zoom-out';\n\nexport const POSITION_NONE = 'none';\nexport const POSITION_TOP = 'top';\nexport const POSITION_RIGHT = 'right';\nexport const POSITION_BOTTOM = 'bottom';\nexport const POSITION_LEFT = 'left';\n\nexport const ACTION_ZOOM = 'zoom';\nexport const ACTION_PAN = 'pan';\n\nexport const ALIGN_CENTER = 'center';\nexport const ALIGN_LEFT = 'left';\nexport const ALIGN_RIGHT = 'right';\nexport const ALIGN_TOP = 'top';\nexport const ALIGN_BOTTOM = 'bottom';\n\nexport const NULL_POSITION = {x: null, y: null};\nexport const INITIAL_VALUE = {}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import {TOOL_NONE, MODE_IDLE, NULL_POSITION} from '../constants';\nimport {\n  identity,\n  fromObject,\n  inverse,\n  applyToPoint,\n  transform,\n  translate,\n  scale\n} from 'transformation-matrix';\n\n/**\n * Export x,y coords relative to SVG\n * @param x\n * @param y\n * @param matrix\n * @returns {*|{x, y}|{x: number, y: number}}\n */\nexport function getSVGPoint(x, y, matrix = identity()) {\n  return applyToPoint(inverse(matrix), {x, y});\n}\n\n/**\n * Export x,y coords relative to SVG\n * @param event\n * @param boundingRect\n * @returns {*|{x, y}|{x: number, y: number}}\n */\nexport function getCursorPosition(event, boundingRect) {\n    const {left, top} = boundingRect;\n    const x = event.clientX - Math.round(left);\n    const y = event.clientY - Math.round(top);\n    return {x, y}\n}\n\n/**\n * Decompose matrix to scale and translate\n * @param matrix\n * @returns {{scaleFactor: number, translationX: number, translationY: number}}\n */\nexport function decompose(matrix) {\n  return {\n    scaleFactor: matrix.a,\n    translationX: matrix.e,\n    translationY: matrix.f\n  }\n}\n\n/**\n * @param viewerWidth\n * @param viewerHeight\n * @param SVGPointX\n * @param SVGPointY\n * @param zoomLevel\n * @returns {Object}\n */\nexport function setPointOnViewerCenter(viewerWidth, viewerHeight, SVGPointX, SVGPointY, zoomLevel) {\n  let matrix = transform(\n    translate(-SVGPointX + viewerWidth / 2, -SVGPointY + viewerHeight / 2),   //4\n    translate(SVGPointX, SVGPointY),                                          //3\n    scale(zoomLevel, zoomLevel),                                              //2\n    translate(-SVGPointX, -SVGPointY)                                         //1\n  );\n\n  return {\n    mode: MODE_IDLE,\n    matrix,\n  };\n}\n\n/**\n *\n * @returns {Object}\n */\nexport function reset() {\n  return {\n    mode: MODE_IDLE,\n    matrix: identity()\n  };\n}\n\n/**\n *\n * @returns {Object}\n */\nexport function resetMode() {\n  return {\n    mode: MODE_IDLE,\n    start: NULL_POSITION,\n    end: NULL_POSITION,\n  }\n}\n","/**\n * Calculate a point transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param  point {Point} Point\n * @returns {Point} Point\n */\nexport function applyToPoint (matrix, point) {\n  return Array.isArray(point) ? [\n    matrix.a * point[0] + matrix.c * point[1] + matrix.e,\n    matrix.b * point[0] + matrix.d * point[1] + matrix.f\n  ] : {\n    x: matrix.a * point.x + matrix.c * point.y + matrix.e,\n    y: matrix.b * point.x + matrix.d * point.y + matrix.f\n  }\n}\n\n/**\n * Calculate an array of points transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param points {Point[]} Array of point\n * @returns {Point[]} Array of point\n */\nexport function applyToPoints (matrix, points) {\n  return points.map(point => applyToPoint(matrix, point))\n}\n","/**\n * Extract an affine matrix from an object that contains a,b,c,d,e,f keys\n * Any value could be a float or a string that contains a float\n * @param object {Object} Object that contains a,b,c,d,e,f keys\n * @return {Matrix} Affine Matrix\n */\nexport function fromObject (object) {\n  return {\n    a: parseFloat(object.a),\n    b: parseFloat(object.b),\n    c: parseFloat(object.c),\n    d: parseFloat(object.d),\n    e: parseFloat(object.e),\n    f: parseFloat(object.f)\n  }\n}\n","/**\n * @ignore\n * @type {RegExp}\n */\nconst matrixRegex = /^matrix\\(\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*,\\s*([0-9_+-.e]+)\\s*\\)$/i\n\n/**\n * Parse a string formatted as matrix(a,b,c,d,e,f)\n * @param string {string} String with an affine matrix\n * @returns {Matrix} Affine Matrix\n *\n * @example\n * > fromString('matrix(1,2,3,4,5,6)')\n * {a: 1, b: 2, c: 3, d: 4, c: 5, e: 6}\n */\nexport function fromString (string) {\n  const parsed = string.match(matrixRegex)\n  if (parsed === null || parsed.length < 7) throw new Error(`'${string}' is not a matrix`)\n  return {\n    a: parseFloat(parsed[1]),\n    b: parseFloat(parsed[2]),\n    c: parseFloat(parsed[3]),\n    d: parseFloat(parsed[4]),\n    e: parseFloat(parsed[5]),\n    f: parseFloat(parsed[6])\n  }\n}\n","/**\n * Identity matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function identity () {\n  return {\n    a: 1,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: 1,\n    f: 0\n  }\n}\n","/**\n * Calculate a matrix that is the inverse of the provided matrix\n * @param matrix {Matrix} Affine Matrix\n * @returns {Matrix} Inverted Affine Matrix\n */\nexport function inverse (matrix) {\n  // http://www.wolframalpha.com/input/?i=Inverse+%5B%7B%7Ba,c,e%7D,%7Bb,d,f%7D,%7B0,0,1%7D%7D%5D\n\n  const { a, b, c, d, e, f } = matrix\n\n  const denom = a * d - b * c\n\n  return {\n    a: d / denom,\n    b: b / -denom,\n    c: c / -denom,\n    d: a / denom,\n    e: (d * e - c * f) / -denom,\n    f: (b * e - a * f) / denom\n  }\n}\n","export function isUndefined (val) {\n  return typeof val === 'undefined'\n}\n\nexport function isNumeric (n) {\n  return typeof n === 'number' &&\n    !Number.isNaN(n) &&\n    Number.isFinite(n)\n}\n\nexport function isObject (obj) {\n  return typeof obj === 'object' &&\n    obj !== null &&\n    !Array.isArray(obj)\n}\n\nexport function matchesShape (obj, keys) {\n  return keys.every(key => key in obj)\n}\n","import { isNumeric, isObject } from './utils'\n\n/**\n * Check if the object contain an affine matrix\n * @param object {Object} Generic Plain Object\n * @return {boolean} True if is an object and contains an affine matrix\n */\n\nexport function isAffineMatrix (object) {\n  return isObject(object) &&\n    'a' in object &&\n    isNumeric(object.a) &&\n    'b' in object &&\n    isNumeric(object.b) &&\n    'c' in object &&\n    isNumeric(object.c) &&\n    'd' in object &&\n    isNumeric(object.d) &&\n    'e' in object &&\n    isNumeric(object.e) &&\n    'f' in object &&\n    isNumeric(object.f)\n}\n","/**\n * Calculate a translate matrix\n * @param tx {number} Translation on axis x\n * @param [ty = 0] {number} Translation on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function translate (tx, ty = 0) {\n  return {\n    a: 1,\n    c: 0,\n    e: tx,\n    b: 0,\n    d: 1,\n    f: ty\n  }\n}\n","/**\n * Merge multiple matrices into one\n * @param matrices {Matrix[]} Array of affine matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function transform (...matrices) {\n  matrices = Array.isArray(matrices[0]) ? matrices[0] : matrices\n\n  const multiply = (m1, m2) => {\n    return {\n      a: m1.a * m2.a + m1.c * m2.b,\n      c: m1.a * m2.c + m1.c * m2.d,\n      e: m1.a * m2.e + m1.c * m2.f + m1.e,\n      b: m1.b * m2.a + m1.d * m2.b,\n      d: m1.b * m2.c + m1.d * m2.d,\n      f: m1.b * m2.e + m1.d * m2.f + m1.f\n    }\n  }\n\n  switch (matrices.length) {\n    case 0:\n      throw new Error('no matrices provided')\n\n    case 1:\n      return matrices[0]\n\n    case 2:\n      return multiply(matrices[0], matrices[1])\n\n    default:\n      const [m1, m2, ...rest] = matrices\n      const m = multiply(m1, m2)\n      return transform(m, ...rest)\n  }\n}\n\n/**\n * Merge multiple matrices into one\n * @param matrices {Matrix[]} Array of matrix\n * @returns {Matrix} Affine Matrix\n */\nexport function compose (...matrices) {\n  return transform(...matrices)\n}\n","import { isUndefined } from './utils'\nimport { translate } from './translate'\nimport { transform } from './transform'\n\nconst { cos, sin, PI } = Math\n/**\n * Calculate a rotation matrix\n * @param angle {number} Angle in radians\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotate (angle, cx, cy) {\n  const cosAngle = cos(angle)\n  const sinAngle = sin(angle)\n  const rotationMatrix = {\n    a: cosAngle,\n    c: -sinAngle,\n    e: 0,\n    b: sinAngle,\n    d: cosAngle,\n    f: 0\n  }\n  if (isUndefined(cx) || isUndefined(cy)) {\n    return rotationMatrix\n  }\n\n  return transform([\n    translate(cx, cy),\n    rotationMatrix,\n    translate(-cx, -cy)\n  ])\n}\n\n/**\n * Calculate a rotation matrix with a DEG angle\n * @param angle {number} Angle in degree\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotateDEG (angle, cx = undefined, cy = undefined) {\n  return rotate(angle * PI / 180, cx, cy)\n}\n","import { isUndefined } from './utils'\n\n/**\n * Calculate a scaling matrix\n * @param sx {number} Scaling on axis x\n * @param [sy = sx] {number} Scaling on axis y (default sx)\n * @returns {Matrix} Affine Matrix\n */\nexport function scale (sx, sy = undefined) {\n  if (isUndefined(sy)) sy = sx\n  return {\n    a: sx,\n    c: 0,\n    e: 0,\n    b: 0,\n    d: sy,\n    f: 0\n  }\n}\n","/**\n * Calculate a shear matrix\n * @param shx {number} Shear on axis x\n * @param shy {number} Shear on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function shear (shx, shy) {\n  return {\n    a: 1,\n    c: shx,\n    e: 0,\n    b: shy,\n    d: 1,\n    f: 0\n  }\n}\n","// https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/skew\nconst { tan } = Math\n\n/**\n * Calculate a skew matrix\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skew (ax, ay) {\n  return {\n    a: 1,\n    c: tan(ax),\n    e: 0,\n    b: tan(ay),\n    d: 1,\n    f: 0\n  }\n}\n\n/**\n * Calculate a skew matrix using DEG angles\n * @param ax {number} Skew on axis x\n * @param ay {number} Skew on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function skewDEG (ax, ay) {\n  return skew(ax * Math.PI / 180, ay * Math.PI / 180)\n}\n","/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toCSS (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toSVG (matrix) {\n  return toString(matrix)\n}\n\n/**\n * Serialize an affine matrix to a string that can be used with CSS or SVG\n * @param matrix {Matrix} Affine Matrix\n * @returns {string} String that contains an affine matrix formatted as matrix(a,b,c,d,e,f)\n */\nexport function toString (matrix) {\n  return `matrix(${matrix.a},${matrix.b},${matrix.c},${matrix.d},${matrix.e},${matrix.f})`\n}\n","/**\n * Rounds all elements of the given matrix using the given precision\n * @param matrix {Matrix} An affine matrix to round\n * @param [precision] {number} A precision to use for Math.round. Defaults to 10000000000 (meaning which rounds to the 10th digit after the comma).\n * @returns {Matrix} The rounded Affine Matrix\n */\nexport function smoothMatrix (matrix, precision = 10000000000) {\n  return {\n    a: Math.round(matrix.a * precision) / precision,\n    b: Math.round(matrix.b * precision) / precision,\n    c: Math.round(matrix.c * precision) / precision,\n    d: Math.round(matrix.d * precision) / precision,\n    e: Math.round(matrix.e * precision) / precision,\n    f: Math.round(matrix.f * precision) / precision\n  }\n}\n","import { inverse } from './inverse'\nimport { transform } from './transform'\nimport { smoothMatrix } from './smoothMatrix'\n\n/**\n * Returns a matrix that transforms a triangle t1 into another triangle t2, or throws an exception if it is impossible.\n * @param t1 {Point[]} Array of points containing the three points for the first triangle\n * @param t2 {Point[]} Array of points containing the three points for the second triangle\n * @returns {Matrix} Matrix which transforms t1 to t2\n * @throws Exception if the matrix becomes not invertible\n */\nexport function fromTriangles (t1, t2) {\n  // point p = first point of the triangle\n  const px1 = t1[0].x != null ? t1[0].x : t1[0][0]\n  const py1 = t1[0].y != null ? t1[0].y : t1[0][1]\n  const px2 = t2[0].x != null ? t2[0].x : t2[0][0]\n  const py2 = t2[0].y != null ? t2[0].y : t2[0][1]\n\n  // point q = second point of the triangle\n  const qx1 = t1[1].x != null ? t1[1].x : t1[1][0]\n  const qy1 = t1[1].y != null ? t1[1].y : t1[1][1]\n  const qx2 = t2[1].x != null ? t2[1].x : t2[1][0]\n  const qy2 = t2[1].y != null ? t2[1].y : t2[1][1]\n\n  // point r = third point of the triangle\n  const rx1 = t1[2].x != null ? t1[2].x : t1[2][0]\n  const ry1 = t1[2].y != null ? t1[2].y : t1[2][1]\n  const rx2 = t2[2].x != null ? t2[2].x : t2[2][0]\n  const ry2 = t2[2].y != null ? t2[2].y : t2[2][1]\n\n  const r1 = {\n    a: px1 - rx1,\n    b: py1 - ry1,\n    c: qx1 - rx1,\n    d: qy1 - ry1,\n    e: rx1,\n    f: ry1\n  }\n  const r2 = {\n    a: px2 - rx2,\n    b: py2 - ry2,\n    c: qx2 - rx2,\n    d: qy2 - ry2,\n    e: rx2,\n    f: ry2\n  }\n\n  const inverseR1 = inverse(r1)\n  const affineMatrix = transform([r2, inverseR1])\n\n  // round the matrix elements to smooth the finite inversion\n  return smoothMatrix(affineMatrix)\n}\n","import { fromObject } from './fromObject'\nimport { translate } from './translate'\nimport { scale } from './scale'\nimport { rotateDEG } from './rotate'\nimport { skewDEG } from './skew'\nimport { shear } from './shear'\n\n/**\n * Converts array of matrix descriptor to array of matrix\n * @param definitionOrArrayOfDefinition {Object[]} Array of object describing the matrix\n * @returns {Matrix[]} Array of matrix\n *\n * @example\n * > fromDefinition([\n *  { type: 'matrix', a:1, b:2, c:3, d:4, e:5, f:6 },\n *  { type: 'translate', tx: 10, ty: 20 },\n *  { type: 'scale', sx: 2, sy: 4 },\n *  { type: 'rotate', angle: 90, cx: 50, cy: 25 },\n *  { type: 'skewX', angle: 45 },\n *  { type: 'skewY',  angle: 45 },\n *  { type: 'shear', shx: 10, shy: 20}\n * ])\n *\n * [\n *  { a: 1, b: 2, c: 3, d: 4, e: 5, f: 6 },\n *  { a: 1, c: 0, e: 10, b: 0, d: 1, f: 20 },\n *  { a: 2, c: 0, e: 0, b: 0, d: 4, f: 0 },\n *  { a: 6.123, c: -1, e: 0, b: 1, d: 6.123, f: 0 },\n *  { a: 1, c: 0.99.., e: 0, b: 0, d: 1, f: 0 },\n *  { a: 1, c: 0, e: 0, b: 0.99, d: 1, f: 0 },\n *  { a: 1, c: 10, e: 0, b: 20, d: 1, f: 0 }\n * ]\n **/\nexport function fromDefinition (definitionOrArrayOfDefinition) {\n  return Array.isArray(definitionOrArrayOfDefinition)\n    ? definitionOrArrayOfDefinition.map(mapper)\n    : mapper(definitionOrArrayOfDefinition)\n\n  function mapper (descriptor) {\n    switch (descriptor.type) {\n      case 'matrix':\n        if ('a' in descriptor &&\n          'b' in descriptor &&\n          'c' in descriptor &&\n          'd' in descriptor &&\n          'e' in descriptor &&\n          'f' in descriptor\n        ) {\n          return fromObject(descriptor)\n        } else {\n          throw new Error('MISSING_MANDATORY_PARAM')\n        }\n\n      case 'translate':\n        if (!('tx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('ty' in descriptor) return translate(descriptor.tx, descriptor.ty)\n\n        return translate(descriptor.tx)\n\n      case 'scale':\n        if (!('sx' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('sy' in descriptor) return scale(descriptor.sx, descriptor.sy)\n\n        return scale(descriptor.sx)\n\n      case 'rotate':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n\n        if ('cx' in descriptor && 'cy' in descriptor) {\n          return rotateDEG(descriptor.angle, descriptor.cx, descriptor.cy)\n        }\n        return rotateDEG(descriptor.angle)\n\n      case 'skewX':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(descriptor.angle, 0)\n\n      case 'skewY':\n        if (!('angle' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return skewDEG(0, descriptor.angle)\n\n      case 'shear':\n        if (!('shx' in descriptor && 'shy' in descriptor)) throw new Error('MISSING_MANDATORY_PARAM')\n        return shear(descriptor.shx, descriptor.shy)\n\n      default:\n        throw new Error('UNSUPPORTED_DESCRIPTOR')\n    }\n  }\n}\n","// Generated by PEG.js v0.11.0-master.30f3260, https://pegjs.org/\n\nfunction peg$subclass(child, parent) {\n  function C() { this.constructor = child; }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message = message;\n  this.expected = expected;\n  this.found = found;\n  this.location = location;\n  this.name = \"SyntaxError\";\n\n  // istanbul ignore next\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function(expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n\n    class: function(expectation) {\n      var escapedParts = expectation.parts.map(function(part) {\n        return Array.isArray(part)\n          ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n          : classEscape(part);\n      });\n\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n    },\n\n    any: function() {\n      return \"any character\";\n    },\n\n    end: function() {\n      return \"end of input\";\n    },\n\n    other: function(expectation) {\n      return expectation.description;\n    },\n\n    not: function(expectation) {\n      return \"not \" + describeExpectation(expectation.expected);\n    }\n  };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\"/g,  \"\\\\\\\"\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\]/g, \"\\\\]\")\n      .replace(/\\^/g, \"\\\\^\")\n      .replace(/-/g,  \"\\\\-\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n\n  var peg$FAILED = {};\n\n  var peg$startRuleFunctions = { transformList: peg$parsetransformList };\n  var peg$startRuleFunction = peg$parsetransformList;\n\n  var peg$c0 = \"matrix\";\n  var peg$c1 = \"(\";\n  var peg$c2 = \")\";\n  var peg$c3 = \"translate\";\n  var peg$c4 = \"scale\";\n  var peg$c5 = \"rotate\";\n  var peg$c6 = \"skewX\";\n  var peg$c7 = \"skewY\";\n  var peg$c8 = \",\";\n  var peg$c9 = \".\";\n\n  var peg$r0 = /^[eE]/;\n  var peg$r1 = /^[+\\-]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[ \\t\\r\\n]/;\n\n  var peg$e0 = peg$literalExpectation(\"matrix\", false);\n  var peg$e1 = peg$literalExpectation(\"(\", false);\n  var peg$e2 = peg$literalExpectation(\")\", false);\n  var peg$e3 = peg$literalExpectation(\"translate\", false);\n  var peg$e4 = peg$literalExpectation(\"scale\", false);\n  var peg$e5 = peg$literalExpectation(\"rotate\", false);\n  var peg$e6 = peg$literalExpectation(\"skewX\", false);\n  var peg$e7 = peg$literalExpectation(\"skewY\", false);\n  var peg$e8 = peg$literalExpectation(\",\", false);\n  var peg$e9 = peg$otherExpectation(\"fractionalConstant\");\n  var peg$e10 = peg$classExpectation([\"e\", \"E\"], false, false);\n  var peg$e11 = peg$classExpectation([\"+\", \"-\"], false, false);\n  var peg$e12 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e13 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false);\n\n  var peg$f0 = function(ts) { return ts; };\n  var peg$f1 = function(t, ts) { return t.concat(ts) };\n  var peg$f2 = function(a, b, c, d, e, f) {\n        return [{type: 'matrix', a: a, b: b, c: c, d: d, e: e, f: f}];\n      };\n  var peg$f3 = function(tx, ty) {\n        var t = {type: 'translate', tx: tx};\n        if (ty) t.ty = ty;\n        return [t];\n      };\n  var peg$f4 = function(sx, sy) {\n        var s = {type:'scale', sx: sx};\n        if (sy) s.sy = sy;\n        return [s];\n      };\n  var peg$f5 = function(angle, c) {\n        var r = {type:'rotate', angle: angle};\n        if (c) {\n          r.cx = c[0];\n          r.cy = c[1];\n        }\n        return [r];\n      };\n  var peg$f6 = function(angle) {\n        return [{type: 'skewX', angle: angle}];\n      };\n  var peg$f7 = function(angle) {\n        return [{type: 'skewY', angle: angle}];\n      };\n  var peg$f8 = function(f) { return parseFloat(f.join(\"\")); };\n  var peg$f9 = function(i) { return parseInt(i.join(\"\")); };\n  var peg$f10 = function(n) { return n; };\n  var peg$f11 = function(n1, n2) { return [n1, n2]; };\n  var peg$f12 = function(ds) { return ds.join(\"\"); };\n  var peg$f13 = function(d1, d2) { return [d1 ? d1.join(\"\") : null, \".\", d2.join(\"\")].join(\"\"); };\n  var peg$f14 = function(d) { return d.join(\"\"); };\n\n  var peg$currPos = 0;\n  var peg$savedPos = 0;\n  var peg$posDetailsCache = [{ line: 1, column: 1 }];\n  var peg$expected = [];\n  var peg$silentFails = 0;\n\n  var peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function offset() {\n    return peg$savedPos;\n  }\n\n  function range() {\n    return [peg$savedPos, peg$currPos];\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  var peg$VALIDFILENAME = typeof options.filename === \"string\" && options.filename.length > 0;\n  function peg$computeLocation(startPos, endPos) {\n    var loc = {};\n\n    if ( peg$VALIDFILENAME ) loc.filename = options.filename;\n\n    var startPosDetails = peg$computePosDetails(startPos);\n    loc.start = {\n      offset: startPos,\n      line: startPosDetails.line,\n      column: startPosDetails.column\n    };\n\n    var endPosDetails = peg$computePosDetails(endPos);\n    loc.end = {\n      offset: endPos,\n      line: endPosDetails.line,\n      column: endPosDetails.column\n    };\n\n    return loc;\n  }\n\n  function peg$begin() {\n    peg$expected.push({ pos: peg$currPos, variants: [] });\n  }\n\n  function peg$expect(expected) {\n    var top = peg$expected[peg$expected.length - 1];\n\n    if (peg$currPos < top.pos) { return; }\n\n    if (peg$currPos > top.pos) {\n      top.pos = peg$currPos;\n      top.variants = [];\n    }\n\n    top.variants.push(expected);\n  }\n\n  function peg$end(invert) {\n    var expected = peg$expected.pop();\n    var top = peg$expected[peg$expected.length - 1];\n    var variants = expected.variants;\n\n    if (top.pos !== expected.pos) { return; }\n\n    if (invert) {\n      variants = variants.map(function(e) {\n        return e.type === \"not\" ? e.expected : { type: \"not\", expected: e };\n      });\n    }\n\n    Array.prototype.push.apply(top.variants, variants);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$buildError() {\n    var expected = peg$expected[0];\n    var failPos = expected.pos;\n\n    return peg$buildStructuredError(\n      expected.variants,\n      failPos < input.length ? input.charAt(failPos) : null,\n      failPos < input.length\n        ? peg$computeLocation(failPos, failPos + 1)\n        : peg$computeLocation(failPos, failPos)\n    );\n  }\n\n  function peg$parsetransformList() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    s2 = peg$parsetransforms();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = [];\n    s4 = peg$parsewsp();\n    while (s4 !== peg$FAILED) {\n      s3.push(s4);\n      s4 = peg$parsewsp();\n    }\n    peg$savedPos = s0;\n    s0 = peg$f0(s2);\n\n    return s0;\n  }\n\n  function peg$parsetransforms() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsetransform();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsecommaWsp();\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsecommaWsp();\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsetransforms();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f1(s1, s3);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetransform();\n    }\n\n    return s0;\n  }\n\n  function peg$parsetransform() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$parsematrix();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetranslate();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsescale();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parserotate();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseskewX();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parseskewY();\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsematrix() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16, s17;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e0);\n    if (input.substr(peg$currPos, 6) === peg$c0) {\n      s1 = peg$c0;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWsp();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenumber();\n            if (s7 !== peg$FAILED) {\n              s8 = peg$parsecommaWsp();\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parsenumber();\n                if (s9 !== peg$FAILED) {\n                  s10 = peg$parsecommaWsp();\n                  if (s10 !== peg$FAILED) {\n                    s11 = peg$parsenumber();\n                    if (s11 !== peg$FAILED) {\n                      s12 = peg$parsecommaWsp();\n                      if (s12 !== peg$FAILED) {\n                        s13 = peg$parsenumber();\n                        if (s13 !== peg$FAILED) {\n                          s14 = peg$parsecommaWsp();\n                          if (s14 !== peg$FAILED) {\n                            s15 = peg$parsenumber();\n                            if (s15 !== peg$FAILED) {\n                              s16 = [];\n                              s17 = peg$parsewsp();\n                              while (s17 !== peg$FAILED) {\n                                s16.push(s17);\n                                s17 = peg$parsewsp();\n                              }\n                              rule$expects(peg$e2);\n                              if (input.charCodeAt(peg$currPos) === 41) {\n                                s17 = peg$c2;\n                                peg$currPos++;\n                              } else {\n                                s17 = peg$FAILED;\n                              }\n                              if (s17 !== peg$FAILED) {\n                                peg$savedPos = s0;\n                                s0 = peg$f2(s5, s7, s9, s11, s13, s15);\n                              } else {\n                                peg$currPos = s0;\n                                s0 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s0;\n                              s0 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetranslate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e3);\n    if (input.substr(peg$currPos, 9) === peg$c3) {\n      s1 = peg$c3;\n      peg$currPos += 9;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f3(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsescale() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e4);\n    if (input.substr(peg$currPos, 5) === peg$c4) {\n      s1 = peg$c4;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f4(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parserotate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e5);\n    if (input.substr(peg$currPos, 6) === peg$c5) {\n      s1 = peg$c5;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspTwoNumbers();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f5(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewX() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e6);\n    if (input.substr(peg$currPos, 5) === peg$c6) {\n      s1 = peg$c6;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f6(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewY() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e7);\n    if (input.substr(peg$currPos, 5) === peg$c7) {\n      s1 = peg$c7;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f7(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = peg$parsefloatingPointConstant();\n    if (s3 !== peg$FAILED) {\n      s2 = [s2, s3];\n      s1 = s2;\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f8(s1);\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parseintegerConstant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$f9(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspNumber() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f10(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspTwoNumbers() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecommaWsp();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenumber();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f11(s2, s4);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWsp() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = [];\n      s4 = peg$parsewsp();\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = peg$parsewsp();\n      }\n      s1 = [s1, s2, s3];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsecomma();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsewsp();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsewsp();\n        }\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e8);\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c8;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseintegerConstant() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f12(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefloatingPointConstant() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsefractionalConstant();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseexponent();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s1 = [s1, s2];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseexponent();\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefractionalConstant() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e9);\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c9;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f13(s1, s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s2 = peg$c9;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f14(s1);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e10);\n    if (peg$r0.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        s1 = [s1, s2, s3];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e11);\n    if (peg$r1.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigitSequence() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = [];\n    s1 = peg$parsedigit();\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parsedigit();\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e12);\n    if (peg$r2.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e13);\n    if (peg$r3.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  peg$begin();\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$expect(peg$endExpectation());\n    }\n\n    throw peg$buildError();\n  }\n}\n\nexport {\n  peg$SyntaxError as SyntaxError,\n  peg$parse as parse\n};\n\nexport default {\n  SyntaxError: peg$SyntaxError,\n  parse: peg$parse\n};\n","import { parse } from './fromTransformAttribute.autogenerated'\n\n/**\n * Parser for SVG Trasform Attribute http://www.w3.org/TR/SVG/coords.html#TransformAttribute <br/>\n * Warning: This should be considered BETA until it is released a stable version of pegjs.\n * @param transformString {string} Transform string as defined by w3 Consortium\n * @returns {Matrix[]} Array of MatrixDescriptor\n *\n * @example\n * > fromTransformAttribute('translate(-10,-10) scale(2,2) translate(10,10)')\n * [\n *  { type: 'translate', tx: -10, ty: -10},\n *  { type: 'scale', sx: 2, sy: 2 },\n *  { type: 'translate', tx: 10, ty: 10}\n * ]\n *\n * > compose(fromDefinition(fromTransformAttribute('translate(-10, -10) scale(10, 10)')))\n * { a: 10, c: 0, e: -10, b: 0, d: 10, f: -10 }\n */\nexport function fromTransformAttribute (transformString) {\n  return parse(transformString)\n}\n","export * from './applyToPoint'\nexport * from './fromObject'\nexport * from './fromString'\nexport * from './identity'\nexport * from './inverse'\nexport * from './isAffineMatrix'\nexport * from './rotate'\nexport * from './scale'\nexport * from './shear'\nexport * from './skew'\nexport * from './toString'\nexport * from './transform'\nexport * from './translate'\nexport * from './fromTriangles'\nexport * from './smoothMatrix'\nexport * from './fromDefinition'\nexport * from './fromTransformAttribute'\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\n\nimport {\n  ACTION_ZOOM, MODE_IDLE, MODE_ZOOMING,\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM,\n  NULL_POSITION\n} from '../constants';\nimport {getSVGPoint} from './common';\nimport calculateBox from '../utils/calculateBox';\n\nfunction lessThanScaleFactorMin (matrix, scaleFactor, scaleFactorMin) {\n  return scaleFactorMin && (matrix.d * scaleFactor) <= scaleFactorMin;\n}\n\nfunction moreThanScaleFactorMax (matrix, scaleFactor, scaleFactorMax) {\n  return scaleFactorMax && (matrix.d * scaleFactor) >= scaleFactorMax;\n}\n\nexport function isZoomLevelGoingOutOfBounds(matrix, scaleFactor, scaleFactorMin, scaleFactorMax) {\n  return lessThanScaleFactorMin(matrix, scaleFactor, scaleFactorMin) && scaleFactor < 1 ||\n          moreThanScaleFactorMax(matrix, scaleFactor, scaleFactorMax) && scaleFactor > 1;\n}\n\nexport function limitZoomLevel(matrix, scaleFactorMin, scaleFactorMax) {\n  let scaleLevel = matrix.a;\n\n  if(scaleFactorMin != null) {\n    // limit minimum zoom\n    scaleLevel = Math.max(scaleLevel, scaleFactorMin);\n  }\n\n  if(scaleFactorMax != null) {\n    // limit maximum zoom\n    scaleLevel = Math.min(scaleLevel, scaleFactorMax);\n  }\n\n  return {\n    ...matrix,\n    a: scaleLevel,\n    d: scaleLevel\n  };\n}\n\nexport function zoom(matrix, SVGPoint, scaleFactor, scaleFactorMin, scaleFactorMax) {\n  if (isZoomLevelGoingOutOfBounds(matrix, scaleFactor, scaleFactorMin, scaleFactorMax)) {\n      return {matrix};\n  }\n  const newMatrix = transform(\n    fromObject(matrix),\n    translate(SVGPoint.x, SVGPoint.y),\n    scale(scaleFactor, scaleFactor),\n    translate(-SVGPoint.x, -SVGPoint.y)\n  );\n  return {\n    mode: MODE_IDLE,\n    matrix: limitZoomLevel(newMatrix, scaleFactorMin, scaleFactorMax),\n    start: NULL_POSITION,\n    end: NULL_POSITION,\n    last_action: ACTION_ZOOM\n  };\n}\n\nexport function fitSelection(\n  selectionSVGPointX,\n  selectionSVGPointY,\n  selectionWidth,\n  selectionHeight,\n  viewerWidth,\n  viewerHeight\n) {\n  let scaleX = viewerWidth / selectionWidth;\n  let scaleY = viewerHeight / selectionHeight;\n\n  let scaleLevel = Math.min(scaleX, scaleY);\n\n  const newMatrix = transform(\n    scale(scaleLevel, scaleLevel),                      //2\n    translate(-selectionSVGPointX, -selectionSVGPointY) //1\n  );\n\n  if(isZoomLevelGoingOutOfBounds(scaleLevel / newMatrix.d)) {\n    // Do not allow scale and translation\n    return {\n      mode: MODE_IDLE,\n      start: NULL_POSITION,\n      end: NULL_POSITION,\n    };\n  }\n\n  return {\n    mode: MODE_IDLE,\n    matrix: limitZoomLevel(newMatrix),\n    start: NULL_POSITION,\n    end: NULL_POSITION,\n    last_action: ACTION_ZOOM\n  };\n}\n\nexport function fitToViewer(viewer, SVGAttributes, SVGAlignX=ALIGN_LEFT, SVGAlignY=ALIGN_TOP) {\n  const {SVGMinX, SVGMinY, SVGWidth, SVGHeight} = SVGAttributes;\n  const {viewerWidth, viewerHeight} = viewer;\n\n  const scaleX = viewerWidth / SVGWidth;\n  const scaleY = viewerHeight / SVGHeight;\n  const scaleLevel = Math.min(scaleX, scaleY);\n\n  const scaleMatrix = scale(scaleLevel, scaleLevel);\n\n  let translateX = -SVGMinX * scaleX;\n  let translateY = -SVGMinY * scaleY;\n\n  // after fitting, SVG and the viewer will match in width (1) or in height (2)\n  if (scaleX < scaleY) {\n    //(1) match in width, meaning scaled SVGHeight <= viewerHeight\n    let remainderY = viewerHeight - scaleX * SVGHeight;\n    switch(SVGAlignY) {\n      case ALIGN_TOP:\n        translateY = -SVGMinY * scaleLevel;\n      break;\n      case ALIGN_CENTER:\n        translateY = Math.round(remainderY / 2) - SVGMinY * scaleLevel;\n      break;\n      case ALIGN_BOTTOM:\n        translateY = remainderY - SVGMinY * scaleLevel;\n      break;\n    }\n  } else {\n    //(2) match in height, meaning scaled SVGWidth <= viewerWidth\n    let remainderX = viewerWidth - scaleY * SVGWidth;\n    switch(SVGAlignX) {\n      case ALIGN_LEFT:\n        translateX = -SVGMinX * scaleLevel;\n      break;\n      case ALIGN_CENTER:\n        translateX = Math.round(remainderX / 2) - SVGMinX * scaleLevel;\n      break;\n      case ALIGN_RIGHT:\n        translateX = remainderX - SVGMinX * scaleLevel;\n      break;\n    }\n  }\n\n  const translationMatrix = translate(translateX, translateY);\n  const matrix = transform(\n    translationMatrix, //2\n    scaleMatrix        //1\n  );\n\n  if (isZoomLevelGoingOutOfBounds(scaleLevel / matrix.d)) {\n    // Do not allow scale and translation\n    return {\n      mode: MODE_IDLE,\n      start: NULL_POSITION,\n      end: NULL_POSITION,\n    };\n  }\n\n  return {\n    mode: MODE_IDLE,\n    matrix:limitZoomLevel(matrix),\n    start: NULL_POSITION,\n    end: NULL_POSITION,\n    last_action: ACTION_ZOOM\n  };\n}\n\nexport function zoomOnViewerCenter(matrix, viewer, scaleFactor, scaleFactorMin, scaleFactorMax) {\n  const {viewerWidth, viewerHeight} = viewer;\n\n  const SVGPoint = getSVGPoint(viewerWidth / 2, viewerHeight / 2, matrix);\n  return zoom(matrix, SVGPoint, scaleFactor, scaleFactorMin, scaleFactorMax);\n}\n\nexport function startZooming(viewer) {\n  return {\n    mode: MODE_ZOOMING,\n    start: viewer,\n    end: viewer\n  };\n}\n\nexport function updateZooming(mode, cursor) {\n  if (mode !== MODE_ZOOMING) throw new Error('update selection not allowed in this mode ' + mode);\n\n  return { end: cursor };\n}\n\nexport function stopZooming(cursor, start, end, matrix, scaleFactor, props, viewer) {\n  const startPos = getSVGPoint(start.x, start.y, matrix);\n  const endPos = getSVGPoint(end.x, end.y, matrix);\n  if (Math.abs(startPos.x - endPos.x) > 7 && Math.abs(startPos.y - endPos.y) > 7) {\n    // either fit around the box...\n    const box = calculateBox(startPos, endPos);\n    return fitSelection(box.x, box.y, box.width, box.height, viewer.viewerWidth, viewer.viewerHeight);\n  } else {\n    // ...or zoom in around the cursor\n    const SVGPoint = getSVGPoint(cursor.x, cursor.y, matrix);\n    const { scaleFactorMin, scaleFactorMax } = props;\n    return zoom(matrix, SVGPoint, scaleFactor, scaleFactorMin, scaleFactorMax);\n  }\n}\n","import {ACTION_PAN, MODE_IDLE, MODE_PANNING, NULL_POSITION} from '../constants';\nimport {getSVGPoint} from './common';\nimport {fromObject, translate, transform, applyToPoints, inverse} from 'transformation-matrix';\n\n/**\n *\n * @param SVGDeltaX\n * @param SVGDeltaY\n * @param panLimit\n * @returns {Object}\n */\nexport function pan(initialMatrix, delta, viewer, SVGAttributes, panLimit = undefined) {\n  let matrix = transform(\n    fromObject(initialMatrix),              //2\n    translate(delta.x, delta.y) //1\n  );\n\n  // apply pan limits\n  if (panLimit) {\n    const {viewerWidth, viewerHeight} = viewer;\n    const {SVGMinX, SVGMinY, SVGWidth, SVGHeight} = SVGAttributes;\n\n    let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(matrix, [\n      {x: SVGMinX + panLimit, y: SVGMinY + panLimit},\n      {x: SVGMinX + SVGWidth - panLimit, y: SVGMinY + SVGHeight - panLimit}\n    ]);\n\n    //x limit\n    let moveX = 0;\n    if (viewerWidth - x1 < 0)\n      moveX = viewerWidth - x1;\n    else if (x2 < 0) moveX = -x2;\n\n\n    //y limit\n    let moveY = 0;\n    if (viewerHeight - y1 < 0)\n      moveY = viewerHeight - y1;\n    else if (y2 < 0) moveY = -y2;\n\n    //apply limits\n    matrix = transform(\n      translate(moveX, moveY),\n      matrix\n    )\n  }\n  return {\n    mode: MODE_IDLE,\n    matrix,\n    lastAction: ACTION_PAN\n  };\n}\n\nexport function startPanning(viewer) {\n  return {\n    mode: MODE_PANNING,\n    start: viewer,\n    end: viewer,\n    last_action: ACTION_PAN\n  };\n}\n\nexport function updatePanning(cursor, start, end, matrix, panLimit, mode, viewer, SVGAttributes) {\n  if (mode !== MODE_PANNING) throw new Error('update pan not allowed in this mode ' + mode);\n\n  let startPos = getSVGPoint(end.x, end.y, matrix);\n  let endPos = getSVGPoint(cursor.x, cursor.y, matrix);\n\n  let delta = {x: endPos.x - startPos.x, y: endPos.y - startPos.y};\n\n  return {\n    ...pan(matrix, delta, viewer, SVGAttributes, panLimit),\n    mode: MODE_PANNING,\n    end: cursor,\n    last_action: ACTION_PAN\n  };\n}\n\nexport function stopPanning() {\n  return {\n    mode: MODE_IDLE,\n    start: NULL_POSITION,\n    end: NULL_POSITION,\n    last_action: ACTION_PAN\n  }\n}\n\nexport function autoPanIfNeeded(viewer, pointer, matrix) {\n  let deltaX = 0;\n  let deltaY = 0;\n\n  if (pointer.y <= 20) deltaY = 2;\n  if (viewer.viewerWidth - pointer.x <= 20) deltaX = -2;\n  if (viewer.viewerHeight - pointer.y <= 20) deltaY = -2;\n  if (pointer.x <= 20) deltaX = 2;\n\n  deltaX = deltaX / matrix.d;\n  deltaY = deltaY / matrix.d;\n\n  return (deltaX === 0 && deltaY === 0) ? {} : pan(matrix, {x: deltaX, y: deltaY}, null, viewer);\n}\n","\nexport function openMiniature() {\n  return {\n    miniatureOpen: true\n  };\n}\n\nexport function closeMiniature() {\n  return {\n    miniatureOpen: false\n  };\n}\n","import {isNullOrUndefined} from \"./utils/is\";\n\nconst github_base = 'https://github.com/chrvadala/react-svg-pan-zoom/blob/master'\n\nconst doc_v1_to_v2 = github_base + '/docs/migrate-from-v1-to-v2.md'\nconst doc_v2_to_v3 = github_base + '/docs/migrate-from-v2-to-v3.md'\n\nexport function tipNoViewer() {\n  console.error(`HEY! You are trying to use an older version of ReactSVGPanZoom. Please read here ${doc_v1_to_v2}`)\n}\n\nexport function tipControlledComponent() {\n  console.error(`HEY! With ReactSVGPanZoom >= 3 you MUST specify value and tool props. Please read here ${doc_v2_to_v3}`)\n}\n\nexport function tipDeprecatedMiniatureProps(){\n  console.error(`HEY! With ReactSVGPanZoom >= 3 the props miniaturePosition, miniatureBackground, miniatureWidth, miniatureHeight can be specified as key in the miniatureProps object. Please read here ${doc_v2_to_v3}`)\n}\n\nexport function tipDeprecateToolbarProps(){\n  console.error(`HEY! With ReactSVGPanZoom >= 3 the prop toolbarPosition can be specified as key in the toolbarProps object. Please read here ${doc_v2_to_v3}`)\n}\n\nexport function printMigrationTipsRelatedToProps(props){\n  if (isNullOrUndefined(props.tool)) tipControlledComponent()\n  // #TODO mention somethign about 'value' in vrsion 4\n  if (\n    !isNullOrUndefined(props.miniaturePosition) ||\n    !isNullOrUndefined(props.miniatureBackground) ||\n    !isNullOrUndefined(props.miniatureWidth) ||\n    !isNullOrUndefined(props.miniatureHeight)\n  ) tipDeprecatedMiniatureProps()\n\n\n  if (\n    !isNullOrUndefined(props.toolbarPosition)\n  ) tipDeprecateToolbarProps()\n}\n","export function isNullOrUndefined(value) {\n  return typeof value === 'undefined' || value === null\n}\n\nexport function isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n}\n","import React, {forwardRef, useState, useEffect, useRef, useImperativeHandle} from 'react';\nimport PropTypes from 'prop-types';\nimport {identity, toSVG} from 'transformation-matrix';\n//events\nimport eventFactory from './events/event-factory';\n//features\nimport {pan} from './features/pan';\nimport {reset, setPointOnViewerCenter} from './features/common';\nimport {\n  onDoubleClick,\n  onMouseDown,\n  onMouseEnterOrLeave,\n  onMouseMove,\n  onMouseUp,\n  onWheel\n} from './features/interactions';\nimport parseViewBox from './utils/ViewBoxParser';\nimport {isEmpty} from \"./utils/is\";\n\nimport {onTouchCancel, onTouchEnd, onTouchMove, onTouchStart} from './features/interactions-touch';\n\nimport {fitSelection, fitToViewer, zoom, zoomOnViewerCenter} from './features/zoom';\nimport {closeMiniature, openMiniature} from './features/miniature';\n//ui\nimport cursorPolyfill from './ui/cursor-polyfill';\nimport BorderGradient from './ui/border-gradient';\nimport Selection from './ui/selection';\nimport Toolbar from './ui-toolbar/toolbar';\nimport detectTouch from './ui/detect-touch';\nimport Miniature from './ui-miniature/miniature'\n\nimport {\n  ACTION_PAN,\n  ACTION_ZOOM,\n  ALIGN_BOTTOM,\n  ALIGN_CENTER,\n  ALIGN_LEFT,\n  ALIGN_RIGHT,\n  ALIGN_TOP,\n  MODE_IDLE,\n  MODE_PANNING,\n  MODE_ZOOMING,\n  POSITION_BOTTOM,\n  POSITION_LEFT,\n  POSITION_NONE,\n  POSITION_RIGHT,\n  POSITION_TOP,\n  TOOL_AUTO,\n  TOOL_NONE,\n  TOOL_PAN,\n  TOOL_ZOOM_IN,\n  TOOL_ZOOM_OUT,\n  NULL_POSITION\n} from './constants';\nimport {printMigrationTipsRelatedToProps} from \"./migration-tips\";\n\nconst ReactSVGPanZoom = forwardRef((props, Viewer) => {\n  if (process.env.NODE_ENV !== 'production') {\n    printMigrationTipsRelatedToProps(props)\n  }\n  const {\n    width: viewerWidth,\n    height: viewerHeight,\n    scaleFactorMin,\n    scaleFactorMax,\n    children\n  } = props;\n  const viewer = {viewerWidth, viewerHeight};\n\n  const [autoPanIsRunning, setAutoPanning] = useState(true);\n  const [autoPanHover, setAutoPanHover] = useState(POSITION_NONE);\n  const [tool, setTool] = useState(TOOL_AUTO);\n\n  const [matrix, setMatrix] = useState(identity());\n  const [start, setStart] = useState(NULL_POSITION);\n  const [end, setEnd] = useState(NULL_POSITION);\n\n  const [mode, setMode] = useState(MODE_IDLE);\n  const [focus, setFocus] = useState(false);\n  const [pinchPointDistance, setPinchPointDistance] = useState(null);\n  const [prePinchMode, setPrePinchMode] = useState(null);\n  const [miniatureOpen, setMiniatureOpen] = useState(true);\n  const [lastAction, setLastAction] = useState(null);\n\n  const ViewerDOM = useRef(null);\n  const boundingRect = ViewerDOM.current && ViewerDOM.current.getBoundingClientRect();\n\n  const {viewBox: SVGViewBox} = children.props;\n  const {SVGMinX, SVGMinY, SVGWidth, SVGHeight} = SVGViewBox ? parseViewBox(SVGViewBox) : {\n    SVGHeight: children.props.height,\n    SVGWidth: children.props.width,\n    SVGMinX: 0,\n    SVGMinY: 0\n  };\n  const SVGAttributes = {SVGMinX, SVGMinY, SVGWidth, SVGHeight};\n\n  const hoverBorderRef = useRef()\n  useEffect(() => {\n    hoverBorderRef.current = requestAnimationFrame(() => panOnHover(matrix));\n    return () => cancelAnimationFrame(hoverBorderRef.current);\n  }, [autoPanHover]);\n\n  const panOnHover = (inputMatrix) => {\n    let deltaX = 0;\n    let deltaY = 0;\n    \n    if(autoPanHover === POSITION_NONE){\n      cancelAnimationFrame(hoverBorderRef.current)\n    } else {\n      switch (autoPanHover) {\n        case POSITION_TOP:\n            deltaY = -2;\n          break;\n    \n        case POSITION_RIGHT:\n            deltaX = 2;\n          break;\n    \n        case POSITION_BOTTOM:\n            deltaY = 2;\n          break;\n    \n        case POSITION_LEFT:\n            deltaX = -2;\n          break;\n      }\n      const delta =  {x: deltaX / inputMatrix.d, y: deltaY / inputMatrix.d};\n      const nextValue = pan(inputMatrix, delta, viewer, SVGAttributes, props.preventPanOutside ? 20 : undefined);\n      updateValue(nextValue);\n      hoverBorderRef.current = requestAnimationFrame(() => panOnHover(nextValue.matrix));\n    }\n  }\n\n  // on value change\n  useEffect(() => {\n    let {onChangeValue, onZoom, onPan} = props;\n    const nextValue = getValue();\n    if (onChangeValue) onChangeValue(nextValue);\n    if (nextValue.lastAction) {\n      if (onZoom && nextValue.lastAction === ACTION_ZOOM) onZoom(nextValue);\n      if (onPan && nextValue.lastAction === ACTION_PAN) onPan(nextValue);\n    }\n  }, [\n    matrix, start, end,\n    mode, focus, pinchPointDistance, prePinchMode, miniatureOpen,\n    lastAction,\n  ]);\n\n  function getValue() {\n    return {\n      //directly from props:\n      viewerWidth,\n      viewerHeight,\n      scaleFactorMin,\n      scaleFactorMax,\n\n      //from child props:\n      SVGAttributes,\n\n      //\n      matrix,\n      start,\n      end,\n\n      //\n      mode,\n      focus,\n      pinchPointDistance,\n      prePinchMode,\n      miniatureOpen,\n      lastAction,\n\n      //\n      version: 3,\n    };\n  }\n\n  function updateValue(nextValue) {\n    const { matrix, start, end, mode, lastAction, miniatureOpen} = nextValue;\n    if('matrix' in nextValue) setMatrix(matrix);\n    if('start' in nextValue) setStart(start);\n    if('end' in nextValue) setEnd(end);\n\n    if('mode' in nextValue) setMode(mode);\n    if('focus' in nextValue) setFocus(focus);\n    if('lastAction' in nextValue) setLastAction(lastAction);\n\n    if('miniatureOpen' in nextValue) setMiniatureOpen(miniatureOpen);\n\n    const { onChangeValue } = props;\n    if(onChangeValue) onChangeValue(getValue());\n  }\n\n  /** ReactSVGPanZoom methods **/\n  useImperativeHandle(Viewer, () => ({\n\n    pan(SVGDeltaX, SVGDeltaY) {\n      const nextValue = pan(matrix, {x: SVGDeltaX, y: SVGDeltaY}, viewer, SVGAttributes, props.preventPanOutside ? 20 : undefined);\n      updateValue(nextValue);\n    },\n\n    zoom(SVGPointX, SVGPointY, scaleFactor) {\n      const nextValue = zoom(matrix, {x: SVGPointX, y: SVGPointY}, scaleFactor, scaleFactorMin, scaleFactorMax);\n      updateValue(nextValue);\n    },\n\n    fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\n      const nextValue = fitSelection(\n        selectionSVGPointX,\n        selectionSVGPointY,\n        selectionWidth,\n        selectionHeight,\n        viewerWidth,\n        viewerHeight\n      );\n      updateValue(nextValue);\n    },\n\n    fitToViewer(SVGAlignX = ALIGN_LEFT, SVGAlignY = ALIGN_TOP) {\n      const nextValue = fitToViewer(viewer, SVGAttributes, SVGAlignX, SVGAlignY);\n      updateValue(nextValue);\n    },\n\n    zoomOnViewerCenter(scaleFactor) {\n      const nextValue = zoomOnViewerCenter(matrix, viewer, scaleFactor, scaleFactorMin, scaleFactorMax);\n      updateValue(nextValue);\n    },\n\n    setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\n      const nextValue = setPointOnViewerCenter(viewerWidth, viewerHeight, SVGPointX, SVGPointY, zoomLevel);\n      updateValue(nextValue);\n    },\n\n    reset() {\n      const nextValue = reset();\n      updateValue(nextValue);\n    },\n\n    openMiniature() {\n      const nextValue = openMiniature();\n      updateValue(nextValue);\n    },\n\n    closeMiniature() {\n      const nextValue = closeMiniature();\n      updateValue(nextValue);\n    },\n\n    changeTool(tool) {\n      setTool(tool);\n    }\n  }));\n\n  /** ReactSVGPanZoom internals **/\n  function handleViewerEvent(event) {\n    if (!([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0)) return;\n    if (event.target === ViewerDOM) return;\n\n    let eventsHandler = {\n      click: props.onClick,\n      dblclick: props.onDoubleClick,\n\n      mousemove: props.onMouseMove,\n      mouseup: props.onMouseUp,\n      mousedown: props.onMouseDown,\n\n      touchstart: props.onTouchStart,\n      touchmove: props.onTouchMove,\n      touchend: props.onTouchEnd,\n      touchcancel: props.onTouchCancel,\n    };\n\n    const onEventHandler = eventsHandler[event.type];\n    if (!onEventHandler) return;\n\n    onEventHandler(eventFactory(event, matrix, boundingRect));\n  }\n\n  /** React renderer **/\n  let {customToolbar: CustomToolbar, customMiniature: CustomMiniature} = props;\n\n  let panningWithToolAuto = tool === TOOL_AUTO\n    && mode === MODE_PANNING\n    && start.x !== end.x\n    && start.y !== end.y;\n\n  let cursor;\n\n  if (tool === TOOL_PAN)\n    cursor = cursorPolyfill(mode === MODE_PANNING ? 'grabbing' : 'grab');\n\n  if (tool === TOOL_ZOOM_IN)\n    cursor = cursorPolyfill('zoom-in');\n\n  if (tool === TOOL_ZOOM_OUT)\n    cursor = cursorPolyfill('zoom-out');\n\n  if (panningWithToolAuto)\n    cursor = cursorPolyfill('grabbing');\n\n  let blockChildEvents = [TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT].indexOf(tool) >= 0;\n  blockChildEvents = blockChildEvents || panningWithToolAuto;\n\n  const touchAction = (props.detectPinchGesture || [TOOL_PAN, TOOL_AUTO].indexOf(tool) !== -1) ? 'none' : undefined\n\n  const style = {display: 'block', cursor, touchAction};\n  return (\n    <div\n      style={{position: \"relative\", width: viewerWidth, height: viewerHeight, ...props.style}}\n      className={props.className}>\n      <svg\n        ref={ViewerDOM}\n        width={viewerWidth}\n        height={viewerHeight}\n        style={style}\n\n        onMouseDown={event => {\n          const nextValue = onMouseDown(event, boundingRect, matrix, tool, props, mode);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n\n          handleViewerEvent(event);\n        }}\n        onMouseMove={event => {\n          const nextValue = onMouseMove(event, boundingRect, matrix, tool, props, mode, start, end, viewer, SVGAttributes);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n          handleViewerEvent(event);\n        }}\n        onMouseUp={event => {\n          const nextValue = onMouseUp(event, boundingRect, matrix, tool, props, mode, start, end, viewer);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n          handleViewerEvent(event);\n        }}\n\n        onClick={event => {\n          handleViewerEvent(event)\n        }}\n        onDoubleClick={event => {\n          const nextValue = onDoubleClick(event, boundingRect, matrix, tool, props, mode);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n          handleViewerEvent(event);\n        }}\n\n        onWheel={event => {\n          const nextValue = onWheel(event, boundingRect, matrix, tool, props, mode);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n        }}\n\n        onMouseEnter={event => {\n          if (detectTouch()) return;\n          const nextValue = onMouseEnterOrLeave(event, boundingRect, matrix, tool, props, mode);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n        }}\n        onMouseLeave={event => {\n          const nextValue = onMouseEnterOrLeave(event, boundingRect, matrix, tool, props, mode);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n        }}\n\n        onTouchStart={event => {\n          const nextValue = onTouchStart(event, boundingRect, matrix, tool, props, mode);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n          handleViewerEvent(event);\n        }}\n        onTouchMove={event => {\n          const nextValue = onTouchMove(event, boundingRect, matrix, tool, props, mode);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n          handleViewerEvent(event);\n        }}\n        onTouchEnd={event => {\n          const nextValue = onTouchEnd(event, boundingRect, matrix, tool, props, mode);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n          handleViewerEvent(event);\n        }}\n        onTouchCancel={event => {\n          const nextValue = onTouchCancel(event, boundingRect, tool,  props, mode);\n          if (!isEmpty(nextValue)) updateValue(nextValue);\n          handleViewerEvent(event);\n        }}>\n\n        <rect\n          fill={props.background}\n          x={0}\n          y={0}\n          width={viewerWidth}\n          height={viewerHeight}\n          style={{pointerEvents: \"none\"}}\n        />\n\n        <g\n          transform={toSVG(matrix)}\n          style={blockChildEvents ? {pointerEvents: \"none\"} : {}}>\n          <rect\n            fill={props.SVGBackground}\n            style={props.SVGStyle}\n            x={SVGMinX || 0}\n            y={SVGMinY || 0}\n            width={SVGWidth}\n            height={SVGHeight}/>\n          <g>\n            {children.props.children}\n          </g>\n        </g>\n        \n\n        {!([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0 && props.detectAutoPan) ? null : (\n          <g>\n            <BorderGradient direction={POSITION_TOP} width={viewerWidth} height={viewerHeight} setAutoPanHover={setAutoPanHover}/>\n            <BorderGradient direction={POSITION_RIGHT} width={viewerWidth} height={viewerHeight} setAutoPanHover={setAutoPanHover}/>\n            <BorderGradient direction={POSITION_BOTTOM} width={viewerWidth} height={viewerHeight} setAutoPanHover={setAutoPanHover}/>\n            <BorderGradient direction={POSITION_LEFT} width={viewerWidth} height={viewerHeight} setAutoPanHover={setAutoPanHover}/>\n          </g>\n        )}\n\n        {!(mode === MODE_ZOOMING) ? null :\n          <Selection startX={start.x} startY={start.y} endX={end.x} endY={end.y}/>\n        }\n      </svg>\n      \n      \n      {props.toolbarProps.position === POSITION_NONE ? null :\n        <CustomToolbar\n          {...props.toolbarProps}\n          fitToViewer={(SVGAlignX, SVGAlignY) => updateValue(fitToViewer(viewer, SVGAttributes, SVGAlignX, SVGAlignY))}\n          tool={tool}\n          onChangeTool={tool => {\n            setTool(tool);\n            const { onChangeTool } = props;\n            if(onChangeTool) onChangeTool(tool);\n          }}\n        />}\n\n      {props.miniatureProps.position === POSITION_NONE ? null :\n        <CustomMiniature\n          viewer={viewer}\n          SVGAttributes={SVGAttributes}\n          miniatureOpen={miniatureOpen}\n          setMiniatureOpen={setMiniatureOpen}\n          matrix={matrix}\n          {...props.miniatureProps}\n          // value={value}\n          // onChangeValue={value => updateValue(value)}\n          SVGBackground={props.SVGBackground}\n        >\n          {props.children.props.children}\n        </CustomMiniature>\n      }\n    </div>\n  );\n});\n\nReactSVGPanZoom.propTypes = {\n  /**************************************************************************/\n  /*  Viewer configuration                                                  */\n  /**************************************************************************/\n  //width of the viewer displayed on screen\n  width: PropTypes.number.isRequired,\n\n  //height of the viewer displayed on screen\n  height: PropTypes.number.isRequired,\n\n  //handler something changed\n  onChangeValue: PropTypes.func,\n\n  //current active tool (TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT)\n  tool: PropTypes.oneOf([TOOL_AUTO, TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT]).isRequired,\n\n  //handler tool changed\n  onChangeTool: PropTypes.func,\n\n  /**************************************************************************/\n  /* Customize style                                                        */\n  /**************************************************************************/\n\n  //background of the viewer\n  background: PropTypes.string,\n\n  //background of the svg\n  SVGBackground: PropTypes.string,\n\n  //style of the svg\n  SVGStyle: PropTypes.object,\n\n  //CSS style of the Viewer\n  style: PropTypes.object,\n\n  //className of the Viewer\n  className: PropTypes.string,\n\n\n  /**************************************************************************/\n  /* Detect events                                                          */\n  /**************************************************************************/\n\n  //perform zoom operation on mouse scroll\n  detectWheel: PropTypes.bool,\n\n  //perform PAN if the mouse is on viewer border\n  detectAutoPan: PropTypes.bool,\n\n  //perform zoom operation on pinch gesture\n  detectPinchGesture: PropTypes.bool,\n\n  //toolbar position\n  toolbarPosition: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n\n  //handler zoom level changed\n  onZoom: PropTypes.func,\n\n  //handler pan action performed\n  onPan: PropTypes.func,\n\n  //handler click\n  onClick: PropTypes.func,\n\n  //handler double click\n  onDoubleClick: PropTypes.func,\n\n  //handler mouseup\n  onMouseUp: PropTypes.func,\n\n  //handler mousemove\n  onMouseMove: PropTypes.func,\n\n  //handler mousedown\n  onMouseDown: PropTypes.func,\n\n  /**************************************************************************/\n  /* Some advanced configurations                                           */\n  /**************************************************************************/\n\n  //if disabled the user can move the image outside the viewer\n  preventPanOutside: PropTypes.bool,\n\n  //how much scale in or out\n  scaleFactor: PropTypes.number,\n\n  //how much scale in or out on mouse wheel (requires detectWheel enabled)\n  scaleFactorOnWheel: PropTypes.number,\n\n  // maximum amount of scale a user can zoom in to\n  scaleFactorMax: PropTypes.number,\n\n  // minimum amount of a scale a user can zoom out of\n  scaleFactorMin: PropTypes.number,\n\n  //modifier keys //https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState\n  modifierKeys: PropTypes.array,\n\n  //Turn off zoom on double click\n  disableDoubleClickZoomWithToolAuto: PropTypes.bool,\n\n  /**************************************************************************/\n  /* Miniature configurations                                                 */\n  /**************************************************************************/\n\n  //override miniature component\n  customMiniature: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n\n  //miniature props\n  miniatureProps: PropTypes.shape({\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_RIGHT, POSITION_LEFT]),\n    background: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n  }),\n\n  /**************************************************************************/\n  /* Toolbar configurations                                                 */\n  /**************************************************************************/\n\n  //override toolbar component\n  customToolbar: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n\n  //toolbar props\n  toolbarProps: PropTypes.shape({\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n    SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\n    SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\n  }),\n\n  /**************************************************************************/\n  /* Children Check                                                         */\n  /**************************************************************************/\n  //accept only one node SVG\n  children: function (props, propName, componentName) {\n    // Only accept a single child, of the appropriate type\n    //credits: http://www.mattzabriskie.com/blog/react-validating-children\n    let prop = props[propName];\n    let types = ['svg'];\n    if (React.Children.count(prop) !== 1 ||\n      types.indexOf(prop.type) === -1) {\n      return new Error(\n        '`' + componentName + '` ' +\n        'should have a single child of the following types: ' +\n        ' `' + types.join('`, `') + '`.'\n      );\n    }\n    if (\n      (!prop.props.hasOwnProperty('width') || !prop.props.hasOwnProperty('height')) &&\n      (!prop.props.hasOwnProperty('viewBox'))\n    ) {\n      return new Error('SVG should have props `width` and `height` or `viewBox`');\n    }\n\n  }\n};\n\nReactSVGPanZoom.defaultProps = {\n  style: {},\n  background: \"#616264\",\n  SVGBackground: \"#fff\",\n  SVGStyle: {},\n  detectWheel: true,\n  detectAutoPan: true,\n  detectPinchGesture: true,\n  modifierKeys: [\"Alt\", \"Shift\", \"Control\"],\n  preventPanOutside: true,\n  scaleFactor: 1.1,\n  scaleFactorOnWheel: 1.06,\n  disableZoomWithToolAuto: false,\n  onZoom: null,\n  onPan: null,\n  customToolbar: Toolbar,\n  toolbarProps: {},\n  customMiniature: Miniature,\n  miniatureProps: {},\n};\n\nexport default ReactSVGPanZoom;\n","import {decompose} from '../features/common'\n\nexport default class ViewerEvent {\n  constructor(originalEvent, matrix, boundingRect) {\n    this.originalEvent = originalEvent;\n    this.matrix = matrix;\n    this.boundingRect = boundingRect;\n  }\n\n  get scaleFactor() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.matrix);\n    return this._cacheDecomposedValue.scaleFactor;\n  }\n\n  get translationX() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.matrix);\n    return this._cacheDecomposedValue.translationX;\n  }\n\n  get translationY() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.matrix);\n    return this._cacheDecomposedValue.translationY;\n  }\n\n  preventDefault(){\n    this.originalEvent.preventDefault();\n  }\n\n  stopPropagation(){\n    this.originalEvent.stopPropagation();\n  }\n}\n","import {\n  TOOL_AUTO,\n  TOOL_NONE,\n  TOOL_PAN,\n  TOOL_ZOOM_IN,\n  TOOL_ZOOM_OUT,\n  MODE_PANNING,\n  MODE_ZOOMING,\n  MODE_IDLE\n} from '../constants';\nimport {setViewerCoords, getSVGPoint, getCursorPosition} from './common';\nimport {startPanning, updatePanning, stopPanning} from './pan';\nimport {startZooming, updateZooming, stopZooming, zoom} from './zoom';\nimport mapRange from '../utils/mapRange';\n\n\nexport function onMouseDown(event, boundingRect, matrix, tool, props, mode) {\n  const cursurPosition = getCursorPosition(event, boundingRect);\n  let nextValue = {};\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n      const {x, y} = cursurPosition;\n      const SVGPoint = getSVGPoint(x, y, matrix);\n      nextValue = zoom(matrix, SVGPoint, 1 / props.scaleFactor);\n      break;\n\n    case TOOL_ZOOM_IN:\n      nextValue = startZooming(cursurPosition);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      nextValue = startPanning(cursurPosition);\n      break;\n\n    default:\n      return {};\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseMove(event, boundingRect, matrix, tool, props, mode, start, end, viewer, SVGAttributes) {\n  const cursurPosition = getCursorPosition(event, boundingRect);\n  const forceExit = (event.buttons === 0); //the mouse exited and reentered into svg\n  let nextValue = {};\n\n  switch (tool) {\n    case TOOL_ZOOM_IN:\n      if (mode === MODE_ZOOMING)\n        nextValue = forceExit ? stopZooming(cursurPosition, start, end, matrix, props.scaleFactor, props, viewer) : updateZooming(mode, cursurPosition);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      if (mode === MODE_PANNING)\n        nextValue = forceExit ? stopPanning() : updatePanning(cursurPosition, start, end, matrix, props.preventPanOutside ? 20 : undefined, mode, viewer, SVGAttributes);\n      break;\n    default:\n      return {};\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseUp(event, boundingRect, matrix, tool, props, mode, start, end, viewer) {\n  const cursurPosition = getCursorPosition(event, boundingRect);\n  let nextValue = {};\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n      if (mode === MODE_ZOOMING)\n        nextValue = stopZooming(cursurPosition, start, end, matrix, 1 / props.scaleFactor, props, viewer);\n      break;\n\n    case TOOL_ZOOM_IN:\n      if (mode === MODE_ZOOMING)\n        nextValue = stopZooming(cursurPosition, start, end, matrix, props.scaleFactor, props, viewer);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      if (mode === MODE_PANNING)\n        nextValue = stopPanning();\n      break;\n\n    default:\n      return {};\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onDoubleClick(event, boundingRect, matrix, tool, props, mode) {\n  const cursurPosition = getCursorPosition(event, boundingRect);\n  const {x, y} = cursurPosition;\n\n  let nextValue = {};\n  switch (tool) {\n    case TOOL_AUTO:\n      if (!props.disableDoubleClickZoomWithToolAuto) {\n        const SVGPoint = getSVGPoint(x, y);\n        const modifierKeysReducer = (current, modifierKey) => current || event.getModifierState(modifierKey);\n        const modifierKeyActive = props.modifierKeys.reduce(modifierKeysReducer, false);\n        const scaleFactor = modifierKeyActive ? 1 / props.scaleFactor : props.scaleFactor;\n        nextValue = zoom(SVGPoint.x, SVGPoint.y, scaleFactor, props);\n      }\n      break;\n\n    default:\n      return {};\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onWheel(event, boundingRect, matrix, tool, props, mode) {\n  const cursurPosition = getCursorPosition(event, boundingRect);\n  const {x, y} = cursurPosition;\n\n  if (!props.detectWheel) return {};\n\n  const delta = Math.max(-1, Math.min(1, event.deltaY));\n  const scaleFactor = mapRange(delta, -1, 1, props.scaleFactorOnWheel, 1 / props.scaleFactorOnWheel);\n  const SVGPoint = getSVGPoint(x, y, matrix);\n\n  event.preventDefault();\n  return zoom(matrix, SVGPoint, scaleFactor);\n}\n\nexport function onMouseEnterOrLeave(event, boundingRect, matrix, tool, props, mode) {\n  event.preventDefault();\n  return {focus: event.type === 'mouseenter'};\n}\n","export default function calculateBox(start, end) {\n  if (start.x <= end.x && start.y <= end.y) {\n    return {\n      x: start.x,\n      y: start.y,\n      width: end.x - start.x,\n      height: end.y - start.y\n    };\n  } else if (start.x >= end.x && start.y <= end.y) {\n    return {\n      x: end.x,\n      y: start.y,\n      width: start.x - end.x,\n      height: end.y - start.y\n    };\n  } else if (start.x >= end.x && start.y >= end.y) {\n    return {\n      x: end.x,\n      y: end.y,\n      width: start.x - end.x,\n      height: start.y - end.y\n    };\n  } else if (start.x <= end.x && start.y >= end.y) {\n    return {\n      x: start.x,\n      y: end.y,\n      width: end.x - start.x,\n      height: start.y - end.y\n    };\n  }\n}\n\n","import React, {useState} from \"react\";\nimport getDisplayName from \"./getDisplayName\";\n\nlet uid = 1;\nconst nextUID = () => `uid${uid++}`;\n\nexport default function RandomUID(WrappedComponent) {\n  const RandomUID = (props) => {\n    const [uid, setUID] = useState(nextUID())\n    return <WrappedComponent _uid={uid} {...props}/>\n  }\n\n  RandomUID.displayName = `RandomUID(${getDisplayName(WrappedComponent)})`;\n\n  return RandomUID;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\n  POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT,\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM,\n} from '../constants';\n\nimport IconCursor from './icon-cursor';\nimport IconPan from './icon-pan';\nimport IconZoomIn from './icon-zoom-in';\nimport IconZoomOut from './icon-zoom-out';\nimport IconFit from './icon-fit';\nimport ToolbarButton from './toolbar-button';\n\nexport default function Toolbar({tool, onChangeTool, position, fitToViewer, SVGAlignX, SVGAlignY}) {\n\n  let handleChangeTool = (event, tool) => {\n    onChangeTool(tool);\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  let handleFit = event => {\n    fitToViewer(SVGAlignX, SVGAlignY);\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  let isHorizontal = [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0;\n\n  let style = {\n    //position\n    position: \"absolute\",\n    transform: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"translate(-50%, 0px)\" : \"none\",\n    top: [POSITION_LEFT, POSITION_RIGHT, POSITION_TOP].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n    left: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"50%\" : (POSITION_LEFT === position ? \"5px\" : \"unset\"),\n    right: [POSITION_RIGHT].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n    bottom: [POSITION_BOTTOM].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n\n    //inner styling\n    backgroundColor: \"rgba(19, 20, 22, 0.90)\",\n    borderRadius: \"2px\",\n    display: \"flex\",\n    flexDirection: isHorizontal ? \"row\" : \"column\",\n    padding: isHorizontal ? \"1px 2px\" : \"2px 1px\"\n  };\n\n  return (\n    <div style={style} role=\"toolbar\">\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_NONE}\n        name=\"unselect-tools\"\n        title=\"Selection\"\n        onClick={ event => handleChangeTool(event, TOOL_NONE) }>\n        <IconCursor/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_PAN}\n        name=\"select-tool-pan\"\n        title=\"Pan\"\n        onClick={ event => handleChangeTool(event, TOOL_PAN) }>\n        <IconPan/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_ZOOM_IN}\n        name=\"select-tool-zoom-in\"\n        title=\"Zoom in\"\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_IN) }>\n        <IconZoomIn/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_ZOOM_OUT}\n        name=\"select-tool-zoom-out\"\n        title=\"Zoom out\"\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_OUT) }>\n        <IconZoomOut/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={false}\n        name=\"fit-to-viewer\"\n        title=\"Fit to viewer\"\n        onClick={ event => handleFit(event) }>\n        <IconFit/>\n      </ToolbarButton>\n    </div>\n  )\n}\n\nToolbar.propTypes = {\n  tool: PropTypes.string.isRequired,\n  onChangeTool: PropTypes.func.isRequired,\n  // onChangeValue: PropTypes.func.isRequired,\n\n  //customizations\n  position: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n};\n\nToolbar.defaultProps = {\n  position: POSITION_RIGHT,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_LEFT, POSITION_RIGHT,} from '../constants';\nimport {applyToPoints, inverse} from 'transformation-matrix';\nimport MiniatureToggleButton from './miniature-toggle-button';\nimport MiniatureMask from './miniature-mask';\n\nconst {min, max} = Math;\n\nexport default function Miniature(props) {\n\n  const {miniatureOpen, setMiniatureOpen, matrix, onChangeValue, children, position, background, SVGBackground, width: miniatureWidth, height: miniatureHeight} = props;\n  const {viewerWidth, viewerHeight} = props.viewer;\n  const {SVGMinX, SVGMinY, SVGWidth, SVGHeight} = props.SVGAttributes;\n\n  let ratio = SVGHeight / SVGWidth;\n\n  let zoomToFit = ratio >= 1\n    ? miniatureHeight / SVGHeight\n    : miniatureWidth / SVGWidth;\n\n  let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(inverse(matrix), [\n    {x: 0, y: 0},\n    {x: viewerWidth, y: viewerHeight}\n  ]);\n\n  let width, height;\n  if (miniatureOpen) {\n    width = miniatureWidth;\n    height = miniatureHeight;\n  } else {\n    width = 24;\n    height = 24;\n  }\n\n  let style = {\n    position: \"absolute\",\n    overflow: \"hidden\",\n    outline: \"1px solid rgba(19, 20, 22, 0.90)\",\n    transition: \"width 200ms ease, height 200ms ease, bottom 200ms ease\",\n    width: width + \"px\",\n    height: height + \"px\",\n    bottom: \"6px\",\n    [position === POSITION_LEFT ? 'left' : 'right']: \"6px\",\n    background\n  };\n\n  let centerTranslation = ratio >= 1\n    ? `translate(${(miniatureWidth - (SVGWidth * zoomToFit)) / 2 - SVGMinX * zoomToFit}, ${ - SVGMinY * zoomToFit})`\n    : `translate(${ - SVGMinX * zoomToFit}, ${(miniatureHeight - (SVGHeight * zoomToFit)) / 2 - SVGMinY * zoomToFit})`;\n\n  return (\n    <div role=\"navigation\" style={style}>\n      <svg\n        width={miniatureWidth}\n        height={miniatureHeight}\n        style={{pointerEvents: \"none\"}}>\n        <g transform={centerTranslation}>\n          <g transform={`scale(${zoomToFit}, ${zoomToFit})`}>\n\n            <rect\n              fill={SVGBackground}\n              x={SVGMinX}\n              y={SVGMinY}\n              width={SVGWidth}\n              height={SVGHeight}/>\n\n            {children}\n\n            <MiniatureMask\n              SVGWidth={SVGWidth}\n              SVGHeight={SVGHeight}\n              SVGMinX={SVGMinX}\n              SVGMinY={SVGMinY}\n              x1={x1}\n              y1={y1}\n              x2={x2}\n              y2={y2}\n              zoomToFit={zoomToFit}\n            />\n\n          </g>\n        </g>\n      </svg>\n      <MiniatureToggleButton\n        miniatureOpen={miniatureOpen}\n        setMiniatureOpen={setMiniatureOpen}\n        position={position}\n      />\n    </div>\n  )\n}\n\nMiniature.propTypes = {\n  // onChangeValue: PropTypes.func.isRequired,\n  SVGBackground: PropTypes.string.isRequired,\n\n  //customizations\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]),\n  background: PropTypes.string.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n};\n\nMiniature.defaultProps = {\n  position: POSITION_LEFT,\n  background: \"#616264\",\n  width: 100,\n  height: 80,\n}\n","import {tipNoViewer} from \"./migration-tips\";\n\nexport {default as ReactSVGPanZoom} from './viewer';\nexport {default as UncontrolledReactSVGPanZoom} from './uncontrolled-viewer';\nexport {default as Toolbar} from './ui-toolbar/toolbar';\nexport {default as Miniature} from './ui-miniature/miniature';\nexport {setPointOnViewerCenter, reset} from './features/common';\nexport {pan} from './features/pan';\nexport {zoom, fitSelection, fitToViewer, zoomOnViewerCenter} from './features/zoom';\nexport {openMiniature, closeMiniature} from './features/miniature'\nexport * from './constants';\n\nexport const Viewer = () => {\n  tipNoViewer()\n  return null;\n};\n","import ViewerMouseEvent from './viewer-mouse-event';\nimport ViewerTouchEvent from './viewer-touch-event';\n\nexport default function (originalEvent, matrix, boundingRect) {\n\n  let eventType = originalEvent.type;\n\n  switch (eventType) {\n    case \"mousemove\":\n    case \"mouseup\":\n    case \"mousedown\":\n    case \"click\":\n    case \"dblclick\":\n      return new ViewerMouseEvent(originalEvent, matrix, boundingRect);\n\n    case \"touchstart\":\n    case \"touchmove\":\n    case \"touchend\":\n    case \"touchcancel\":\n      return new ViewerTouchEvent(originalEvent, matrix, boundingRect);\n\n    default:\n      throw new Error(`${eventType} not supported`);\n  }\n}\n","import {getSVGPoint} from '../features/common'\nimport ViewerEvent from './viewer-event';\n\nexport default class ViewerMouseEvent extends ViewerEvent{\n\n  get point() {\n    if (!this._cachePoint) {\n      let event = this.originalEvent, matrix = this.matrix, boundingRect = this.boundingRect;\n\n      let x = event.clientX - Math.round(boundingRect.left);\n      let y = event.clientY - Math.round(boundingRect.top);\n\n      this._cachePoint = getSVGPoint(x, y, matrix);\n    }\n    return this._cachePoint;\n  }\n\n  get x() {\n    return this.point.x;\n  }\n\n  get y() {\n    return this.point.y;\n  }\n}\n","import {getSVGPoint} from '../features/common'\nimport ViewerEvent from './viewer-event';\n\nexport default class ViewerTouchEvent extends ViewerEvent {\n  get points() {\n    if (!this._cachePoints)\n      this._cachePoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.touches, this.boundingRect, this.matrix);\n\n    return this._cachePoints;\n  }\n\n  get changedPoints() {\n    if (!this._cacheChangedPoints)\n      this._cacheChangedPoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.changedTouches, this.boundingRect, this.matrix);\n\n    return this._cacheChangedPoints;\n  }\n\n  static touchesToPoints(touches, boundingRect, matrix) {\n    let points = [];\n    for (let i = 0; i < touches.length; i++) {\n      let touch = touches[i];\n\n      let x = touch.clientX - Math.round(boundingRect.left);\n      let y = touch.clientY - Math.round(boundingRect.top);\n\n      let point = getSVGPoint(x, y, matrix);\n\n      points.push({...point, identifier: touch.identifier});\n    }\n    return points;\n  }\n}\n","export default function mapRange(value, low1, high1, low2, high2) {\n  return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\n","const HASH_MAP = {0: 'SVGMinX', 1: 'SVGMinY', 2: 'SVGWidth', 3: 'SVGHeight'}\nexport default function parseViewBox(viewBoxString) {\n  // viewBox specs: https://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute\n  return viewBoxString && viewBoxString\n    .split(/[ ,]/) // split optional comma\n    .filter(Boolean) // remove empty strings\n    .map(Number) // cast to Number\n    .map((value, index) => ({[HASH_MAP[index]]: value}))\n    .reduce((val, acc) => ({...acc, ...val}), {})\n}\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\nimport {\n  TOOL_NONE, TOOL_PAN, TOOL_AUTO, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\n  MODE_IDLE, MODE_PANNING, MODE_ZOOMING\n} from '../constants';\nimport {resetMode, getSVGPoint} from './common';\nimport {onMouseDown, onMouseMove, onMouseUp} from './interactions';\nimport {isZoomLevelGoingOutOfBounds, limitZoomLevel} from './zoom';\n\nfunction hasPinchPointDistance(pinchPointDistance) {\n  return typeof pinchPointDistance === 'number';\n}\n\nfunction onMultiTouch(event, boundingRect, matrix, tool, props, mode, prePinchMode) {\n  const {left, top} = boundingRect;\n  const x1 = event.touches[0].clientX - Math.round(left);\n  const y1 = event.touches[0].clientY - Math.round(top);\n  const x2 = event.touches[1].clientX - Math.round(left);\n  const y2 = event.touches[1].clientY - Math.round(top);\n  const thisPinchPointDistance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n  const previousPointDistance = hasPinchPointDistance(pinchPointDistance) ? pinchPointDistance : thisPinchPointDistance;\n  const svgPoint = getSVGPoint((x1 + x2) / 2, (y1 + y2) / 2, matrix);\n  let distanceFactor = pinchPointDistance/previousPointDistance;\n\n  if (isZoomLevelGoingOutOfBounds(distanceFactor)) {\n    return {};\n  }\n\n  if (event.cancelable) {\n    event.preventDefault();\n  }\n\n  let newMatrix = transform(\n    fromObject(matrix),\n    translate(svgPoint.x, svgPoint.y),\n    scale(distanceFactor, distanceFactor),\n    translate(-svgPoint.x, -svgPoint.y)\n  );\n\n  return {\n    mode: MODE_ZOOMING,\n    ...limitZoomLevel(newMatrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null,\n    prePinchMode: prePinchMode ? prePinchMode : mode,\n    pinchPointDistance\n  };\n}\n\nfunction isMultiTouch(event, props) {\n  return props.detectPinchGesture && event.touches.length > 1;\n}\n\nfunction shouldResetPinchPointDistance(event, pinchPointDistance, props) {\n  return props.detectPinchGesture && hasPinchPointDistance(pinchPointDistance) && event.touches.length < 2;\n}\n\nfunction getTouchPosition(touch, boundingRect) {\n  let {left, top} = boundingRect;\n  let x = touch.clientX - Math.round(left);\n  let y = touch.clientY - Math.round(top);\n\n  return { x, y };\n}\n\nfunction getNextValue(event, boundingRect, matrix, tool, props, mode, prePinchMode, nextValueFn) {\n  let nextValue = event.touches.length === 0 ? { mode: prePinchMode ? MODE_IDLE : mode, prePinchMode: null } : {};\n  let touch = event.touches.length > 0 ? event.touches[0] : event.changedTouches[0];\n  let touchPosition = getTouchPosition(touch, boundingRect);\n\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n    case TOOL_ZOOM_IN:\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      event.stopPropagation();\n      event.preventDefault();\n      return nextValueFn(event, boundingRect, tool, nextValue, props, touchPosition);\n\n    default:\n      return nextValue;\n  }\n}\n\nexport function onTouchStart(event, boundingRect, matrix, tool, props, mode) {\n  if (isMultiTouch(event, props)) {\n    return onMultiTouch(event, boundingRect, tool, props);\n  }\n\n  if (event.touches.length !== 1) {\n    if ([MODE_PANNING, MODE_ZOOMING].indexOf(mode) >= 0){\n      return resetMode();\n    } else if([MODE_IDLE].indexOf(mode) >= 0){\n      return {};\n    }\n  }\n\n  return getNextValue(event, boundingRect, tool, props, onMouseDown);\n}\n\nexport function onTouchMove(event, boundingRect, matrix, tool, props, mode) {\n  if (isMultiTouch(event, props)) {\n    return onMultiTouch(event, boundingRect, tool, props);\n  }\n\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(mode) >= 0)) {\n    return {};\n  }\n\n  return getNextValue(event, boundingRect, tool, props, onMouseMove);\n}\n\nexport function onTouchEnd(event, boundingRect, matrix, tool, props, mode, pinchPointDistance) {\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(mode) >= 0)) {\n    return {};\n  }\n\n  const nextValue = shouldResetPinchPointDistance(event, pinchPointDistance, props) ? { pinchPointDistance: null } : {};\n\n  if (event.touches.length > 0) {\n    return nextValue;\n  }\n\n  return getNextValue(event, boundingRect, tool, nextValue, props, onMouseUp);\n}\n\nexport function onTouchCancel(event, boundingRect, tool, props) {\n  event.stopPropagation();\n  event.preventDefault();\n\n  return resetMode();\n}\n","//specs: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor\n\nlet needPrefix = (cursor) => ['zoom-in', 'zoom-out', 'grab', 'grabbing'].indexOf(cursor) > -1;\nlet userAgent = () => navigator.userAgent.toLowerCase();\nlet isFirefox = () => userAgent().indexOf('firefox') > -1;\nlet isWebkit = () => userAgent().indexOf('webkit') > -1;\n\nexport default function (cursor) {\n  if (!needPrefix(cursor)) return cursor;\n  if (isFirefox()) return `-moz-${cursor}`;\n  if (isWebkit()) return `-webkit-${cursor}`;\n}\n\n\n","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT, POSITION_NONE} from '../constants';\nimport RandomUID from \"../utils/RandomUID\";\n\nconst prefixID = 'react-svg-pan-zoom_border_gradient'\n\nfunction BorderGradient({direction, width, height, _uid, setAutoPanHover}) {\n  const [hover, setHover] = useState(false)\n  let transform;\n\n  switch (direction) {\n    case POSITION_TOP:\n      transform = `translate(${width}, 0) rotate(90)`;\n      break;\n\n    case POSITION_RIGHT:\n      transform = `translate(${width}, ${height}) rotate(180)`;\n      break;\n\n    case POSITION_BOTTOM:\n      transform = `translate(0, ${height}) rotate(270)`;\n      break;\n\n    case POSITION_LEFT:\n      transform = \" \";\n      break;\n  }\n\n  let gradientID = `${prefixID}_gradient_${_uid}`\n  let maskID = `${prefixID}_mask_${_uid}`\n\n  return (\n    <g>\n      <defs>\n        <linearGradient id={gradientID} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\" spreadMethod=\"pad\">\n          <stop offset=\"0%\" stopColor=\"#fff\" stopOpacity=\"0.8\"/>\n          <stop offset=\"100%\" stopColor=\"#000\" stopOpacity=\"0.5\"/>\n        </linearGradient>\n\n        <mask id={maskID} x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}>\n          <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\n                style={{stroke: \"none\", fill: `url(#${gradientID})`}}/>\n        </mask>\n      </defs>\n\n      <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\n            style={{stroke: \"none\", fill: \"#000\", mask: `url(#${maskID})`, opacity: hover ? 1 : 0}} \n            transform={transform} onMouseEnter={() => {setHover(true); setAutoPanHover(direction)}} onMouseLeave={() => {setHover(false); setAutoPanHover(POSITION_NONE)}} />\n    </g>\n  );\n}\n\nBorderGradient.propTypes = {\n  direction: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]).isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired\n};\n\nexport default RandomUID(BorderGradient)\n","//https://facebook.github.io/react/docs/higher-order-components.html#convention-wrap-the-display-name-for-easy-debugging\nexport default function getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport calculateBox from '../utils/calculateBox';\n\nexport default function Selection({startX, startY, endX, endY}) {\n  if (!startX || !startY || !endX || !endY) return null;\n\n  let box = calculateBox({x: startX, y: startY}, {x: endX, y: endY});\n\n  return (<rect\n    stroke=\"#969FFF\"\n    strokeOpacity={0.7}\n    fill=\"#F3F4FF\"\n    fillOpacity={0.7}\n    x={box.x}\n    y={box.y}\n    width={box.width}\n    height={box.height}\n    style={{pointerEvents: \"none\"}}/>);\n}\n\nSelection.propTypes = {\n  startX: PropTypes.number,\n  startY: PropTypes.number,\n  endX: PropTypes.number,\n  endY: PropTypes.number\n};\n","import React from 'react';\n\n//credits https://materialdesignicons.com/icon/cursor-default-outline\n\nexport default function IconCursor() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://materialdesignicons.com/icon/cursor-move\n\nexport default function IconPan() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://material.io/icons/#ic_zoom_in\n\nexport default function IconZoomIn() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <g>\n        <path\n          d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n        <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://material.io/icons/#ic_zoom_out\n\nexport default function IconZoomOut() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\"/>\n    </svg>\n  )\n}\n","import React from 'react';\n\n//credits https://materialdesignicons.com/icon/cursor-default-outline\n\nexport default function IconFit() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z\"/>\n    </svg>\n  );\n}\n","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  POSITION_TOP, POSITION_BOTTOM\n} from '../constants';\n\nconst ToolbarButton = (props) => {\n  const [hover, setHover] = useState(false)\n\n  function change(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.type) {\n      case 'mouseenter':\n      case 'touchstart':\n        setHover(true);\n        break;\n      case 'mouseleave':\n      case 'touchend':\n      case 'touchcancel':\n        setHover(false);\n        break;\n    }\n  }\n\n  const {title, name, active, toolbarPosition, onClick, children} = props;\n\n  let style = {\n    display: \"block\",\n    width: \"24px\",\n    height: \"24px\",\n    margin: [POSITION_TOP, POSITION_BOTTOM].indexOf(toolbarPosition) >= 0 ? \"2px 1px\" : \"1px 2px\",\n    color: active || hover ? '#1CA6FC' : '#FFF',\n    transition: \"color 200ms ease\",\n    background: \"none\",\n    padding: \"0px\",\n    border: \"0px\",\n    outline: \"0px\",\n    cursor: \"pointer\"\n  };\n\n  return (\n    <button\n      onMouseEnter={e => change(e)}\n      onMouseLeave={e => change(e)}\n\n      onTouchStart={e => {\n        change(e);\n        onClick(e);\n      }}\n      onTouchEnd={e => change(e)}\n      onTouchCancel={e => change(e)}\n\n      onClick={onClick}\n\n      style={style}\n      title={title}\n      name={name}\n      role=\"button\"\n      type=\"button\"\n    >{children}</button>\n  )\n}\n\nToolbarButton.propTypes = {\n  title: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  toolbarPosition: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  active: PropTypes.bool.isRequired\n};\n\nexport default ToolbarButton;\n","//http://stackoverflow.com/a/4819886/1398836\n\nexport default function isTouchDevice() {\n  return 'ontouchstart' in window        // works on most browsers\n    || navigator.maxTouchPoints;       // works on IE10/11 and Surface\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {openMiniature, closeMiniature} from '../features/miniature';\nimport IconArrow from './icon-arrow';\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\n\nexport default function MiniatureToggleButton({position, miniatureOpen, setMiniatureOpen}) {\n  let style = {\n    width: \"24px\",\n    height: \"24px\",\n    display: \"block\",\n    position: \"absolute\",\n    bottom: 0,\n    [position === POSITION_LEFT ? 'left' : 'right']: '0px',\n    background: \"rgba(19, 20, 22, 0.901961)\",\n    border: 0,\n    padding: 0,\n    outline: 0,\n    color: \"#fff\"\n  };\n\n  return (\n    <button role=\"button\" type=\"button\" style={style} onClick={event => setMiniatureOpen(!miniatureOpen)}>\n      <IconArrow open={miniatureOpen} position={position}/>\n    </button>\n  )\n\n}\n\nMiniatureToggleButton.propTypes = {\n  // onChangeValue: PropTypes.func.isRequired,\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\n\n//credits https://materialdesignicons.com/icon/chevron-up\n\nexport default function IconArrow({open, position}) {\n\n  let transform = 0;\n\n  switch (position){\n    case POSITION_LEFT:\n      transform = open ? \"rotate(225, 12, 13)\" : \"rotate(45, 12, 13)\";\n      break;\n\n    case POSITION_RIGHT:\n      transform = transform = open ? \"rotate(135, 12, 13)\" : \"rotate(-45, 12, 13)\";\n  }\n\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <g transform={transform}>\n        <path fill=\"#000000\" d=\"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z\"/>\n      </g>\n    </svg>\n  );\n}\n\nIconArrow.propTypes = {\n  open: PropTypes.bool.isRequired,\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RandomUID from \"../utils/RandomUID\";\n\nconst prefixID = 'react-svg-pan-zoom_miniature'\n\nfunction MiniatureMask({SVGMinX, SVGMinY, SVGWidth, SVGHeight, x1, y1, x2, y2, zoomToFit, _uid}) {\n  const maskID = `${prefixID}_mask_${_uid}`\n\n  return (\n    <g>\n      <defs>\n        <mask id={maskID}>\n          <rect x={SVGMinX} y={SVGMinY} width={SVGWidth} height={SVGHeight} fill=\"#ffffff\"/>\n          <rect x={x1} y={y1} width={x2 - x1} height={y2 - y1}/>\n        </mask>\n      </defs>\n\n      <rect\n        x={SVGMinX}\n        y={SVGMinY}\n        width={SVGWidth}\n        height={SVGHeight}\n        style={{\n          stroke: \"none\",\n          fill: \"#000\",\n          mask: `url(#${maskID})`,\n          opacity: 0.4\n        }}\n      />\n    </g>)\n}\n\nMiniatureMask.propTypes = {\n  SVGWidth: PropTypes.number.isRequired,\n  SVGHeight: PropTypes.number.isRequired,\n  SVGMinX: PropTypes.number.isRequired,\n  SVGMinY: PropTypes.number.isRequired,\n  x1: PropTypes.number.isRequired,\n  y1: PropTypes.number.isRequired,\n  x2: PropTypes.number.isRequired,\n  y2: PropTypes.number.isRequired,\n  zoomToFit: PropTypes.number.isRequired,\n}\n\nexport default RandomUID(MiniatureMask)\n","import React, {forwardRef, useState} from \"react\";\nimport ReactSVGPanZoom from './viewer'\nimport PropTypes from \"prop-types\";\nimport {TOOL_NONE} from \"./constants\";\n\nconst UncontrolledReactSVGPanZoom = forwardRef((props, Viewer) => {\n  // const [value, setValue] = useState(props.defaultValue || {});\n  const [tool, setTool] = useState(props.defaultTool || TOOL_NONE);\n\n  const {width, height, onChangeTool, onChangeValue, ...svgProps} = props;\n\n  return (\n    <ReactSVGPanZoom\n      width={width} height={height}\n      tool={tool} onChangeTool={setTool}\n      // value={value} onChangeValue={setValue}\n      ref={Viewer}\n      {...svgProps}\n    />\n  )\n})\n\nUncontrolledReactSVGPanZoom.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n\n  // defaultValue: PropTypes.object,\n  defaultTool: PropTypes.string,\n}\n\nexport default UncontrolledReactSVGPanZoom;\n"],"sourceRoot":""}